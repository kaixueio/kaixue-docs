# Kotlin çš„å˜é‡ã€å‡½æ•°å’Œç±»å‹

åœ¨ Google I/O 2019 ä¸Šï¼ŒGoogle å®£å¸ƒ Kotlin æˆä¸º Android çš„ç¬¬ä¸€å¼€å‘è¯­è¨€ã€‚è¿™å¯¹äºå¼€å‘è€…æ¥è®²æ„å‘³ç€ï¼Œå°†æ¥æ‰€æœ‰çš„å®˜æ–¹ç¤ºä¾‹ä¼šé¦–é€‰ Kotlinï¼Œå¹¶ä¸” Google å¯¹ Kotlin åœ¨å¼€å‘ã€æ„å»ºç­‰å„ä¸ªæ–¹é¢çš„æ”¯æŒä¹Ÿä¼šæ›´ä¼˜å…ˆã€‚

åœ¨è¿™ä¸ªå¤§ç¯å¢ƒä¸‹ï¼ŒKotlin å·²ç»ä½œä¸ºå¾ˆå¤šå…¬å¸çš„ç§»åŠ¨å¼€å‘å²—é¢è¯•çš„è€ƒå¯Ÿç‚¹ä¹‹ä¸€ï¼Œç”šè‡³ä½œä¸º HR ç®€å†ç­›é€‰çš„å¿…è¦æ¡ä»¶ã€‚å› æ­¤ï¼Œå­¦ä¼šå¹¶æŒæ¡ Kotlin æˆäº† Android å¼€å‘è€…çš„å½“åŠ¡ä¹‹æ€¥ã€‚

ã€ŒKotlin çœŸçš„æœ‰é‚£ä¹ˆå¥½å—ã€ã€Œåˆ°åº•è¦ä¸è¦å­¦ Kotlinã€è¿™æ ·çš„é—®é¢˜å¾ˆå¿«å°±è¦è¿‡æ—¶äº†ï¼Œç ä¸Šå¼€å­¦è¿™ä¸ªé¡¹ç›®çš„ç›®çš„å¹¶ä¸åœ¨äºå‘å„ä½å®‰åˆ© Kotlinï¼Œè€Œåœ¨äºæ€æ ·è®©å¸Œæœ›å­¦ä¹  Kotlin çš„äººæœ€å¿«é€Ÿåœ°ä¸Šæ‰‹ã€‚

æˆ‘ä»¬çš„ç›®çš„éå¸¸æ˜ç¡®ï¼šè¿™æ˜¯ä¸€ä»½ç»™ Android å·¥ç¨‹å¸ˆçš„ Kotlin ä¸Šæ‰‹æŒ‡å—ã€‚å…¶ä¸­ï¼š

- è¿™æ˜¯ä¸€ä»½ä¸Šæ‰‹æŒ‡å—ï¼Œè€Œä¸æ˜¯æŠ€æœ¯æ–‡æ¡£ã€‚æ‰€ä»¥ï¼š
  - æˆ‘ä»¬ä¼šå¸¦ç€ä½ ä¸€æ­¥æ­¥åœ°ã€æœ‰èŠ‚å¥åœ°å­¦ä¹ ï¼Œè®©ä½ è½»æ¾æ„‰å¿«åœ°å­¦ä¼š Kotlinï¼›
  - ä½†è¿™é‡Œä¸ä¼šæœ‰å®Œæ•´çš„ API æ¸…å•ã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹ APIï¼Œå¯ä»¥å»çœ‹ Kotlin å®˜æ–¹æ–‡æ¡£ã€‚
- è¿™è™½ç„¶åªæ˜¯ä¸€ä»½ã€Œä¸Šæ‰‹ã€æŒ‡å—ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šåˆ»æ„å±•ç¤ºè¿‡äºæ·±å…¥çš„å†…å®¹ï¼Œä½†æ‰€æœ‰ä½ éœ€è¦äº†è§£çš„æŠ€æœ¯ç»†èŠ‚ï¼Œä¸€ä¸ªéƒ½ä¸ä¼šå°‘ã€‚
- æˆ‘ä»¬é’ˆå¯¹çš„æ˜¯ Android å·¥ç¨‹å¸ˆï¼Œå› æ­¤æ‰€æœ‰çš„è§†é¢‘å’Œæ–‡ç« è®²è§£ä»¥åŠç¤ºä¾‹ä»£ç ï¼Œå…¨éƒ½ä¼šä»¥ Android å¼€å‘åœºæ™¯ä¸ºåŸºç¡€ï¼Œæ‰€ç”¨çš„å¼€å‘ç¯å¢ƒä¹Ÿæ˜¯ Android Studioã€‚å¦‚æœè¿™ä»½æŒ‡å—èƒ½é¡ºä¾¿è®©ä¸€äº›å…¶ä»–é¢†åŸŸçš„ Java å¼€å‘è€…è·ç›Šå½“ç„¶æ›´å¥½ï¼Œä½†ä»…ä»…æ˜¯é¡ºä¾¿:joy:ã€‚
- è®²è§£ä¸­å‘ˆç°çš„ä»£ç æ®µéƒ¨åˆ†ï¼Œæˆ‘ä¼šä»¥ã€ŒğŸ‘†ã€ã€ŒğŸ‘‡ã€ã€ŒğŸ‘ˆã€ã€ŒğŸ‘‰ã€å½¢å¼æ ‡æ³¨ä»£ç ä¸­éœ€è¦å…³æ³¨çš„åœ°æ–¹ï¼Œå¹¶ä»¥ã€Œâ€¦ã€çœç•¥äº†è¯»è€…æš‚æ—¶ä¸éœ€è¦å…³å¿ƒçš„ä»£ç ã€‚
- Android å¼€å‘è€…ä½¿ç”¨ Android Studio ä½œä¸ºå¼€å‘çš„ IDEï¼Œä»¥ä¸‹æ‰€æœ‰çš„ IDE éƒ½æ˜¯æŒ‡ Android Studioã€‚

## ä¸ºé¡¹ç›®æ·»åŠ  Kotlin è¯­è¨€çš„æ”¯æŒ

å­¦ä¹  Kotlin çš„ç¬¬ä¸€æ­¥å°±æ˜¯è¦ä¸ºé¡¹ç›®æ·»åŠ  Kotlin è¯­è¨€çš„æ”¯æŒï¼Œè¿™éå¸¸ç®€å•ã€‚

### æ–°å»ºæ”¯æŒ Kotlin çš„ Android é¡¹ç›®

å¦‚æœä½ è¦æ–°å»ºä¸€ä¸ªæ”¯æŒ Kotlin çš„ Android é¡¹ç›®ï¼Œåªéœ€è¦å¦‚ä¸‹æ“ä½œï¼š

- File -> New -> New Project â€¦
- Choose your project -> Phone and Tablet -> Empty Activity
- Configure your project  -> Language é€‰æ‹© ã€ŒKotlinã€

åˆ«çš„éƒ½å’Œåˆ›å»ºä¸€ä¸ªæ™®é€šçš„ Android é¡¹ç›®ä¸€æ ·ï¼Œåˆ›å»ºå‡ºçš„é¡¹ç›®å°±ä¼šæ˜¯åŸºäº Kotlin çš„äº†ã€‚

æ‰€è°“ã€ŒåŸºäº Kotlinã€ï¼Œæ„æ€æœ‰ä¸¤ç‚¹ï¼š

1. IDE å¸®ä½ è‡ªåŠ¨åˆ›å»ºå‡ºçš„ `MainActivity` æ˜¯ç”¨ Kotlin å†™çš„ï¼š

   ```kotlin
   package org.kotlinmaster
   
   import android.os.Bundle
   import androidx.appcompat.app.AppCompatActivity
   
   class MainActivity : AppCompatActivity() {
       ...
   }
   ```
   
   > æ‰«ä¸€çœ¼å°±å¥½ï¼Œä¸ç”¨è¯»ä»£ç ï¼Œæˆ‘ä»¬åé¢éƒ½ä¼šè®²ã€‚
   
2. é¡¹ç›®ä¸­çš„ 2 ä¸ª `bulid.gradle` æ–‡ä»¶æ¯” Java çš„ Android é¡¹ç›®å¤šäº†å‡ è¡Œä»£ç ï¼ˆä»¥ã€ŒğŸ‘‡ã€æ ‡æ³¨ï¼‰ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯æ·»åŠ  Kotlin çš„ä¾èµ–ï¼š

   - é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `build.gradle`ï¼š

     ```groovy
     buildscript {
         ğŸ‘‡
         ext.kotlin_version = '1.3.41'
         repositories {
             ...
         }
         dependencies {
             classpath 'com.android.tools.build:gradle:3.5.0-beta05'
             ğŸ‘‡
             classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
         }
     }
     ```

   - app ç›®å½•ä¸‹çš„ `build.gradle`ï¼š

     ```groovy
     apply plugin: 'com.android.application'
     ğŸ‘‡
     apply plugin: 'kotlin-android'
     ...
     
     android {
         ...
     }
     
     dependencies {
         implementation fileTree(dir: 'libs', include: ['*.jar'])
         ğŸ‘‡
         implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
         ...
     }
     
     ```

ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æ˜¯è¦åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œè®°å¾—æŠŠè¯­è¨€é€‰æ‹©ä¸º Kotlinï¼Œé¡¹ç›®åˆ›å»ºå®Œæˆåä½ å°±å¯ä»¥ç”¨ Kotlin æ¥å†™å®ƒäº†ã€‚

### ç»™ç°æœ‰é¡¹ç›®æ·»åŠ  Kotlin æ”¯æŒ

å¦‚æœæ˜¯ç°æœ‰çš„é¡¹ç›®è¦æ”¯æŒ Kotlinï¼Œåªéœ€è¦åƒä¸Šé¢è¿™æ ·æ“ä½œï¼ŒæŠŠä¸¤ä¸ª `build.gradle`  ä¸­æ ‡æ³¨çš„ä»£ç å¯¹åº”è´´åˆ°ä½ çš„é¡¹ç›®é‡Œå°±å¯ä»¥äº†ã€‚

ç¬”è€…å»ºè®®åˆšå¼€å§‹å­¦ä¹ çš„æ—¶å€™è¿˜æ˜¯æ–°å»ºä¸€ä¸ªåŸºäº Kotlin çš„é¡¹ç›®ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ç»ƒä¹ ä¸€ä¸‹ã€‚

### åˆè¯† MainActivity.kt

å‰é¢æˆ‘ä»¬æåˆ°ï¼Œå¦‚æœæ–°å»ºçš„é¡¹ç›®æ˜¯åŸºäº Kotlin çš„ï¼ŒIDE ä¼šå¸®æˆ‘ä»¬åˆ›å»ºå¥½ `MainActivity`ï¼Œå®ƒå…¶å®æ˜¯æœ‰ä¸€ä¸ª `.kt` çš„æ–‡ä»¶åç¼€åï¼ˆæ‰“å¼€çš„æ—¶å€™å¯ä»¥çœ‹åˆ°ï¼‰ã€‚

> Kotlin æ–‡ä»¶éƒ½æ˜¯ä»¥ `.kt` ç»“å°¾çš„ï¼Œå°±åƒ Java æ–‡ä»¶æ˜¯ä»¥ `.java` ç»“å°¾ã€‚

æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ª `MainActivity.kt` é‡Œåˆ°åº•æœ‰äº›ä»€ä¹ˆï¼š

```kotlin
package org.kotlinmaster
  ğŸ‘†
import android.os.Bundle
  ğŸ‘†
import androidx.appcompat.app.AppCompatActivity
                  ğŸ‘‡
class MainActivity : AppCompatActivity() {
  ğŸ‘†
       ğŸ‘‡    ğŸ‘‡                            ğŸ‘‡     ğŸ‘‡
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
    }
}
```

ä¹ä¸€çœ‹ï¼Œã€ŒğŸ‘†ã€æ ‡æ³¨çš„ `package` `import` `class` è¿™äº› Java é‡Œçš„ä¸œè¥¿ï¼ŒKotlin ä¹Ÿæœ‰ï¼›ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä»¥ã€ŒğŸ‘‡ã€æ ‡æ³¨çš„åœ¨ Java é‡Œæ˜¯æ²¡è§è¿‡çš„ã€‚

ä¸ºäº†æš‚æ—¶é¿å¼€è¿™äº›å¹²æ‰°ï¼Œæˆ‘ä»¬è‡ªå·±æ–°å»ºä¸€ä¸ªæ–‡ä»¶ã€‚

- åœ¨æ–°å»º Java Class çš„å…¥å£ä¸‹é¢å¯ä»¥çœ‹è§ä¸€ä¸ªå« ã€ŒKotlin File/Classã€ çš„é€‰é¡¹ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ–°å»º Kotlin æ–‡ä»¶çš„å…¥å£
- New Kotlin File/Class
    - Name: Sample
    - Kind: Class

åˆ›å»ºå®Œæˆåçš„ `Sample.kt`ï¼š

```kotlin
package org.kotlinmaster

class Sample {}
```

è¿™ä¸ªç±»ä»…åŒ…å« `package` å’Œ `class` ä¸¤ä¸ªå…³é”®å­—ï¼Œæˆ‘ä»¬æš‚æ—¶å…ˆçœ‹æˆå’Œ Java å·®ä¸å¤šï¼ˆå…¶å®çœŸçš„å°±æ˜¯å·®ä¸å¤šï¼‰çš„æ¦‚å¿µï¼Œè¿™æ ·å°±éƒ½æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ä¸œè¥¿äº†ã€‚

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹å­¦ä¹ åŸºç¡€è¯­æ³•å§ã€‚

---

## å˜é‡

### å˜é‡çš„å£°æ˜ä¸èµ‹å€¼

> è¿™é‡Œè®²ä¸€ä¸ª Java å’Œ Kotlin å‘½åç”±æ¥çš„å°æ’æ›²ã€‚
>
> æˆ‘ä»¬çŸ¥é“ Java å°±æ˜¯è‘—åçš„çˆªå“‡å²›ï¼Œçˆªå“‡å²›ç››äº§å’–å•¡ï¼Œæ®è¯´å°±æ˜¯ä¸€ç¾¤ç ”ç©¶å‡º Java è¯­è¨€çš„ç‰›äººä»¬åœ¨ä¸ºå®ƒå‘½åæ—¶ç”±äºé—»åˆ°é¦™æµ“çš„å’–å•¡å‘³ï¼Œé‚å†³å®šé‡‡ç”¨æ­¤åç§°ã€‚
>
> Kotlin æ¥æºäºèŠ¬å…°æ¹¾ä¸­çš„ Kotlin å²›ã€‚
>
> å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä»£ç æ®µçš„å¼€å¤´ä»¥ã€Œâ˜•ï¸ã€æ¥è¡¨ç¤º Java ä»£ç æ®µï¼Œã€ŒğŸï¸ã€æ¥è¡¨ç¤º Kotlin ä»£ç æ®µã€‚

æˆ‘ä»¬å›å¿†ä¸‹ Java é‡Œå£°æ˜ä¸€ä¸ª View ç±»å‹çš„å˜é‡çš„å†™æ³•ï¼š

```java
â˜•ï¸
View v;
```

Kotlin é‡Œå£°æ˜ä¸€ä¸ªå˜é‡çš„æ ¼å¼æ˜¯è¿™æ ·çš„ï¼š

```kotlin
ğŸï¸
var v: View
```

è¿™é‡Œæœ‰å‡ å¤„ä¸åŒï¼š

- æœ‰ä¸€ä¸ª `var` å…³é”®å­—
- ç±»å‹å’Œå˜é‡åä½ç½®äº’æ¢äº†
- ä¸­é—´æ˜¯ç”¨å†’å·åˆ†éš”çš„
- ç»“å°¾æ²¡æœ‰åˆ†å·ï¼ˆå¯¹ï¼ŒKotlin é‡Œé¢ä¸éœ€è¦åˆ†å·ï¼‰

çœ‹ä¸Šå»åªæ˜¯è¯­æ³•æ ¼å¼æœ‰äº›ä¸åŒï¼Œä½†å¦‚æœçœŸè¿™ä¹ˆå†™ï¼ŒIDE ä¼šæŠ¥é”™ï¼š

```kotlin
ğŸï¸
class Sample {
    var v: View
    // ğŸ‘†è¿™æ ·å†™ IDE ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯
    // Property must be initialized or be abstract
}
```

è¿™ä¸ªæç¤ºæ˜¯åœ¨è¯´ï¼Œå±æ€§éœ€è¦åœ¨å£°æ˜çš„åŒæ—¶åˆå§‹åŒ–ï¼Œé™¤éä½ æŠŠå®ƒå£°æ˜æˆæŠ½è±¡çš„ã€‚

- é‚£ä»€ä¹ˆæ˜¯å±æ€§å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç®€å•ç±»æ¯” Java çš„ field æ¥ç†è§£ Kotlin çš„ Propertyï¼Œè™½ç„¶å®ƒä»¬å…¶å®æœ‰äº›ä¸ä¸€æ ·ï¼ŒKotlin çš„ Property åŠŸèƒ½ä¼šå¤šäº›ã€‚

- å˜é‡å±…ç„¶è¿˜èƒ½å£°æ˜æˆæŠ½è±¡çš„ï¼Ÿå—¯ï¼Œè¿™æ˜¯ Kotlin çš„åŠŸèƒ½ï¼Œä¸è¿‡è¿™é‡Œå…ˆä¸ç†å®ƒï¼Œåé¢ä¼šè®²åˆ°ã€‚

å±æ€§ä¸ºä»€ä¹ˆè¦æ±‚åˆå§‹åŒ–å‘¢ï¼Ÿå› ä¸º Kotlin çš„å˜é‡æ˜¯æ²¡æœ‰é»˜è®¤å€¼çš„ï¼Œè¿™ç‚¹ä¸åƒ Javaï¼ŒJava çš„ field æœ‰é»˜è®¤å€¼ï¼š

```java
â˜•ï¸
String name; // ğŸ‘ˆé»˜è®¤å€¼æ˜¯ null
int count; // ğŸ‘ˆé»˜è®¤å€¼æ˜¯ 0
```

ä½†è¿™äº› Kotlin æ˜¯æ²¡æœ‰çš„ã€‚ä¸è¿‡å…¶å®ï¼ŒJava ä¹Ÿåªæ˜¯ field æœ‰é»˜è®¤å€¼ï¼Œå±€éƒ¨å˜é‡ä¹Ÿæ˜¯æ²¡æœ‰é»˜è®¤å€¼çš„ï¼Œå¦‚æœä¸ç»™å®ƒåˆå§‹å€¼ä¹Ÿä¼šæŠ¥é”™ï¼š

```java
â˜•ï¸
void run() {
    int count;
    count++; 
    // ğŸ‘†IDE æŠ¥é”™ï¼ŒVariable 'count' might not have been initialized
}
```

æ—¢ç„¶è¿™æ ·ï¼Œé‚£æˆ‘ä»¬å°±ç»™å®ƒä¸€ä¸ªé»˜è®¤å€¼ null å§ï¼Œé—æ†¾çš„æ˜¯ä½ ä¼šå‘ç°ä»ç„¶æŠ¥é”™ã€‚

```kotlin
ğŸï¸
class Sample {
    var v: View = null
    // ğŸ‘†è¿™æ ·å†™ IDE ä»ç„¶ä¼šæŠ¥é”™ï¼ŒNull can not be a value of a non-null type View
}
```

åˆä¸è¡Œï¼ŒIDE å‘Šè¯‰æˆ‘éœ€è¦èµ‹ä¸€ä¸ªéç©ºçš„å€¼ç»™å®ƒæ‰è¡Œï¼Œæ€ä¹ˆåŠï¼ŸJava çš„é‚£å¥—ä¸ç®¡ç”¨äº†ã€‚

å…¶å®è¿™éƒ½æ˜¯ Kotlin çš„ç©ºå®‰å…¨è®¾è®¡ç›¸å…³çš„å†…å®¹ã€‚å¾ˆå¤šäººå°è¯•ä¸Šæ‰‹ Kotlin ä¹‹åå¿«é€Ÿæ”¾å¼ƒï¼Œå°±æ˜¯å› ä¸ºæä¸æ˜ç™½å®ƒçš„ç©ºå®‰å…¨è®¾è®¡ï¼Œå¯¼è‡´ä»£ç å„ç§æ‹’ç»ç¼–è¯‘ï¼Œæœ€ç»ˆåªèƒ½æ”¾å¼ƒã€‚æ‰€ä»¥å’±å…ˆåˆ«æ€¥ï¼Œæˆ‘å…ˆæ¥ç»™ä½ è®²ä¸€ä¸‹ Kotlin çš„ç©ºå®‰å…¨è®¾è®¡ã€‚

### Kotlin çš„ç©ºå®‰å…¨è®¾è®¡

ç®€å•æ¥è¯´å°±æ˜¯é€šè¿‡ IDE çš„æç¤ºæ¥é¿å…è°ƒç”¨ null å¯¹è±¡ï¼Œä»è€Œé¿å… NullPointerExceptionã€‚å…¶å®åœ¨ androidx é‡Œå°±æœ‰æ”¯æŒçš„ï¼Œç”¨ä¸€ä¸ªæ³¨è§£å°±å¯ä»¥æ ‡è®°å˜é‡æ˜¯å¦å¯èƒ½ä¸ºç©ºï¼Œç„¶å IDE ä¼šå¸®åŠ©æ£€æµ‹å’Œæç¤ºï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™æ®µ Java ä»£ç ï¼š

```java
â˜•ï¸
@NonNull
View view = null;
// ğŸ‘†IDE ä¼šæç¤ºè­¦å‘Šï¼Œ'null' is assigned to a variable that is annotated with @NotNull
```

è€Œåˆ°äº† Kotlin è¿™é‡Œï¼Œå°±æœ‰äº†è¯­è¨€çº§åˆ«çš„é»˜è®¤æ”¯æŒï¼Œè€Œä¸”æç¤ºçš„çº§åˆ«ä» warning å˜æˆäº† errorï¼ˆæ‹’ç»ç¼–è¯‘ï¼‰ï¼š

```kotlin
ğŸï¸
var view: View = null
// ğŸ‘†IDE ä¼šæç¤ºé”™è¯¯ï¼ŒNull can not be a value of a non-null type View
```

åœ¨ Kotlin é‡Œé¢ï¼Œæ‰€æœ‰çš„å˜é‡é»˜è®¤éƒ½æ˜¯ä¸å…è®¸ä¸ºç©ºçš„ï¼Œå¦‚æœä½ ç»™å®ƒèµ‹å€¼ nullï¼Œå°±ä¼šæŠ¥é”™ï¼Œåƒä¸Šé¢é‚£æ ·ã€‚

è¿™ç§æœ‰ç‚¹å¼ºç¡¬çš„è¦æ±‚ï¼Œå…¶å®æ˜¯å¾ˆåˆç†çš„ï¼šæ—¢ç„¶ä½ å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œå°±æ˜¯è¦ä½¿ç”¨å®ƒå¯¹å§ï¼Ÿé‚£ä½ æŠŠå®ƒèµ‹å€¼ä¸º null å¹²å˜›ï¼Ÿè¦å°½é‡è®©å®ƒæœ‰å¯ç”¨çš„å€¼å•Šã€‚Java åœ¨è¿™æ–¹é¢å¾ˆå®½æ¾ï¼Œæˆ‘ä»¬æˆäº†ä¹ æƒ¯ï¼Œä½† Kotlin æ›´å¼ºçš„é™åˆ¶å…¶å®åœ¨ä½ ç†Ÿæ‚‰äº†ä¹‹åï¼Œæ˜¯ä¼šå‡å°‘å¾ˆå¤šè¿è¡Œæ—¶çš„é—®é¢˜çš„ã€‚

ä¸è¿‡ï¼Œè¿˜æ˜¯æœ‰äº›åœºæ™¯ï¼Œå˜é‡çš„å€¼çœŸçš„æ— æ³•ä¿è¯ç©ºä¸å¦ï¼Œæ¯”å¦‚ä½ è¦ä»æœåŠ¡å™¨å–ä¸€ä¸ª JSON æ•°æ®ï¼Œå¹¶æŠŠå®ƒè§£ææˆä¸€ä¸ª User å¯¹è±¡ï¼š

```kotlin
ğŸï¸
class User {
    var name: String = null // ğŸ‘ˆè¿™æ ·å†™ä¼šæŠ¥é”™ï¼Œä½†è¯¥å˜é‡æ— æ³•ä¿è¯ç©ºä¸å¦
}
```

è¿™ä¸ªæ—¶å€™ï¼Œç©ºå€¼å°±æ˜¯æœ‰æ„ä¹‰çš„ã€‚å¯¹äºè¿™äº›å¯ä»¥ä¸ºç©ºå€¼çš„å˜é‡ï¼Œä½ å¯ä»¥åœ¨ç±»å‹å³è¾¹åŠ ä¸€ä¸ª `?` å·ï¼Œè§£é™¤å®ƒçš„éç©ºé™åˆ¶ï¼š

```kotlin
ğŸï¸
class User {
    var name: String? = null
}
```

åŠ äº†é—®å·ä¹‹åï¼Œä¸€ä¸ª Kotlin å˜é‡å°±åƒ Java å˜é‡ä¸€æ ·æ²¡æœ‰éç©ºçš„é™åˆ¶ï¼Œè‡ªç”±è‡ªåœ¨äº†ã€‚

ä½ é™¤äº†åœ¨åˆå§‹åŒ–çš„æ—¶å€™å¯ä»¥ç»™å®ƒèµ‹å€¼ä¸ºç©ºå€¼ï¼Œåœ¨ä»£ç é‡Œçš„ä»»ä½•åœ°æ–¹ä¹Ÿéƒ½å¯ä»¥ï¼š

```kotlin
ğŸï¸
var name: String? = "Mike"
...
name = null // ğŸ‘ˆåŸæ¥ä¸æ˜¯ç©ºå€¼ï¼Œèµ‹å€¼ä¸ºç©ºå€¼
```

è¿™ç§ç±»å‹ä¹‹ååŠ  `?` çš„å†™æ³•ï¼Œåœ¨ Kotlin é‡Œå«**å¯ç©ºç±»å‹**ã€‚

ä¸è¿‡ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äº†å¯ç©ºç±»å‹çš„å˜é‡åï¼Œä¼šæœ‰æ–°çš„é—®é¢˜ï¼š

ç”±äºå¯¹ç©ºå¼•ç”¨çš„è°ƒç”¨ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œæ‰€ä»¥ Kotlin åœ¨å¯ç©ºå˜é‡ç›´æ¥è°ƒç”¨çš„æ—¶å€™ IDE ä¼šæŠ¥é”™ï¼š

```kotlin
ğŸï¸
var view: View? = null
view.setBackgroundColor(Color.RED)
// ğŸ‘†è¿™æ ·å†™ä¼šæŠ¥é”™ï¼ŒOnly safe (?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type View?
```

ã€Œå¯èƒ½ä¸ºç©ºã€çš„å˜é‡ï¼ŒKotlin ä¸å…è®¸ç”¨ã€‚é‚£æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å°è¯•ç”¨ä¹‹å‰æ£€æŸ¥ä¸€ä¸‹ï¼Œä½†ä¼¼ä¹ IDE ä¸æ¥å—è¿™ç§åšæ³•ï¼š

```kotlin
ğŸï¸
if (view != null) {
    view.setBackgroundColor(Color.RED)
    // ğŸ‘†è¿™æ ·å†™ä¼šæŠ¥é”™ï¼ŒSmart cast to 'View' is impossible, because 'view' is a mutable property that could have been changed by this time
} 
```

è¿™ä¸ªæŠ¥é”™çš„æ„æ€æ˜¯å³ä½¿ä½ æ£€æŸ¥äº†éç©ºä¹Ÿä¸èƒ½ä¿è¯ä¸‹é¢è°ƒç”¨çš„æ—¶å€™å°±æ˜¯éç©ºï¼Œå› ä¸ºåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œå…¶ä»–çº¿ç¨‹å¯èƒ½æŠŠå®ƒå†æ”¹æˆç©ºçš„ã€‚

é‚£ä¹ˆ Kotlin é‡Œæ˜¯è¿™ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿå®ƒç”¨çš„ä¸æ˜¯ `.` è€Œæ˜¯ `?.`ï¼š

```kotlin
ğŸï¸
view?.setBackgroundColor(Color.RED)
```

è¿™ä¸ªå†™æ³•åŒæ ·ä¼šå¯¹å˜é‡åšä¸€æ¬¡éç©ºç¡®è®¤ä¹‹åå†è°ƒç”¨æ–¹æ³•ï¼Œè¿™æ˜¯ Kotlin çš„å†™æ³•ï¼Œå¹¶ä¸”å®ƒå¯ä»¥åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Œå› æ­¤è¿™ç§å†™æ³•å«åšã€Œ**safe call**ã€ã€‚

å¦å¤–è¿˜æœ‰ä¸€ç§åŒæ„Ÿå¹å·çš„ç”¨æ³•ï¼š

```kotlin
ğŸï¸
view!!.setBackgroundColor(Color.RED)
```

æ„æ€æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæˆ‘ä¿è¯è¿™é‡Œçš„ view ä¸€å®šæ˜¯éç©ºçš„ï¼Œç¼–è¯‘å™¨ä½ ä¸è¦å¸®æˆ‘åšæ£€æŸ¥äº†ï¼Œæœ‰ä»€ä¹ˆåæœæˆ‘è‡ªå·±æ‰¿æ‹…ã€‚è¿™ç§ã€Œè‚¯å®šä¸ä¼šä¸ºç©ºã€çš„æ–­è¨€å¼çš„è°ƒç”¨å«åš ã€Œ**non-null asserted call**ã€ã€‚ä¸€æ—¦ç”¨äº†éç©ºæ–­è¨€ï¼Œå®é™…ä¸Šå’Œ Java å°±æ²¡ä»€ä¹ˆä¸¤æ ·äº†ï¼Œä½†ä¹Ÿå°±äº«å—ä¸åˆ° Kotlin çš„ç©ºå®‰å…¨è®¾è®¡å¸¦æ¥çš„å¥½å¤„ï¼ˆåœ¨ç¼–è¯‘æ—¶åšæ£€æŸ¥ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶æŠ›å¼‚å¸¸ï¼‰äº†ã€‚

ä»¥ä¸Šå°±æ˜¯ Kotlin çš„ç©ºå®‰å…¨è®¾è®¡ã€‚

ç†è§£äº†å®ƒä¹‹åå†æ¥çœ‹å˜é‡å£°æ˜ï¼Œè·Ÿ Java è™½ç„¶å®Œå…¨ä¸ä¸€æ ·ï¼Œåªæ˜¯å†™æ³•ä¸Šä¸åŒè€Œå·²ã€‚

å¾ˆå¤šäººåœ¨ä¸Šæ‰‹çš„æ—¶å€™éƒ½è¢«å˜é‡å£°æ˜ææ‡µï¼ŒåŸå› å°±æ˜¯ Kotlin çš„ç©ºå®‰å…¨è®¾è®¡æ‰€å¯¼è‡´çš„è¿™äº›æŠ¥é”™ï¼š

- å˜é‡éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œå¦‚æœä¸åˆå§‹åŒ–çš„è¯ä¼šæŠ¥é”™ï¼›
- å˜é‡é»˜è®¤éç©ºï¼Œæ‰€ä»¥åˆå§‹åŒ–èµ‹å€¼ null çš„è¯æŠ¥é”™ï¼Œä¹‹åå†æ¬¡èµ‹å€¼ä¸º null ä¹Ÿä¼šæŠ¥é”™ï¼›
- å˜é‡ç”¨ `?` è®¾ç½®ä¸ºå¯ç©ºçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ—¶å€™å› ä¸ºã€Œå¯èƒ½ä¸ºç©ºã€åˆæŠ¥é”™ã€‚

æ˜ç™½äº†ç©ºå®‰å…¨è®¾è®¡çš„åŸç†åï¼Œå°±å¾ˆå®¹æ˜“èƒ½å¤Ÿè§£å†³ä¸Šé¢çš„é—®é¢˜äº†ã€‚

å…³äºç©ºå®‰å…¨ï¼Œæœ€é‡è¦çš„æ˜¯è®°ä½ä¸€ç‚¹ï¼šæ‰€è°“ã€Œå¯ç©ºä¸å¯ç©ºã€ï¼Œå…³æ³¨çš„å…¨éƒ½æ˜¯ä½¿ç”¨çš„æ—¶å€™ï¼Œå³ã€Œè¿™ä¸ªå˜é‡åœ¨ä½¿ç”¨æ—¶æ˜¯å¦å¯èƒ½ä¸ºç©ºã€ã€‚

å¦å¤–ï¼ŒKotlin çš„è¿™ç§ç©ºå®‰å…¨è®¾è®¡åœ¨ä¸ Java çš„äº’ç›¸è°ƒç”¨ä¸Šæ˜¯å®Œå…¨å…¼å®¹çš„ï¼Œè¿™é‡Œçš„å…¼å®¹æŒ‡ï¼š

- Java é‡Œé¢çš„ @Nullable æ³¨è§£ï¼Œåœ¨ Kotlin é‡Œè°ƒç”¨æ—¶åŒæ ·éœ€è¦ä½¿ç”¨ `?.`ã€‚

    ```java
    â˜•ï¸
    @Nullable
    String name;
    ```

    ```kotlin
    ğŸï¸
    name?.length
    ```

- Java é‡Œé¢çš„ @Nullable å’Œ @NonNull æ³¨è§£ï¼Œåœ¨è½¬æ¢æˆ Kotlin åå¯¹åº”çš„å°±æ˜¯å¯ç©ºå˜é‡å’Œä¸å¯ç©ºå˜é‡ï¼Œè‡³äºæ€ä¹ˆå°† Java ä»£ç è½¬æ¢ä¸º Kotlinï¼ŒAndroid Studio ç»™æˆ‘ä»¬æä¾›äº†å¾ˆæ–¹ä¾¿çš„å·¥å…·ï¼ˆä½†å¹¶ä¸å®Œç¾ï¼‰ï¼Œåé¢ä¼šè®²ã€‚

    ```java
    â˜•ï¸
    @Nullable
    String name;
    @NonNull
    String value = "hello";
    ```

    ```kotlin
    ğŸï¸
    var name: String? = null
    var value: String = "hello"
    ```

ç©ºå®‰å…¨æˆ‘ä»¬è®²äº†è¿™ä¹ˆå¤šï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬å£°æ˜ä¸€ä¸ªå˜é‡æ˜¯ä¸ä¼šè®©å®ƒä¸ºç©ºçš„ï¼Œæ¯”å¦‚ viewï¼Œå…¶å®åœ¨å®é™…åœºæ™¯ä¸­æˆ‘ä»¬å¸Œæœ›å®ƒä¸€ç›´æ˜¯éç©ºçš„ï¼Œå¯ç©ºå¹¶æ²¡æœ‰ä¸šåŠ¡ä¸Šçš„å®é™…æ„ä¹‰ï¼Œä½¿ç”¨ `?.` å½±å“ä»£ç å¯è¯»æ€§ã€‚

ä½†å¦‚æœä½ åœ¨ `MainActivity`  é‡Œè¿™ä¹ˆå†™ï¼š

```kotlin
ğŸï¸
class MainActivity : AppCompatActivity() {
    ğŸ‘‡
    var view: View = findViewById(R.id.tvContent)
}
```

è™½ç„¶ç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†ç¨‹åºä¸€æ—¦è¿è¡Œèµ·æ¥å°± crash äº†ï¼ŒåŸå› æ˜¯ findViewById() æ˜¯åœ¨ onCreate ä¹‹åæ‰èƒ½è°ƒç”¨ã€‚

é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®æˆ‘ä»¬å¾ˆæƒ³å‘Šè¯‰ç¼–è¯‘å™¨ã€Œæˆ‘å¾ˆç¡®å®šæˆ‘ç”¨çš„æ—¶å€™ç»å¯¹ä¸ä¸ºç©ºï¼Œä½†ç¬¬ä¸€æ—¶é—´æˆ‘æ²¡æ³•ç»™å®ƒèµ‹å€¼ã€ã€‚

Kotlin ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé€‰é¡¹ï¼šå»¶è¿Ÿåˆå§‹åŒ–ã€‚

### å»¶è¿Ÿåˆå§‹åŒ–

å…·ä½“æ˜¯è¿™ä¹ˆå†™çš„ï¼š

```kotlin
ğŸï¸
lateinit var view: View
```

è¿™ä¸ª `lateinit` çš„æ„æ€æ˜¯ï¼šå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘æ²¡æ³•ç¬¬ä¸€æ—¶é—´å°±åˆå§‹åŒ–ï¼Œä½†æˆ‘è‚¯å®šä¼šåœ¨ä½¿ç”¨å®ƒä¹‹å‰å®Œæˆåˆå§‹åŒ–çš„ã€‚

å®ƒçš„ä½œç”¨å°±æ˜¯è®© IDE ä¸è¦å¯¹è¿™ä¸ªå˜é‡æ£€æŸ¥åˆå§‹åŒ–å’ŒæŠ¥é”™ã€‚æ¢å¥è¯è¯´ï¼ŒåŠ äº†è¿™ä¸ª `lateinit` å…³é”®å­—ï¼Œè¿™ä¸ªå˜é‡çš„åˆå§‹åŒ–å°±å…¨é ä½ è‡ªå·±äº†ï¼Œç¼–è¯‘å™¨ä¸å¸®ä½ æ£€æŸ¥äº†ã€‚

ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ onCreate ä¸­è¿›è¡Œåˆå§‹åŒ–äº†ï¼š

```kotlin
ğŸï¸
ğŸ‘‡
lateinit var view: View
override fun onCreate(...) {
    ...
    ğŸ‘‡
    view = findViewById(R.id.tvContent)
}
```

### ç±»å‹æ¨æ–­

Kotlin æœ‰ä¸ªå¾ˆæ–¹ä¾¿çš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœä½ åœ¨å£°æ˜çš„æ—¶å€™å°±èµ‹å€¼ï¼Œé‚£ä¸å†™å˜é‡ç±»å‹ä¹Ÿè¡Œï¼š

```kotlin
ğŸï¸
var name: String = "Mike"
ğŸ‘‡
var name = "Mike"
```

è¿™ä¸ªç‰¹æ€§å«åšã€Œç±»å‹æ¨æ–­ã€ï¼Œå®ƒè·ŸåŠ¨æ€ç±»å‹æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ä¸èƒ½åƒä½¿ç”¨ Groovy æˆ–è€… JavaScript é‚£æ ·ä½¿ç”¨åœ¨ Kotlin é‡Œè¿™ä¹ˆå†™ï¼š

```kotlin
ğŸï¸
var name = "Mike"
name = 1
// ğŸ‘†ä¼šæŠ¥é”™ï¼ŒThe integer literal does not conform to the expected type String
```

```groovy
// Groovy
def a = "haha"
a = 1
// ğŸ‘†è¿™ç§å…ˆèµ‹å€¼å­—ç¬¦ä¸²å†èµ‹å€¼æ•°å­—çš„æ–¹å¼åœ¨ Groovy é‡Œæ˜¯å¯ä»¥çš„
```

ã€ŒåŠ¨æ€ç±»å‹ã€æ˜¯æŒ‡å˜é‡çš„ç±»å‹åœ¨è¿è¡Œæ—¶å¯ä»¥æ”¹å˜ï¼›è€Œã€Œç±»å‹æ¨æ–­ã€æ˜¯ä½ åœ¨ä»£ç é‡Œä¸ç”¨å†™å˜é‡ç±»å‹ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šå¸®ä½ è¡¥ä¸Šã€‚å› æ­¤ï¼ŒKotlin æ˜¯ä¸€é—¨é™æ€è¯­è¨€ã€‚

é™¤äº†å˜é‡èµ‹å€¼è¿™ä¸ªåœºæ™¯ï¼Œç±»å‹æ¨æ–­çš„å…¶ä»–åœºæ™¯æˆ‘ä»¬ä¹‹åä¹Ÿä¼šé‡åˆ°ã€‚

### val å’Œ var

å£°æ˜å˜é‡çš„æ–¹å¼ä¹Ÿä¸æ­¢ var ä¸€ç§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ valï¼š

```kotlin
ğŸï¸
val size = 18
```

val æ˜¯ Kotlin åœ¨ Java çš„ã€Œå˜é‡ã€ç±»å‹ä¹‹å¤–ï¼Œåˆå¢åŠ çš„ä¸€ç§å˜é‡ç±»å‹ï¼šåªè¯»å˜é‡ã€‚å®ƒåªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼Œä¸èƒ½ä¿®æ”¹ã€‚è€Œ var æ˜¯ä¸€ç§å¯è¯»å¯å†™å˜é‡ã€‚

> var æ˜¯ variable çš„ç¼©å†™ï¼Œval æ˜¯ value çš„ç¼©å†™ã€‚

val å’Œ Java ä¸­çš„ final ç±»ä¼¼ï¼š

```java
â˜•ï¸
final int size = 18;
```

ä¸è¿‡å…¶å®å®ƒä»¬è¿˜æ˜¯æœ‰äº›ä¸ä¸€æ ·çš„ï¼Œè¿™ä¸ªæˆ‘ä»¬ä¹‹åå†è®²ã€‚æ€»ä¹‹ç›´æ¥è¿›è¡Œé‡æ–°èµ‹å€¼æ˜¯ä¸è¡Œçš„ã€‚

### å¯è§æ€§

çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¼¼ä¹éƒ½æ²¡æœ‰åœ¨ Kotlin é‡Œçœ‹åˆ°ç±»ä¼¼ Java é‡Œçš„ publicã€protectedã€private è¿™äº›è¡¨ç¤ºå˜é‡å¯è§æ€§çš„ä¿®é¥°ç¬¦ï¼Œå› ä¸ºåœ¨ Kotlin é‡Œå˜é‡é»˜è®¤å°±æ˜¯ **public** çš„ï¼Œè€Œå¯¹äºå…¶ä»–å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œæˆ‘ä»¬ä¹‹åä¼šè®²ï¼Œè¿™é‡Œå…ˆä¸ç”¨å…³å¿ƒã€‚

è‡³æ­¤ï¼Œæˆ‘ç›¸ä¿¡ä½ å¯¹å˜é‡è¿™éƒ¨åˆ†å·²ç»äº†è§£å¾—å·®ä¸å¤šäº†ï¼Œå¯ä»¥æ ¹æ®å‰é¢çš„ä¾‹å­åŠ¨æ‰‹å°è¯•å°è¯•ã€‚

## å‡½æ•°

Kotlin é™¤äº†å˜é‡å£°æ˜å¤–ï¼Œå‡½æ•°çš„å£°æ˜æ–¹å¼ä¹Ÿå’Œ Java çš„æ–¹æ³•ä¸ä¸€æ ·ã€‚Java çš„æ–¹æ³•ï¼ˆmethodï¼‰åœ¨ Kotlin é‡Œå«å‡½æ•°ï¼ˆfunctionï¼‰ï¼Œå…¶å®æ²¡å•¥åŒºåˆ«ï¼Œæˆ–è€…è¯´å…¶ä¸­çš„åŒºåˆ«æˆ‘ä»¬å¯ä»¥å¿½ç•¥æ‰ã€‚å¯¹ä»»ä½•ç¼–ç¨‹è¯­è¨€æ¥è®²ï¼Œå˜é‡å°±æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œå‡½æ•°å°±æ˜¯ç”¨æ¥å¤„ç†æ•°æ®ã€‚

### å‡½æ•°çš„å£°æ˜

æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Java é‡Œçš„æ–¹æ³•æ˜¯æ€ä¹ˆå†™çš„ï¼š

```java
â˜•ï¸
Food cook(String name) {
    ...
}
```

è€Œåˆ°äº† Kotlinï¼Œå‡½æ•°çš„å£°æ˜æ˜¯è¿™æ ·ï¼š

```kotlin
ğŸï¸
ğŸ‘‡                      ğŸ‘‡
fun cook(name: String): Food {
    ...
}
```

- ä»¥ fun å…³é”®å­—å¼€å¤´
- è¿”å›å€¼å†™åœ¨äº†å‡½æ•°å’Œå‚æ•°åé¢

é‚£å¦‚æœæ²¡æœ‰è¿”å›å€¼è¯¥æ€ä¹ˆåŠï¼ŸJava é‡Œæ˜¯è¿”å› voidï¼š

```java
â˜•ï¸
void main() {
   ...
}
```

Kotlin é‡Œæ˜¯è¿”å› Unitï¼Œå¹¶ä¸”å¯ä»¥çœç•¥ï¼š

```kotlin
ğŸï¸
            ğŸ‘‡
fun main(): Unit {}
// Unit è¿”å›ç±»å‹å¯ä»¥çœç•¥
fun main() {}
```

å‡½æ•°å‚æ•°ä¹Ÿå¯ä»¥æœ‰å¯ç©ºçš„æ§åˆ¶ï¼Œæ ¹æ®å‰é¢è¯´çš„ç©ºå®‰å…¨è®¾è®¡ï¼Œåœ¨ä¼ é€’æ—¶éœ€è¦æ³¨æ„ï¼š

```kotlin
ğŸï¸
// ğŸ‘‡å¯ç©ºå˜é‡ä¼ ç»™ä¸å¯ç©ºå‚æ•°ï¼ŒæŠ¥é”™
var myName : String? = "rengwuxian"
fun cook(name: String) : Food {}
cook(myName)
  
// ğŸ‘‡å¯ç©ºå˜é‡ä¼ ç»™å¯ç©ºå‚æ•°ï¼Œæ­£å¸¸è¿è¡Œ
var myName : String? = "rengwuxian"
fun cook(name: String?) : Food {}
cook(myName)

// ğŸ‘‡ä¸å¯ç©ºå˜é‡ä¼ ç»™ä¸å¯ç©ºå‚æ•°ï¼Œæ­£å¸¸è¿è¡Œ
var myName : String = "rengwuxian"
fun cook(name: String) : Food {}
cook(myName)
```

### å¯è§æ€§

å‡½æ•°å¦‚æœä¸åŠ å¯è§æ€§ä¿®é¥°ç¬¦çš„è¯ï¼Œé»˜è®¤çš„å¯è§èŒƒå›´å’Œå˜é‡ä¸€æ ·ä¹Ÿæ˜¯ public çš„ï¼Œä½†æœ‰ä¸€ç§æƒ…å†µä¾‹å¤–ï¼Œè¿™é‡Œç®€å•æä¸€ä¸‹ï¼Œå°±æ˜¯é‡åˆ°äº† `override` å…³é”®å­—çš„æ—¶å€™ï¼Œä¸‹é¢ä¼šè®²åˆ°ã€‚

### å±æ€§çš„ getter/setter å‡½æ•°

æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Java é‡Œé¢çš„ field ç»å¸¸ä¼šå¸¦æœ‰ getter/setter å‡½æ•°ï¼š

```java
â˜•ï¸
public class User {
    String name;
    public String getName() {
        return this.name;
    }
    public void setName(String name) {
        this.name = name;
    }
}
```

å®ƒä»¬çš„ä½œç”¨å°±æ˜¯å¯ä»¥è‡ªå®šä¹‰å‡½æ•°å†…éƒ¨å®ç°æ¥è¾¾åˆ°ã€Œé’©å­ã€çš„æ•ˆæœï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§ï¼š

```java
â˜•ï¸
public class User {
    String name;
    public String getName() {
        return this.name + " nb";
    }
    public void setName(String name) {
        this.name = "Cute " + name;
    }
}
```

åœ¨ Kotlin é‡Œï¼Œè¿™ç§ getter / setter æ˜¯æ€ä¹ˆè¿ä½œçš„å‘¢ï¼Ÿ

```kotlin
ğŸï¸
class User {
    var name = "Mike"
    fun run() {
        name = "Mary"
        // ğŸ‘†çš„å†™æ³•å®é™…ä¸Šæ˜¯ğŸ‘‡è¿™ä¹ˆè°ƒç”¨çš„
        // setName("Mary")
        // å»ºè®®è‡ªå·±è¯•è¯•ï¼ŒIDE çš„ä»£ç è¡¥å…¨åŠŸèƒ½ä¼šåœ¨ä½ æ‰“å‡º setn çš„æ—¶å€™ç›´æ¥æç¤º name è€Œä¸æ˜¯ setName
        
        println(name)
        // ğŸ‘†çš„å†™æ³•å®é™…ä¸Šæ˜¯ğŸ‘‡è¿™ä¹ˆè°ƒç”¨çš„
        // print(getName())
        // IDE çš„ä»£ç è¡¥å…¨åŠŸèƒ½ä¼šåœ¨ä½ æ‰“å‡º getn çš„æ—¶å€™ç›´æ¥æç¤º name è€Œä¸æ˜¯ getName
    }
}
```

é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ¥æ“ä½œå‰é¢æåˆ°çš„ã€Œé’©å­ã€å‘¢ï¼Ÿçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š

```kotlin
ğŸï¸
class User {
    var name = "Mike"
        ğŸ‘‡
        get() {
            return field + " nb"
        }
        ğŸ‘‡   ğŸ‘‡ 
        set(value) {
            field = "Cute " + value
        }
}
```

æ ¼å¼ä¸Šå’Œ Java æœ‰ä¸€äº›åŒºåˆ«ï¼š

- getter / setter å‡½æ•°æœ‰äº†ä¸“é—¨çš„å…³é”®å­— get å’Œ set
- getter / setter å‡½æ•°ä½äº var æ‰€å£°æ˜çš„å˜é‡ä¸‹é¢
- setter å‡½æ•°å‚æ•°æ˜¯ value

é™¤æ­¤ä¹‹å¤–è¿˜å¤šäº†ä¸€ä¸ªå« field çš„ä¸œè¥¿ï¼Œå®ƒå’Œ Java é‡Œé¢çš„ field å®Œå…¨ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œè¿™ä¸ªä¸œè¥¿å«åšã€Œ**Backing Fields**ã€ï¼Œä¸­æ–‡ç¿»è¯‘æ˜¯**å¹•åå­—æ®µ**æˆ–**åå¤‡å­—æ®µ**ï¼ˆé©¬äº‘èƒŒåçš„å¥³äººğŸ˜ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç±»æ¯” Java ä»£ç ä¸­çš„ `this.name` æ¥ç†è§£å®ƒï¼Œç›¸å½“äºæ¯ä¸€ä¸ª var å†…éƒ¨çš„ä¸€ä¸ªå˜é‡ã€‚

æˆ‘ä»¬å‰é¢è®²è¿‡ val æ˜¯åªè¯»å˜é‡ï¼Œåªè¯»çš„æ„æ€å°±æ˜¯è¯´ val å£°æ˜çš„å˜é‡ä¸èƒ½è¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½è°ƒç”¨ setter å‡½æ•°ï¼Œå› æ­¤ï¼Œval å£°æ˜çš„å˜é‡æ˜¯ä¸èƒ½é‡å†™ setter å‡½æ•°çš„ï¼Œä½†å®ƒå¯ä»¥é‡å†™ getter å‡½æ•°ï¼š

```kotlin
ğŸï¸
val name = "Mike"
    get() {
        return field + " nb"
    }
```

val æ‰€å£°æ˜çš„åªè¯»å˜é‡ï¼Œåœ¨å–å€¼çš„æ—¶å€™ä»ç„¶å¯èƒ½è¢«ä¿®æ”¹ï¼Œè¿™ä¹Ÿæ˜¯å’Œ Java é‡Œçš„ final çš„ä¸åŒä¹‹å¤„ã€‚

å…³äºã€Œé’©å­ã€çš„ä½œç”¨ï¼Œé™¤äº†ä¿®æ”¹å–å€¼å’Œèµ‹å€¼ï¼Œä¹Ÿå¯ä»¥åŠ ä¸€äº›è‡ªå·±çš„é€»è¾‘ï¼Œå°±åƒæˆ‘ä»¬åœ¨ Activity çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°é‡Œåšçš„äº‹æƒ…ä¸€æ ·ã€‚

## ç±»å‹

è®²å®Œäº†å˜é‡å’Œå‡½æ•°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç³»ç»Ÿæ€§åœ°å­¦ä¹ ä¸‹ Kotlin é‡Œçš„ç±»å‹ã€‚

### åŸºæœ¬ç±»å‹

åœ¨ Kotlin ä¸­ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ï¼ŒKotlin ä¸­ä½¿ç”¨çš„åŸºæœ¬ç±»å‹æœ‰ï¼šæ•°å­—ã€å­—ç¬¦ã€å¸ƒå°”å€¼ã€æ•°ç»„ä¸å­—ç¬¦ä¸²ã€‚

```kotlin
ğŸï¸
var number: Int = 1 // ğŸ‘ˆè¿˜æœ‰ Double Float Long Short Byte éƒ½ç±»ä¼¼
var c: Char = 'c'
var b: Boolean = true
var array: IntArray = intArrayOf(1, 2) // ğŸ‘ˆç±»ä¼¼çš„è¿˜æœ‰ FloatArray DoubleArray CharArray ç­‰ï¼ŒintArrayOf æ˜¯ Kotlin çš„ built-in å‡½æ•°
var str: String = "string"
```

è¿™é‡Œæœ‰ä¸¤ä¸ªåœ°æ–¹å’Œ Java ä¸å¤ªä¸€æ ·ï¼š

- Kotlin é‡Œçš„ Int å’Œ Java é‡Œçš„ int ä»¥åŠ Integer ä¸åŒï¼Œä¸»è¦æ˜¯åœ¨è£…ç®±æ–¹é¢ä¸åŒã€‚

    Java é‡Œçš„ int æ˜¯ unbox çš„ï¼Œè€Œ Integer æ˜¯ box çš„ï¼š

    ```java
    â˜•ï¸
    int a = 1;
    Integer b = 2; // ğŸ‘ˆä¼šè¢«è‡ªåŠ¨è£…ç®± autoboxing
    ```

    Kotlin é‡Œï¼ŒInt æ˜¯å¦è£…ç®±æ ¹æ®åœºåˆæ¥å®šï¼š

    ```kotlin
    ğŸï¸
    var a: Int = 1 // unbox
    var b: Int? = 2 // box
    var list: List<Int> = listOf(1, 2) // box
    ```
    Kotlin åœ¨è¯­è¨€å±‚é¢ç®€åŒ–äº† Java ä¸­çš„ int å’Œ Integerï¼Œä½†æ˜¯æˆ‘ä»¬å¯¹æ˜¯å¦è£…ç®±çš„åœºæ™¯è¿˜æ˜¯è¦æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå› ä¸ºè¿™ä¸ªç‰µæ¶‰åˆ°ç¨‹åºè¿è¡Œæ—¶çš„æ€§èƒ½å¼€é”€ã€‚

    å› æ­¤åœ¨æ—¥å¸¸çš„ä½¿ç”¨ä¸­ï¼Œå¯¹äº Int è¿™æ ·çš„åŸºæœ¬ç±»å‹ï¼Œå°½é‡ç”¨ä¸å¯ç©ºå˜é‡ã€‚

- Java ä¸­çš„æ•°ç»„å’Œ Kotlin ä¸­çš„æ•°ç»„çš„å†™æ³•ä¹Ÿæœ‰åŒºåˆ«ï¼š

    ```java
    â˜•ï¸
    int[] array = new int[] {1, 2};
    ```

    è€Œåœ¨ Kotlin é‡Œï¼Œä¸Šé¢çš„å†™æ³•æ˜¯è¿™æ ·çš„ï¼š

    ```kotlin
    ğŸï¸
    var array: IntArray = intArrayOf(1, 2)
    // ğŸ‘†è¿™ç§ä¹Ÿæ˜¯ unbox çš„
    ```

ç®€å•æ¥è¯´ï¼ŒåŸå…ˆåœ¨ Java é‡Œçš„åŸºæœ¬ç±»å‹ï¼Œç±»æ¯”åˆ° Kotlin é‡Œé¢ï¼Œæ¡ä»¶æ»¡è¶³å¦‚ä¸‹ä¹‹ä¸€å°±ä¸è£…ç®±ï¼š

- ä¸å¯ç©ºç±»å‹ã€‚

- ä½¿ç”¨ IntArrayã€FloatArray ç­‰ã€‚

### ç±»å’Œå¯¹è±¡

ç°åœ¨å¯ä»¥æ¥çœ‹çœ‹æˆ‘ä»¬çš„è€æœ‹å‹ `MainActivity` äº†ï¼Œé‡æ–°è®¤è¯†ä¸‹å®ƒï¼š

```kotlin
ğŸï¸
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        ...
    }
}
```

æˆ‘ä»¬å¯ä»¥å¯¹æ¯” Java çš„ä»£ç æ¥çœ‹æœ‰å“ªäº›ä¸åŒï¼š

```java
â˜•ï¸
public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        ...
    }
}
```

- é¦–å…ˆæ˜¯ç±»çš„å¯è§æ€§ï¼ŒJava ä¸­çš„ public åœ¨ Kotlin ä¸­å¯ä»¥çœç•¥ï¼ŒKotlin çš„ç±»é»˜è®¤æ˜¯ public çš„ã€‚

- ç±»çš„ç»§æ‰¿çš„å†™æ³•ï¼ŒJava é‡Œç”¨çš„æ˜¯ `extends`ï¼Œè€Œåœ¨ Kotlin é‡Œä½¿ç”¨ `:`ï¼Œä½†å…¶å® `:` ä¸ä»…å¯ä»¥è¡¨ç¤ºç»§æ‰¿ï¼Œè¿˜å¯ä»¥è¡¨ç¤º Java ä¸­çš„ `implement`ã€‚

    ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª interface å« Impleï¼š

    ```kotlin
    ğŸï¸
    interface Impl {}
    ```

    > Kotlin é‡Œå®šä¹‰ä¸€ä¸ª interface å’Œ Java æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚

    ```java
    â˜•ï¸
    public class Main2Activity extends AppCompatActivity implements Impl { }
    ```

    ```kotlin
    ğŸï¸
    class MainActivity : AppCompatActivity(), Impl {}
    ```

- æ„é€ æ–¹æ³•çš„å†™æ³•ä¸åŒã€‚

    - Java é‡Œçœç•¥äº†é»˜è®¤çš„æ„é€ å‡½æ•°ï¼š

    - ```java
        â˜•ï¸
        public class MainActivity extends AppCompatActivity {
            // ğŸ‘‡é»˜è®¤æ„é€ å‡½æ•°
            public MainActivity() {
            }
        }
        ```

    - Kotlin é‡Œæˆ‘ä»¬æ³¨æ„åˆ°  AppCompatActivity åé¢çš„ `()`ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯ä¸€ç§çœç•¥çš„å†™æ³•ï¼Œç­‰ä»·äºï¼š

    - ```kotlin
        ğŸï¸                   
        class MainActivity constructor() : AppCompatActivity() {
                                ğŸ‘†
        }
        ```

        ä¸è¿‡å…¶å®æ›´åƒ Java çš„å†™æ³•æ˜¯è¿™æ ·çš„ï¼š

        ```kotlin
        ğŸï¸
        // ğŸ‘‡æ³¨æ„è¿™é‡Œ AppCompatActivity åé¢æ²¡æœ‰ '()'
        class MainActivity : AppCompatActivity {
            constructor() {
            }
        }
        ```

        Kotlin æŠŠæ„é€ å‡½æ•°å•ç‹¬ç”¨äº†ä¸€ä¸ª `constructor` å…³é”®å­—æ¥å’Œå…¶ä»–çš„ `fun` åšåŒºåˆ†ã€‚
    
- override çš„ä¸åŒ

    - Java é‡Œé¢ `@Override` æ˜¯æ³¨è§£çš„å½¢å¼ã€‚
    - Kotlin é‡Œçš„ `override` å˜æˆäº†å…³é”®å­—ã€‚
    - Kotlin çœç•¥äº† `protected` å…³é”®å­—ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒKotlin é‡Œçš„ `override` å‡½æ•°çš„å¯è§æ€§æ˜¯ç»§æ‰¿è‡ªçˆ¶ç±»çš„ã€‚

é™¤äº†ä»¥ä¸Šè¿™äº›æ˜æ˜¾çš„ä¸åŒä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¸åŒç‚¹ä»ä¸Šé¢çš„ä»£ç é‡Œçœ‹ä¸å‡ºæ¥ï¼Œä½†å½“ä½ å†™ä¸€ä¸ªç±»å»ç»§æ‰¿ `MainActivity` æ—¶å°±ä¼šå‘ç°ï¼š

- Kotlin é‡Œçš„ MainActivity æ— æ³•ç»§æ‰¿ï¼š

    ```kotlin
    ğŸï¸
    // ğŸ‘‡å†™æ³•ä¼šæŠ¥é”™ï¼ŒThis type is final, so it cannot be inherited from
    class NewActivity: MainActivity() {
    }
    ```

    åŸå› æ˜¯ Kotlin é‡Œçš„ç±»é»˜è®¤æ˜¯ final çš„ï¼Œè€Œ Java é‡Œåªæœ‰åŠ äº† `final ` å…³é”®å­—çš„ç±»æ‰æ˜¯ final çš„ã€‚

    é‚£ä¹ˆæœ‰ä»€ä¹ˆåŠæ³•è§£é™¤ final é™åˆ¶ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `open` æ¥åšè¿™ä»¶äº‹ï¼š

    ```kotlin
    ğŸï¸
    open class MainActivity : AppCompatActivity() {}
    ```

    è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§æ‰¿äº†ã€‚

    ```kotlin
    ğŸï¸
    class NewActivity: MainActivity() {}
    ```

    ä½†æ˜¯è¦æ³¨æ„ï¼Œæ­¤æ—¶ NewActivity ä»ç„¶æ˜¯ final çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`open` æ²¡æœ‰çˆ¶ç±»åˆ°å­ç±»çš„é—ä¼ æ€§ã€‚

    è€Œåˆšæ‰è¯´åˆ°çš„ `override` æ˜¯æœ‰é—ä¼ æ€§çš„ï¼š

    ```kotlin
    ğŸï¸
    class NewActivity : MainActivity() {
        // ğŸ‘‡onCreate ä»ç„¶æ˜¯ override çš„
        override fun onCreate(savedInstanceState: Bundle?) {
            ...
        }
    }
    ```

    å¦‚æœè¦å…³é—­ `override` çš„é—ä¼ æ€§ï¼Œåªéœ€è¦è¿™æ ·å³å¯ï¼š

    ```kotlin
    ğŸï¸
    open class MainActivity : AppCompatActivity() {
        // ğŸ‘‡åŠ äº† final å…³é”®å­—ï¼Œä½œç”¨å’Œ Java é‡Œé¢ä¸€æ ·ï¼Œå…³é—­äº† override çš„é—ä¼ æ€§
        final override fun onCreate(savedInstanceState: Bundle?) {
            ...
        }
    }
    ```

- Kotlin é‡Œé™¤äº†æ–°å¢äº† `open` å…³é”®å­—ä¹‹å¤–ï¼Œä¹Ÿæœ‰å’Œ Java ä¸€æ ·çš„ `abstract` å…³é”®å­—ï¼Œè¿™ä¿©å…³é”®å­—çš„åŒºåˆ«å°±æ˜¯ `abstract` å…³é”®å­—ä¿®é¥°çš„ç±»æ— æ³•ç›´æ¥å®ä¾‹åŒ–ï¼Œå¹¶ä¸”é€šå¸¸æ¥è¯´ä¼šå’Œ `abstract` ä¿®é¥°çš„å‡½æ•°ä¸€èµ·å‡ºç°ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰è¿™ä¸ª `abstract` å‡½æ•°ã€‚

    ```kotlin
    ğŸï¸
    abstract class MainActivity : AppCompatActivity() {
        abstract fun test()
    }
    ```

    ä½†æ˜¯å­ç±»å¦‚æœè¦å®ä¾‹åŒ–ï¼Œè¿˜æ˜¯éœ€è¦å®ç°è¿™ä¸ª abstract å‡½æ•°çš„ï¼š

    ```kotlin
    ğŸï¸
    class NewActivity : MainActivity() {
        override fun test() {}
    }
    ```

å½“æˆ‘ä»¬å£°æ˜å¥½ä¸€ä¸ªç±»ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ä¾‹åŒ–å®ƒäº†ï¼Œå®ä¾‹åŒ–åœ¨ Java ä¸­ä½¿ç”¨ `new` å…³é”®å­—ï¼š

```java
â˜•ï¸
void main() {
    Activity activity = new NewActivity(); 
}
```

è€Œåœ¨ Kotlin ä¸­ï¼Œå®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡æ›´åŠ ç®€å•ï¼Œæ²¡æœ‰ `new` å…³é”®å­—ï¼š

```kotlin
ğŸï¸
fun main() {
    var activity: Activity = NewActivity()
}
```

é€šè¿‡ `MainActivity` çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº† Java å’Œ Kotlin ä¸­å…³äºç±»çš„å£°æ˜ä¸»è¦å…³æ³¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

- ç±»çš„å¯è§æ€§å’Œå¼€æ”¾æ€§
- æ„é€ æ–¹æ³•
- ç»§æ‰¿
- override å‡½æ•°

### ç±»å‹çš„åˆ¤æ–­å’Œå¼ºè½¬

åˆšæ‰è®²çš„å®ä¾‹åŒ–çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯æŠŠå­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»çš„å˜é‡ï¼Œè¿™ä¸ªæ¦‚å¿µåœ¨ Java é‡Œå«å¤šæ€ï¼ŒKotlin ä¹Ÿæœ‰è¿™ä¸ªç‰¹æ€§ï¼Œä½†åœ¨å®é™…å·¥ä½œä¸­æˆ‘ä»¬å¾ˆå¯èƒ½ä¼šé‡åˆ°éœ€è¦ä½¿ç”¨å­ç±»æ‰æœ‰çš„å‡½æ•°ã€‚

æ¯”å¦‚æˆ‘ä»¬å…ˆåœ¨å­ç±»ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼š

```kotlin
ğŸï¸
class NewActivity : MainActivity() {
    fun action() {}
}
```

é‚£ä¹ˆæ¥ä¸‹æ¥è¿™ä¹ˆå†™æ˜¯æ— æ³•è°ƒç”¨è¯¥å‡½æ•°çš„ï¼š

```kotlin
ğŸï¸
fun main() {
    var activity: Activity = NewActivity()
    // ğŸ‘†activity æ˜¯æ— æ³•è°ƒç”¨ NewActivity çš„ action æ–¹æ³•çš„
}
```

åœ¨ Java é‡Œï¼Œéœ€è¦å…ˆä½¿ç”¨ `instanceof` å…³é”®å­—åˆ¤æ–­ç±»å‹ï¼Œå†é€šè¿‡å¼ºè½¬æ¥è°ƒç”¨ï¼š

```java
â˜•ï¸
void main() {
    Activity activity = new NewActivity();
    if (activity instanceof NewActivity) {
        ((NewActivity) activity).action();
    }
}
```

Kotlin é‡ŒåŒæ ·æœ‰ç±»ä¼¼è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ `is` å…³é”®å­—è¿›è¡Œã€Œç±»å‹åˆ¤æ–­ã€ï¼Œå¹¶ä¸”å› ä¸ºç¼–è¯‘å™¨èƒ½å¤Ÿè¿›è¡Œç±»å‹æ¨æ–­ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬çœç•¥å¼ºè½¬çš„å†™æ³•ï¼š

```kotlin
ğŸï¸
fun main() {
    var activity: Activity = NewActivity()
    if (activity is NewActivity) {
        // ğŸ‘‡çš„å¼ºè½¬ç”±äºç±»å‹æ¨æ–­è¢«çœç•¥äº†
        activity.action()
    }
}
```

é‚£ä¹ˆèƒ½ä¸èƒ½ä¸è¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œç›´æ¥è¿›è¡Œå¼ºè½¬è°ƒç”¨å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨ `as` å…³é”®å­—ï¼š

```kotlin
ğŸï¸
fun main() {
    var activity: Activity = NewActivity()
    (activity as NewActivity).action()
}
```

è¿™ç§å†™æ³•å¦‚æœå¼ºè½¬ç±»å‹æ“ä½œæ˜¯æ­£ç¡®çš„å½“ç„¶æ²¡é—®é¢˜ï¼Œä½†å¦‚æœå¼ºè½¬æˆä¸€ä¸ªé”™è¯¯çš„ç±»å‹ï¼Œç¨‹åºå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚

æˆ‘ä»¬æ›´å¸Œæœ›èƒ½è¿›è¡Œå®‰å…¨çš„å¼ºè½¬ï¼Œå¯ä»¥æ›´ä¼˜é›…åœ°å¤„ç†å¼ºè½¬å‡ºé”™çš„æƒ…å†µã€‚

è¿™ä¸€ç‚¹ï¼ŒKotlin åœ¨è®¾è®¡ä¸Šè‡ªç„¶ä¹Ÿè€ƒè™‘åˆ°äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `as?` æ¥è§£å†³ï¼š

```kotlin
ğŸï¸
fun main() {
    var activity: Activity = NewActivity()
    // ğŸ‘‡'(activity as? NewActivity)' ä¹‹åæ˜¯ä¸€ä¸ªå¯ç©ºç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä½¿ç”¨ '?.' æ¥è°ƒç”¨
    (activity as? NewActivity)?.action()
}
```

å®ƒçš„æ„æ€å°±æ˜¯è¯´å¦‚æœå¼ºè½¬æˆåŠŸå°±æ‰§è¡Œä¹‹åçš„è°ƒç”¨ï¼Œå¦‚æœå¼ºè½¬ä¸æˆåŠŸå°±ä¸æ‰§è¡Œã€‚

---

å¥½äº†ï¼Œå…³äº Kotlin çš„å˜é‡ã€å‡½æ•°å’Œç±»å‹çš„å†…å®¹å°±è®²åˆ°è¿™é‡Œï¼Œç»™ä½ ç•™ 2 é“æ€è€ƒé¢˜å§ï¼š

1. å­ç±»é‡å†™çˆ¶ç±»çš„ `override` å‡½æ•°ï¼Œèƒ½å¦ä¿®æ”¹å®ƒçš„å¯è§æ€§ï¼Ÿ

2. ä»¥ä¸‹çš„å†™æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

    ```kotlin
    ğŸï¸
    activity as? NewActivity
    activity as NewActivity?
    activity as? NewActivity?
    ```

## ç»ƒä¹ é¢˜

1. ä½¿ç”¨ Android Studio åˆ›å»ºä¸€ä¸ªåŸºäº Kotlin çš„æ–°é¡¹ç›®ï¼ˆEmpty Activityï¼‰ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§ï¼ˆç±»å‹æ˜¯éç©ºçš„ `View`ï¼‰ï¼Œåœ¨ onCreate å‡½æ•°ä¸­åˆå§‹åŒ–å®ƒã€‚
2. å£°æ˜ä¸€ä¸ªå‚æ•°ä¸º `View?` ç±»å‹çš„æ–¹æ³•ï¼Œä¼ å…¥åˆšæ‰çš„ `View` ç±»å‹å±æ€§ï¼Œå¹¶åœ¨è¯¥æ–¹æ³•ä¸­æ‰“å°å‡ºè¯¥ `View?` çš„ idã€‚