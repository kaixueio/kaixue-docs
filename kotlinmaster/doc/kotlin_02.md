## Kotlin é‡Œé‚£äº›ã€Œä¸æ˜¯é‚£ä¹ˆå†™çš„ã€

Kotlin ä½œä¸ºä¸€é—¨å¹´è½»çš„é«˜çº§å¼€å‘è¯­è¨€ï¼Œç›¸æ¯”ä¸Šä¸ªä¸–çºªçš„è€å¤§å“¥ Javaï¼Œåœ¨ä»£ç çš„ç®€æ´æ€§å’Œå¯ç»´æŠ¤æ€§ä¸Šéƒ½æœ‰ä¸å°‘çš„æé«˜ã€‚Java ä¸­å››äº”è¡Œçš„ä»£ç é€»è¾‘ï¼ŒKotlin å¯èƒ½ä¸€è¡Œå°±æå®šäº†ï¼Œè¿˜æœ‰ä¸€äº›å®¹æ˜“æ··æ·†å‡ºé”™çš„é€»è¾‘ï¼ŒKotlin ç»™å‡ºäº†æ›´åŠ æ¸…æ™°åˆç†çš„æ§åˆ¶ã€‚è¿™ç¯‡æ–‡ç« å°±è®©æˆ‘ä»¬å¯¹æ¯” Java æ¥çœ‹çœ‹ Kotlin ä¸­ã€Œä¸æ˜¯é‚£ä¹ˆå†™çš„ã€åœ°æ–¹ã€‚

### Constructor

ä¸Šä¸€ç¯‡ä¸­ç®€å•ä»‹ç»äº† Kotlin çš„æ„é€ å™¨ï¼Œè¿™ä¸€èŠ‚å…·ä½“çœ‹çœ‹ Kotlin çš„æ„é€ å™¨å’Œ Java æœ‰ä»€ä¹ˆä¸ä¸€æ ·ã€‚é¦–å…ˆçœ‹ä¸¤æ®µåˆ†åˆ«ç”¨ Java å’Œ Kotlin å†™çš„ `User` ç±»ï¼š

- Java

    ``` java
    â˜•ï¸
    public class User {
        int id;
        String name;
          ğŸ‘‡    ğŸ‘‡
        public User(int id, String name) {
            this.id = id;
            this.name = name;
        }
    }
    ```

- Kotlin

    ``` kotlin
    ğŸï¸
    class User {
    // ğŸ‘† æ²¡æœ‰ public
        val id: Int
        val name: String
             ğŸ‘‡
        constructor(id: Int, name: String) {
     // ğŸ‘† æ²¡æœ‰ public
            this.id = id
            this.name = name
        }
    }
    ```

å¯ä»¥å‘ç°æ„é€ å™¨çš„å†™æ³•ä¸»è¦æœ‰ä¸¤ç‚¹ä¸åŒï¼š

- Java ä¸­æ„é€ å™¨å’Œç±»åŒåï¼ŒKotlin ä¸­ä½¿ç”¨ `constructor` è¡¨ç¤ºã€‚
- Kotlin æ„é€ å™¨æ²¡æœ‰ public ä¿®é¥°ï¼Œå› ä¸ºé»˜è®¤å¯è§æ€§å°±æ˜¯å…¬å¼€çš„ï¼Œå…³äºå¯è§æ€§ä¿®é¥°ç¬¦è¿™é‡Œå…ˆä¸å±•å¼€ï¼Œåé¢ä¼šè®²åˆ°ã€‚

Kotlin é™¤äº†å’Œ Java ç±»ä¼¼çš„æ„é€ å™¨ä¹‹å¤–è¿˜å¼•å…¥äº† ã€Œä¸»æ„é€ å™¨ primary constructorã€ï¼Œå¯ä»¥è®©ä½ çš„ä»£ç æ›´åŠ ç›´è§‚å’Œç®€æ´ï¼š

``` kotlin
ğŸï¸    // ğŸ‘‡ æ²¡æœ‰ constructor
class User(val id: Int, val name: String) {}
         // ğŸ‘† æ„é€ å™¨å‚æ•°ç›´æ¥ä½œä¸ºå±æ€§å£°æ˜
```

è€Œå’Œ Java æ¯”è¾ƒç±»ä¼¼çš„æ„é€ å™¨åœ¨ Kotlin ä¸­ç§°ä¹‹ä¸º ã€Œæ¬¡æ„é€ å™¨ secondary constructorã€ã€‚ä¸€ä¸ªåŒºåˆ†ä¸»æ„é€ å™¨å’Œæ¬¡æ„é€ å™¨çš„ç®€å•åŠæ³•æ˜¯ï¼Œå£°æ˜åœ¨ç±»çš„å¤§æ‹¬å·é‡Œé¢çš„æ˜¯æ¬¡æ„é€ å™¨ï¼Œå£°æ˜åœ¨å¤–é¢çš„æ˜¯ä¸»æ„é€ å™¨ã€‚æ¥ä¸‹æ¥åˆ†åˆ«çœ‹çœ‹è¿™ä¸¤ç§æ„é€ å™¨ã€‚

#### ä¸»æ„é€ å™¨

Kotlin ä¸­æ¯ä¸ªç±»æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»æ„é€ å™¨ï¼ˆå¯ä»¥æ²¡æœ‰ï¼‰ï¼Œåƒä¸‹é¢è¿™æ ·å†™åœ¨ç±»ååé¢ï¼š

``` kotlin
ğŸï¸            ğŸ‘‡
class User constructor(name: String) {}
```

å¦‚æœéœ€è¦é™åˆ¶æ„é€ å™¨çš„å¯è§æ€§ï¼Œç›´æ¥å†™åœ¨ `constructor` å‰é¢ï¼Œå…³äºå¯è§æ€§æœ¬æ–‡åé¢ä¼šè®²åˆ°ï¼š

``` kotlin
ğŸï¸           ğŸ‘‡
class User private constructor(name: String) {}
```

å½“éœ€è¦ç»™æ„é€ å™¨æ·»åŠ æ³¨è§£æ—¶ï¼Œä¹Ÿæ˜¯æ”¾åœ¨ `constructor` å‰é¢çš„ï¼š

``` kotlin
ğŸï¸              ğŸ‘‡                                            ğŸ‘‡
class User @JvmOverloads constructor(name: String, sex: String = "male")
```

è¿™é‡Œ `@JvmOverloads` è¡¨ç¤ºåœ¨ Jvm ä¸­ç”Ÿæˆé‡è½½çš„ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œç›¸å½“äºåœ¨ `User` å£°æ˜äº†ä¸¤ä¸ªæ„é€ å™¨ï¼š

``` kotlin
ğŸï¸
class User {
    constructor(name: String, sex: String) {
    	...   
    }
    constructor(name: String) : this(name, "male")
}
```

å½“ä¸éœ€è¦ä¿®é¥°æ„é€ å™¨æ—¶å¯ä»¥çœç•¥æ‰å…³é”®å­— `constructor`ï¼š

``` kotlin
ğŸï¸       ğŸ‘‡
class User(name: String) {}
```

##### `init`

å¦‚æœæˆ‘æƒ³åœ¨æ„é€ å™¨ä¸­æ‰§è¡Œåˆå§‹åŒ–æ“ä½œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿä¸ºæ­¤ Kotlin æä¾›äº†åˆå§‹åŒ–ä»£ç å—æ¥è´Ÿè´£è¿™éƒ¨åˆ†ä»»åŠ¡ï¼š

``` kotlin
ğŸï¸
init {
    ...
}
```

åˆå§‹åŒ–ä»£ç å—ç”± init å…³é”®å­—å’Œä¸€å¯¹å¤§æ‹¬å·æ„æˆï¼Œè¿™å…¶å®ä¸æ˜¯ Kotlin åˆ›é€ çš„æ–°æ¦‚å¿µï¼Œå¯¹åº”çš„ Java åœ¨ç±»ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œç”¨æ¥å®Œæˆåˆå§‹åŒ–æ“ä½œï¼š

``` java
â˜•ï¸
{
    ...
}
```

Java ä¸­é™¤äº†è¿™ç§åˆå§‹åŒ–ä»£ç å¿«ï¼Œè¿˜æœ‰é™æ€åˆå§‹åŒ–ä»£ç å—ï¼š

``` java
â˜•ï¸
class Sample {
     ğŸ‘‡
    static {
        ...
    }
}
```

åœ¨ Kotlin ä¸­ç±»çš„é™æ€åˆå§‹åŒ–ä»£ç å—ç§»åˆ°äº† `companion object` ã€Œä¼´ç”Ÿå¯¹è±¡ã€ä¸­ï¼Œè‡³äº `companion object` æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œå…ˆä¸å±•å¼€ï¼Œåæ–‡ä¼šè®²åˆ°ï¼š

``` kotlin
ğŸï¸
class Sample {
       ğŸ‘‡
    companion object {
         ğŸ‘‡
        init {
            ...
        }
    }
}
```

- ä¸€ä¸ª Kotlin ç±»ä¸­å¯ä»¥æœ‰å¤šä¸ªåˆå§‹åŒ–ä»£ç å—ï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºå’Œåˆ›å»ºçš„é¡ºåºæ˜¯ä¸€è‡´çš„ï¼š

    ``` kotlin
    ğŸï¸
    class User {
        init {
            println("First init block.")
        }
        init {
            println("Second init block.")
        }
    }
    ```

    å®ä¾‹åŒ–æ—¶è¾“å‡ºï¼š

    ``` bash
    First init block.
    Second init block.
    ```

- å½“ç±»ä¸­å­˜åœ¨å±æ€§åˆå§‹åŒ–ä»£ç æ—¶ï¼Œæ‰§è¡Œçš„ä¼˜å…ˆçº§å’Œåˆå§‹åŒ–ä»£ç å—æ˜¯åŒçº§çš„ï¼š

    ``` kotlin
    ğŸï¸
    class User {
        val firstProperty = "First property.".also { println(it) }
        init {
            println("First init block.")
        }
        val secondProperty = "Second property.".also { println(it) }
        init {
            println("Second init block.")
        }
    }
    ```

    å®ä¾‹åŒ–æ—¶è¾“å‡ºï¼š

    ``` bash
    First property.
    First init block.
    Second property.
    Second init block.
    ```

    ç”±æ­¤å¯è§å±æ€§åˆå§‹åŒ–ä»£ç å’Œåˆå§‹åŒ–ä»£ç å—å¤„äºåŒä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¦ä¸€ä¸ªè¯æ®æ˜¯è¿™ä¸¤å—ä»£ç éƒ½å¯ä»¥è®¿é—®ä¸»æ„é€ å™¨çš„å‚æ•°ï¼š

    ``` kotlin
    ğŸï¸
                ğŸ‘‡
    class User(name: String) {
                           ğŸ‘‡
        val length: Int = name.length
        init {
                                  ğŸ‘‡
            println("My name is $name")
        }
    }
    ```

##### ä¸»æ„é€ å™¨å±æ€§å£°æ˜

Kotlin è¿˜æœ‰ä¸€ç§ç®€æ´çš„å†™æ³•ç”¨äºå°†ä¸»æ„é€ å™¨ä¸­çš„å‚æ•°å£°æ˜ä¸ºå±æ€§ï¼Œå¹¶ç”¨å‚æ•°å€¼åˆå§‹åŒ–ï¼š

``` kotlin
ğŸï¸             ğŸ‘‡                ğŸ‘‡
class User(val name: String, val age: Int) {}
        // ğŸ‘† val/var è¡¨æ˜å£°æ˜ä¸ºå±æ€§
```

è¿™ç§å†™æ³•ç­‰ä»·äºï¼š

``` kotlin
ğŸï¸    // ğŸ‘‡ æ²¡æœ‰ val/var
class User(name: String, age: Int) {
         ğŸ‘‡
    val name: String = name
        ğŸ‘‡
    val age: Int = age
}
```

ç›¸æ¯”ä¹‹ä¸‹ç¡®å®ç®€åŒ–äº†å¾ˆå¤šã€‚

#### æ¬¡æ„é€ å™¨

Kotlin ä¸­çš„æ¬¡æ„é€ å™¨å’Œ Java ç±»ä¼¼ï¼Œå†™åœ¨ç±»ä¸­ï¼Œé€šè¿‡ `constructor` è¡¨ç¤ºå¹¶ä¸”ä¸å¯ä»¥çœç•¥ï¼š

``` kotlin
ğŸï¸
class User {
    private val name: String
        ğŸ‘‡
    constructor(name: String) {
        this.name = name
        println("My name is $name.")
    }
}
```

##### æ¬¡æ„é€ å™¨éœ€è¦è°ƒç”¨ä¸»æ„é€ å™¨

å†™æ¬¡æ„é€ å™¨æ—¶ï¼Œå¦‚æœå­˜åœ¨ä¸»æ„é€ å™¨ï¼Œéœ€è¦è°ƒç”¨åˆ°ä¸»æ„é€ å™¨ï¼Œåœ¨æ‹¬å·åé¢åŠ ä¸Š `: this()`ï¼š

``` kotlin
ğŸï¸
class User(val name: String) {
    private var age: Int = 0
                                        // ğŸ‘‡ è¿™é‡Œçš„ this(name) è°ƒç”¨çš„æ˜¯ä¸»æ„é€ å™¨
    constructor(name: String, age: Int) : this(name) {
        this.age = age
    }
}
```

Java ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„æ¦‚å¿µï¼š

``` java
â˜•ï¸
class Sample {
    Sample() {
        System.out.println("first constructor");
    }

    Sample(String input) {
        this(); // ğŸ‘ˆ å’Œ Kotlin ä¸­æ¬¡æ„é€ å™¨æ‹¬å·å³è¾¹çš„ :this() ä½œç”¨ç›¸åŒï¼Œè¡¨ç¤ºè°ƒç”¨å¦å¤–ä¸€ä¸ªæ„é€ å™¨
        System.out.println("second constructor ");
    }
}
```

ç”±äº Java ä¸­æ²¡æœ‰ä¸»æ¬¡æ„é€ å™¨çš„æ¦‚å¿µï¼Œæ‰€ä»¥è°ƒç”¨åˆ«çš„æ„é€ å™¨ä¸æ˜¯å¼ºåˆ¶çš„ã€‚

å‰é¢è®²çš„å±äºç›´æ¥è°ƒç”¨ä¸»æ„é€ å™¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é—´æ¥çš„æ–¹å¼è°ƒç”¨ä¸»æ„é€ å™¨ï¼š

``` kotlin
ğŸï¸
class User(val name: String) {
	  var age: Int = 0
    var gender: String = "male"
                                           ğŸ‘‡
    constructor(name: String, age: Int) : this(name) {
        this.age = age
    }
                                                           ğŸ‘‡
    constructor(name: String, age: Int, gender: String) : this(name, age) {
        this.gender = gender
    }
}
```

è¿™æ®µä»£ç é‡Œï¼Œç¬¬äºŒä¸ªæ¬¡æ„é€ å™¨å°±æ˜¯é€šè¿‡è°ƒç”¨ç¬¬ä¸€ä¸ªæ¬¡æ„é€ å™¨é—´æ¥è°ƒç”¨äº†ä¸»æ„é€ å™¨ã€‚é€šè¿‡ `this` å…³é”®å­—å¼•ç”¨åˆ«çš„æ„é€ å™¨ï¼Œé€šè¿‡å‚æ•°å®šä½å…·ä½“çš„æ„é€ å™¨ã€‚

##### è°ƒç”¨é¡ºåº

åˆå§‹åŒ–ä»£ç å—æ°¸è¿œåœ¨æ¬¡æ„é€ å™¨ä¹‹å‰æ‰§è¡Œï¼š

- è¢«è°ƒç”¨æ„é€ å™¨çš„åˆå§‹åŒ–ä»£ç æ€»æ˜¯å…ˆæ‰§è¡Œï¼Œè€Œåˆå§‹åŒ–ä»£ç å—å±äºä¸»æ„é€ å™¨çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä»£ç å—åœ¨æ‰€æœ‰çš„æ¬¡æ„é€ å™¨ä¹‹å‰æ‰§è¡Œï¼š

    ``` kotlin
    ğŸï¸
    class User constructor(name: String) {
      // ğŸ‘‡ å±äºä¸»æ„é€ å™¨ä¸€éƒ¨åˆ†
        init {
            println("Init block.")
        }
                                            // ğŸ‘‡ æ¬¡æ„é€ å™¨æ‰§è¡Œå‰å…ˆè°ƒç”¨ä¸»æ„é€ å™¨
        constructor(name: String, age: Int) : this(name) {
            println("Secondary constructor.")
        }
    }
    ```

    åˆ›å»ºä¸Šé¢è¿™ä¸ªç±»çš„å®ä¾‹æ—¶ä¼šè¾“å‡ºï¼š

    ``` bash
    Init block.
    Secondary constructor.
    ```

- å³ä½¿æ²¡æœ‰å£°æ˜ä¸»æ„é€ å™¨ï¼Œåˆå§‹åŒ–ä»£ç å—ä¹Ÿå…ˆäºæ¬¡æ„é€ å™¨æ‰§è¡Œï¼Œè¿™æ—¶æ¬¡æ„é€ å™¨ç›¸å½“äºè°ƒç”¨äº†ä¸€ä¸ªç©ºçš„ä¸»æ„é€ å™¨ï¼š

    ``` kotlin
    ğŸï¸
    class User {
        init {
            println("Init block.")
        }
        constructor(name: String) {
            println("Secondary Constructor.")
        }
    }
    ```

    åˆ›å»ºè¿™ä¸ªç±»çš„å®ä¾‹æ—¶è¾“å‡ºï¼š

    ``` bash
    Init block.
    Secondary Constructor.
    ```

    ä¸Šé¢è¿™æ®µä»£ç ç­‰ä»·äºï¼š

    ``` kotlin
    ğŸï¸             ğŸ‘‡
    class User constructor() {
        init {
            println("Init block.")
        }     
                                     ğŸ‘‡
        constructor(name: String) : this() {
            println("Secondary Constructor.")
        }
    }
    ```

### `final`

ä¸Šä¸€ç¯‡åœ¨ã€Œ `var` å’Œ `val`ã€ è¿™ä¸€èŠ‚ä¸­è®²åˆ° Kotlin ä¸­çš„ `val` å’Œ Java ä¸­çš„ `final` ç±»ä¼¼ï¼Œè¡¨ç¤ºåªè¯»å˜é‡ï¼Œä¸èƒ½ä¿®æ”¹ã€‚è¿™é‡Œå…·ä½“å¯¹æ¯”ä¸‹ Java å’Œ Kotlin ä¸­çš„åªè¯»å˜é‡ï¼š

- Java

  ``` java
  â˜•ï¸
   ğŸ‘‡
  final int final1 = 1;
               ğŸ‘‡  
  void method(final String final2) {
      System.out.println(final2);
       ğŸ‘‡
      final Date final3 = new Date();
      System.out.println(final3);
  }
  ```

- Kotlin

  ``` kotlin
  ğŸï¸
  
  ğŸ‘‡
  val fina1 = 1
         // ğŸ‘‡ æ²¡æœ‰ val
  fun method(final2: String) {
      println(final2)
      ğŸ‘‡
      val final3 = Date()
      println(final3)
  }
  ```

å¯ä»¥çœ‹åˆ°ä¸åŒç‚¹ä¸»è¦æœ‰ï¼š

- final å˜æˆ valï¼Œç”±äºç±»å‹æ¨æ–­ï¼Œç±»å‹å¯ä»¥çœç•¥ä¸å†™ï¼Œå†™æ³•ä¸Šç®€çŸ­äº†ä¸€äº›ã€‚
- Kotlin æ–¹æ³•å‚æ•°é»˜è®¤æ˜¯ val ç±»å‹ï¼Œæ‰€ä»¥å‚æ•°å‰ä¸éœ€è¦å†™ val å…³é”®å­—ã€‚

ç›¸æ¯” Java ä¸­é€šè¿‡é¢å¤–æ·»åŠ  final å‰ç¼€æ¥è¡¨ç¤ºåªè¯»ï¼ŒKotlin çš„åªè¯»å£°æ˜ç®€åŒ–äº†å¾ˆå¤šï¼Œåªæ˜¯æŠŠ var æœ€åä¸€ä¸ªå­—æ¯æ”¹æˆ lï¼Œå¤§å¤§å¢åŠ äº†å¼€å‘è€…ä½¿ç”¨åªè¯»ç±»å‹çš„é¢‘ç‡ã€‚è™½ç„¶åªæ˜¯å‡å°‘äº†ä¸€ä¸ªå•è¯ï¼Œä½†è€ƒè™‘åˆ°å˜é‡å£°æ˜çš„é¢‘ç‡ï¼Œæ€»ä½“æ•ˆæœè¿˜æ˜¯å¾ˆå¯è§‚çš„ã€‚è¿™ç§ä¼˜åŒ–ä½¿å¾—åœ¨è¯¥åŠ åªè¯»é™åˆ¶çš„åœ°æ–¹åŠ ä¸Šé™åˆ¶ï¼Œå‡å°‘äº†å‡ºç°é”™è¯¯çš„æ¦‚ç‡ï¼Œä»è€Œæé«˜ä»£ç è´¨é‡ã€‚

#### `val`è‡ªå®šä¹‰ getter

ä¸è¿‡ `val` å’Œ `final` è¿˜æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«çš„ï¼Œè™½ç„¶ `val` ä¿®é¥°çš„å˜é‡ä¸èƒ½äºŒæ¬¡èµ‹å€¼ï¼Œä½†å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å˜é‡çš„ getter æ–¹æ³•æ¥è®©å˜é‡æ¯æ¬¡è¢«è®¿é—®æ—¶è¿”å›åŠ¨æ€è®¡ç®—çš„å€¼ï¼š

``` kotlin
ğŸï¸

ğŸ‘‡
val size: Int
	get() { // ğŸ‘ˆ
        return items.size
    }
```

å‰é¢è¯´åˆ°ç±»çš„å±æ€§ç±»å‹å¯ä»¥é€šè¿‡åˆå§‹åŒ–ä»£ç è¿›è¡Œç±»å‹æ¨æ–­ï¼Œé™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä»¥é€šè¿‡ getter æ–¹æ³•çš„è¿”å›å€¼æ¨æ–­ï¼Œè€Œä¸” Kotlin ä¸­å¯ä»¥é€šè¿‡ `=` ç›´æ¥è¿æ¥å‡½æ•°è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä¸Šé¢è¿™æ®µä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š

``` kotlin
ğŸï¸  // ğŸ‘‡ æ²¡æœ‰ç±»å‹å£°æ˜ï¼Œç±»å‹æ ¹æ® items.size æ¨æ–­    
val size get() = items.size
```

ä¸è¿‡è¿™ä¸ªå±äºç‰¹æ®Šç”¨æ³•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ `val` è¿˜æ˜¯å¯¹åº”äº Java ä¸­çš„ `final` ä½¿ç”¨çš„ã€‚

é‡å†™ `val` å˜é‡ `getter()` æ–¹æ³•ä¸€ä¸ªå¯èƒ½çš„åº”ç”¨æ˜¯ç”¨äºç®€åŒ–ä¸€äº›æ²¡æœ‰å‚æ•°çš„å±æ€§ç±»æ–¹æ³•è°ƒç”¨ï¼š

- æ–¹æ³•å½¢å¼ï¼š

    ``` kotlin
    ğŸï¸
    
    ğŸ‘‡
    fun isEmpty(): Boolean {
        return items.size == 0
    }
    ```

- `val` å½¢å¼ï¼š

    ``` kotlin
    ğŸï¸
    
    ğŸ‘‡     // ğŸ‘‡ æ²¡æœ‰æ‹¬å·
    val isEmpty: Boolean
    		get() {
            return items.size == 0
        }
    ```

ä¸Šé¢çš„æ–¹æ³•å’Œå±æ€§çš„è°ƒç”¨æ–¹å¼åˆ†åˆ«å¦‚ä¸‹ï¼š

``` kotlin
any.isEmpty()
any.isEmpty // ğŸ‘ˆ æ²¡æœ‰æ‹¬å·
```

å°‘äº†ä¸€å¯¹æ‹¬å·ï¼Œå¯ä»¥è®©ä»£ç ç®€æ´ä¸€äº›ã€‚

### `static` property / function

å‰é¢è®²çš„ `var` / `val` å˜é‡éƒ½æ˜¯éé™æ€å˜é‡ï¼Œå¿…é¡»å…ˆåˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡æ‰èƒ½ä½¿ç”¨ï¼Œå¦‚æœæƒ³é€šè¿‡ç±»ç›´æ¥å¼•ç”¨ï¼Œå°±éœ€è¦ç”¨åˆ°é™æ€å˜é‡å’Œæ–¹æ³•ã€‚æ¥ä¸‹æ¥çœ‹çœ‹ Kotlin ä¸­çš„é™æ€å˜é‡å’Œæ–¹æ³•ï¼š

#### Kotlin ä¸­çš„é™æ€å˜é‡å’Œæ–¹æ³•

Java å’Œ Kotlin ä¸­å£°æ˜é™æ€å˜é‡å’Œæ–¹æ³•ï¼š

- åœ¨ Java ä¸­ï¼š

    ``` java
    â˜•ï¸
    class A {
                ğŸ‘‡
        public static int property = 1;
                ğŸ‘‡
        public static void method() {
            println("A.method()")
        }
    }
    ```

    è¿™æ ·å°±å¯ä»¥ä¸éœ€è¦åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ï¼Œç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼š

    ``` java
    â˜•ï¸
                  ğŸ‘‡
    int variable = A.property;
    ğŸ‘‡
    A.method();
    ```

- åœ¨ Kotlin ä¸­å¦‚æœæƒ³å®ç°ç±»ä¼¼çš„åŠŸèƒ½è¯¥æ€ä¹ˆåšå‘¢ï¼Œåœ¨ç±»ä¸­å¯ä»¥åˆ›å»ºä¸€ä¸ªå«ä½œ `companion object` çš„ä¸œè¥¿ï¼Œå°†æƒ³å®šä¹‰çš„é™æ€å±æ€§å’Œæ–¹æ³•æ”¾åœ¨å…¶ä¸­ï¼š

    ``` kotlin
    ğŸï¸
    class A {
        // ğŸ‘‡ æ–°ä¸œè¥¿
        companion object {
         // ğŸ‘‡ å’Œç±»ä¸­å£°æ˜ç›¸ä¼¼
            val property: Int = 1
            fun method() {
                println("A.method()")
            }
        }
    }
    ```

    è¿™æ ·åœ¨è°ƒç”¨çš„æ—¶å€™å¯ä»¥åƒ Java ä¸€æ ·å»è°ƒç”¨ï¼š

    ``` kotlin
    ğŸï¸
                  ğŸ‘‡
    val variable = A.property
    ğŸ‘‡
    A.method()
    ```

    è¿™ä¸ª `companion object`  æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ç§æ–¹å¼å®šä¹‰ç±»çº§åˆ«çš„å˜é‡æˆ–è€…æ–¹æ³•ï¼Œå…ˆæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯ objectã€‚

#### `object`

##### `object` åˆ›å»ºå•ä¾‹ç±»

`object` å­—é¢æ„æ€æ˜¯å¯¹è±¡ï¼Œä¸ Java ä¸­éœ€è¦é€šè¿‡ `new` åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¸åŒï¼ŒKotlin ä¸­å¯ä»¥é€šè¿‡ `object` ç›´æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼š

``` kotlin
ğŸï¸

// ğŸ‘‡ class æ›¿æ¢æˆäº† object
object A {
 // ğŸ‘‡ å’Œæ™®é€šç±»ä¸­å£°æ˜ç±»ä¼¼
    val number: Int = 1
    fun method() {
        println("A.method()")
    }
}
```

å’Œç±»çš„å®šä¹‰ç±»ä¼¼ï¼Œä¸è¿‡ `class` å…³é”®å­—æ›¿æ¢æˆ `object` ï¼Œè°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼š

``` kotlin
ğŸï¸
         // ğŸ‘‡ å’Œè°ƒç”¨é™æ€å˜é‡ç±»ä¼¼
val result = A.number + 1
ğŸ‘‡ 
A.method()
```

çœ‹ç€æ˜¯ä¸æ˜¯å¾ˆåƒ Java ä¸­çš„å•ä¾‹ï¼Œ`object` ä¸€ä¸ªå¾ˆé‡è¦çš„ç”¨é€”å°±æ˜¯å£°æ˜ä¸€ä¸ªå•ä¾‹ç±»ã€‚

å¯¹æ¯”çœ‹çœ‹ Java ä¸­è¦å®ç°ä¸Šé¢è¿™ä¸ªå•ä¾‹ç±»éœ€è¦æ€ä¹ˆåšï¼š

``` java
â˜•ï¸
public class A {
              ğŸ‘‡
    private static A sInstance;
            ğŸ‘‡
    public static A getInstance() {
        if (sInstance == null) {
            sInstance = new A();
        }
        return sInstance;
    }
      ğŸ‘‡
    private A() {
    }

    public int number = 1;

    public void method() {
        System.out.println("A.method()");
    }
}
```

è°ƒç”¨çš„æ—¶å€™ï¼š

``` java
â˜•ï¸             // ğŸ‘‡ å¤šä¸ªæ–¹æ³•
int result = A.getInstance().number + 1;
       ğŸ‘‡
A.getInstance().method()
```

å¯ä»¥çœ‹åˆ° Java ä¸­ä¸ºäº†å®ç°å•ä¾‹ç±»å†™äº†å¤§é‡çš„æ¨¡ç‰ˆä»£ç ï¼Œåœ¨æ²¡æœ‰ Kotlin çš„æ—¶å€™å¤§å®¶å†™å¤šäº†ä¹Ÿå°±ä¹ æƒ¯äº†ï¼Œç›´åˆ°é‡è§äº† Kotlin æ‰å‘ç°å•ä¾‹ç±»åŸæ¥å¯ä»¥è¿™ä¹ˆç®€å•ï¼Œè€Œä¸”è°ƒç”¨ä¹Ÿæ¯”è¾ƒç®€æ´ï¼Œä¸éœ€è¦ getInstance() æ–¹æ³•ã€‚

é€šè¿‡ `object` åˆ›å»ºçš„å¯¹è±¡ä¹Ÿå¯ä»¥ç»§æ‰¿åˆ«çš„ç±»æˆ–è€…æ¥å£ï¼Œå’Œåˆ›å»ºç±»æ˜¯ä¸€æ ·çš„ï¼š

``` kotlin
ğŸï¸
open class A {
    open fun method() {
        println("A.method()")
    }
}

interface B {
    fun interfaceMethod()
}
  ğŸ‘‡      ğŸ‘‡   ğŸ‘‡
object C : A(), B {

    override fun method() {
        println("C.method()")
    }

    override fun interfaceMethod() {
        println("C.interfaceMethod()")
    }
}
```

##### `object` åˆ›å»ºåŒ¿åç±»

æœ‰æ—¶éœ€è¦æ”¹å˜ç±»æ–¹æ³•çš„å®ç°ï¼Œä½†å› ä¸ºæ”¹åŠ¨å¾ˆå°‘ä¸æƒ³åˆ›å»ºè¯¥ç±»çš„å­ç±»ï¼ŒJava ä¸­æ˜¯é€šè¿‡åˆ›å»ºåŒ¿åå†…éƒ¨ç±»æ¥å®ç°çš„ï¼š

``` java
â˜•ï¸                                              ğŸ‘‡ 
ViewPager.SimpleOnPageChangeListener listener = new ViewPager.SimpleOnPageChangeListener() {
	@Override // ğŸ‘ˆ
	public void onPageSelected(int position) {
		// override
	}
};
```

Kotlin ä¸­é€šè¿‡å¯¹è±¡è¡¨è¾¾å¼æ¥è¡¨ç¤ºï¼Œå¯¹è±¡è¡¨è¾¾å¼ç®€å•è¯´å°±æ˜¯ `=` åŠ ä¸Š `object` å£°æ˜çš„å¯¹è±¡ï¼š

``` kotlin
ğŸï¸              // ğŸ‘‡ æ²¡æœ‰ object åå­—
val listener = object: ViewPager.SimpleOnPageChangeListener() {
		   // ğŸ‘† ã€Œ= å’Œ object: ã€å…±åŒç»„æˆå¯¹è±¡è¡¨è¾¾å¼
    override fun onPageSelected(position: Int) {
        // override
    }
}
```

å’Œ Java åˆ›å»ºåŒ¿åç±»çš„æ–¹å¼å¾ˆç›¸ä¼¼ï¼Œä½ å¯ä»¥ç®€å•ç†è§£ä¸ºé€šè¿‡ object åˆ›å»ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`=` åçš„è¯­å¥ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå› ä¸ºå¯¹è±¡è¡¨è¾¾å¼æ˜¯æŒ‡å°†å¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡æˆ–è€…ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ `=` ä»¥åŠå‰é¢çš„å˜é‡ï¼Œè¿™æ®µä»£ç å°±ä¸èƒ½ç§°ä¸ºå¯¹è±¡è¡¨è¾¾å¼ï¼Œå°±ä¼šæŠ¥é”™ï¼š

``` kotlin
ğŸï¸
  // ğŸ‘‡ compile error: Name expected
object: ViewPager.SimpleOnPageChangeListener() {
    override fun onPageSelected(position: Int) {
        // override
    }
}
```

`object` åç¼–è¯‘å™¨æç¤ºè¿™é‡Œéœ€è¦ä¸€ä¸ªå¯¹è±¡çš„åå­—ï¼Œå› ä¸ºç¼–è¯‘å™¨ä»¥ä¸ºä½ æƒ³åˆ›å»ºä¸€ä¸ªç»§æ‰¿ `ViewPager.SimpleOnPageChangeListener` çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡è¡¨è¾¾å¼ã€‚

##### `companion object`

å‰é¢è¯´åˆ°è®¿é—® `object` ä¸­çš„å˜é‡æˆ–è€…æ–¹æ³•æ—¶ç›´æ¥é€šè¿‡ç±»åå¼•ç”¨ï¼Œå°±åƒ Java çš„é™æ€å˜é‡å’Œæ–¹æ³•ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯ä¸éœ€è¦åœ¨æ¯ä¸ªå˜é‡å’Œæ–¹æ³•å‰é¢ç”¨ `static` ä¿®é¥°ï¼Œå› ä¸º `object` åˆ›å»ºçš„å¯¹è±¡å†…æ‰€æœ‰å˜é‡å’Œæ–¹æ³•é»˜è®¤éƒ½æ˜¯é™æ€çš„ï¼Œæ²¡å¾—é€‰ã€‚å¦‚æœåªæƒ³è®©ç±»ä¸­çš„ä¸€éƒ¨åˆ†æ–¹æ³•å’Œå˜é‡æ˜¯é™æ€çš„è¯¥æ€ä¹ˆåšå‘¢ï¼š

``` kotlin
ğŸï¸
class A {
          ğŸ‘‡
    object B {
        var c: Int = 0
    }
}
```

å¦‚ä¸Šï¼Œå¯ä»¥åœ¨ç±»ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠéœ€è¦é™æ€çš„å˜é‡æˆ–æ–¹æ³•æ”¾åœ¨å†…éƒ¨å¯¹è±¡ B ä¸­ï¼Œå¤–éƒ¨å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è°ƒç”¨è¯¥é™æ€å˜é‡ï¼š

``` kotlin
ğŸï¸
A.B.c
 ğŸ‘†
```

ç±»ä¸­åµŒå¥—çš„å¯¹è±¡å¯ä»¥ç”¨ `companion` ä¿®é¥°ï¼š

``` kotlin
ğŸï¸
class A {
       ğŸ‘‡
    companion object B {
        var c: Int = 0
    }
}
```

`companion` å¯ä»¥ç†è§£ä¸ºä¼´éšã€ä¼´ç”Ÿï¼Œè¡¨ç¤ºä¿®é¥°çš„å¯¹è±¡å’Œå¤–éƒ¨ç±»ç»‘å®šï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯è°ƒç”¨çš„æ—¶å€™å¯ä»¥çœæ‰å¯¹è±¡åï¼š

``` kotlin
ğŸï¸
A.c // ğŸ‘ˆ B æ²¡äº†
```

å½“æœ‰ `companion` ä¿®é¥°æ—¶ï¼Œå¯¹è±¡çš„åå­—ä¹Ÿå¯ä»¥çœç•¥æ‰ï¼š

``` kotlin
ğŸï¸
class A {
                // ğŸ‘‡ B æ²¡äº†
    companion object {
        var c: Int = 0
    }
}
```

è¿™å°±æ˜¯è¿™èŠ‚æœ€å¼€å§‹è®²åˆ°çš„ï¼Œå’Œ Java é™æ€å˜é‡æˆ–æ–¹æ³•çš„ç­‰ä»·å†™æ³•ï¼š`companion object`ã€‚

#### top-level property / function å£°æ˜

ä¸åŒäº Java æ‰€æœ‰çš„æ–¹æ³•å’Œå˜é‡éƒ½å¿…é¡»å†™åœ¨ç±»ä¸­ï¼ŒKotlin å¯ä»¥åœ¨ç±»å¤–å†™å˜é‡å’Œæ–¹æ³•ï¼Œè¿™ä¸ªç§°ä¹‹ä¸ºã€Œtop-level property/functionã€å³ã€Œé¡¶å±‚å£°æ˜ã€ã€‚

``` kotlin
ğŸï¸
package com.hencoder.plus // ğŸ‘ˆ å±äº package

// ä¸åœ¨ class/object å†…
fun topLevelFuncion() {
}
```

è¿™æ ·å†™çš„å±æ€§å’Œå‡½æ•°ï¼Œä¸å±äºä»»ä½• `class`ï¼Œè€Œæ˜¯ç›´æ¥å±äº `package`ï¼Œå®ƒå’Œé™æ€å˜é‡ã€é™æ€æ–¹æ³•ä¸€æ ·æ˜¯å…¨å±€çš„ï¼Œä½†ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼šä½ åœ¨å…¶å®ƒåœ°æ–¹ç”¨çš„æ—¶å€™ï¼Œå°±è¿ç±»åéƒ½ä¸ç”¨å†™ï¼š

``` kotlin
ğŸï¸
import com.hencoder.plus.topLevelFunction // ğŸ‘ˆ ç›´æ¥ import æ–¹æ³•

topLevelFunction()
```

å†™åœ¨é¡¶çº§çš„æ–¹æ³•æˆ–è€…å˜é‡æœ‰ä¸ªå¥½å¤„ï¼Œåœ¨ Android Studio ä¸­å†™ä»£ç æ—¶ï¼ŒIDE å¾ˆå®¹æ˜“æ ¹æ®ä½ å†™çš„æ–¹æ³•å‰å‡ ä¸ªå­—æ¯è‡ªåŠ¨è”æƒ³å‡ºç›¸åº”çš„æ–¹æ³•ï¼Œæé«˜äº†å†™ä»£ç çš„æ•ˆç‡ï¼Œè€Œä¸”å¯ä»¥å‡å°‘é¡¹ç›®ä¸­çš„é‡å¤ä»£ç ã€‚

##### å‘½åç›¸åŒçš„é¡¶çº§å‡½æ•°

é¡¶çº§å‡½æ•°ä¸å†™åœ¨ç±»ä¸­å¯èƒ½æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœåœ¨ä¸åŒæ–‡ä»¶ä¸­å£°æ˜å‘½åç›¸åŒçš„å‡½æ•°ï¼Œä½¿ç”¨çš„æ—¶å€™ä¼šä¸ä¼šæ··æ·†ï¼Ÿæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

* åœ¨ `org.kotlinmaster.library` åŒ…ä¸‹æœ‰ä¸€ä¸ªæ–¹æ³• methodï¼š

  ``` kotlin
  ğŸï¸
  package org.kotlinmaster.library1
                             ğŸ‘†
  fun method() {
      println("library1 method()")
  }
  ```

* åœ¨ `org.kotlinmaster.library2` åŒ…ä¸‹ä¹Ÿæœ‰ä¸€ä¸ªåŒåæ–¹æ³•ï¼š

  ``` kotlin
  ğŸï¸
  package org.kotlinmaster.library2
                             ğŸ‘†
  fun method() {
      println("library2 method()")
  }
  ```

åœ¨ä½¿ç”¨çš„æ—¶å€™å¦‚æœåŒæ—¶è°ƒç”¨è¿™ä¸¤ä¸ªåŒåæ–¹æ³•ä¼šæ€ä¹ˆæ ·ï¼š

```kotlin
ğŸï¸
import org.kotlinmaster.library1.method
                           ğŸ‘†
fun test() {
    method()
                       ğŸ‘‡
    org.kotlinmaster.library2.method()
}
```

å¯ä»¥çœ‹åˆ°å½“å‡ºç°ä¸¤ä¸ªåŒåé¡¶çº§å‡½æ•°æ—¶ï¼ŒIDE ä¼šè‡ªåŠ¨åŠ ä¸ŠåŒ…å‰ç¼€æ¥åŒºåˆ†ï¼Œè¿™ä¹Ÿå°è¯äº†é¡¶çº§å‡½æ•°æ˜¯å±äºåŒ…çš„ç‰¹æ€§ã€‚

#### å¯¹æ¯”

é‚£åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œåœ¨ `object`ã€`companion object` å’Œ top-level ä¸­è¯¥é€‰æ‹©å“ªä¸€ä¸ªå‘¢ï¼Ÿç®€å•æ¥è¯´æŒ‰ç…§ä¸‹é¢è¿™ä¸¤ä¸ªæ¡ä»¶åˆ¤æ–­ï¼š

- å¦‚æœæƒ³å†™å·¥å…·ç±»çš„åŠŸèƒ½ï¼Œç›´æ¥åˆ›å»º top-level çš„å‡½æ•°ï¼Œæ”¾åœ¨æ–‡ä»¶ä¸­ã€‚
- å¦‚æœéœ€è¦ç»§æ‰¿åˆ«çš„ç±»æˆ–è€…å®ç°æ¥å£ï¼Œå°±ç”¨ `object` å’Œ `companion object`ã€‚

### å¸¸é‡

é™¤äº†ä¸Šé¢è®²åˆ°çš„é™æ€å˜é‡å’Œæ–¹æ³•ä¼šç”¨åˆ° `static`ï¼ŒJava ä¸­å£°æ˜å¸¸é‡æ—¶ä¹Ÿä¼šç”¨åˆ°ï¼š

- Java ä¸­å£°æ˜å¸¸é‡ï¼š

    ``` java
    â˜•ï¸
    public class Sample {
                ğŸ‘‡     ğŸ‘‡
        public static final int CONST_NUMBER = 1;
    }
    ```

- Kotlin ä¸­å£°æ˜å¸¸é‡ï¼š

    ``` kotlin
    ğŸï¸
    class Sample {
        // ğŸ‘‡ åœ¨ companion object å†…
        companion object {
             ğŸ‘‡                  // ğŸ‘‡ åŸºç¡€ç±»å‹
            const val CONST_NUMBER = 1
        }
    }
    ```

å‘ç°ä¸åŒç‚¹æœ‰ï¼š

- Kotlin çš„å¸¸é‡å¿…é¡»å£°æ˜åœ¨ç±»çš„ä¼´éšå¯¹è±¡å†…ï¼Œå› ä¸ºå¸¸é‡æ˜¯é™æ€çš„ã€‚
- Kotlin æ–°å¢äº†ä¿®é¥°å¸¸é‡çš„ `const` å…³é”®å­—ã€‚

é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«ï¼š

- Kotlin ä¸­åªæœ‰åŸºæœ¬ç±»å‹å’Œ String ç±»å‹å¯ä»¥å£°æ˜æˆå¸¸é‡ã€‚

åŸå› æ˜¯ Kotlin ä¸­çš„å¸¸é‡æŒ‡çš„æ˜¯ ã€Œcompile-time constant ç¼–è¯‘æ—¶å¸¸é‡ã€ï¼Œå®ƒçš„æ„æ€æ˜¯ã€Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±çŸ¥é“è¿™ä¸ªä¸œè¥¿åœ¨æ¯ä¸ªè°ƒç”¨å¤„çš„å®é™…å€¼ã€ï¼Œå› æ­¤å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç›´æ¥æŠŠè¿™ä¸ªå€¼ç¡¬ç¼–ç åˆ°ä»£ç é‡Œä½¿ç”¨çš„åœ°æ–¹ã€‚

è€ŒéåŸºç¡€å’Œ String ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•æ”¹å˜å¯¹è±¡å†…éƒ¨çš„å€¼ï¼Œè¿™æ ·è¿™ä¸ªå˜é‡å°±ä¸æ˜¯å¸¸é‡äº†ï¼Œæ¥çœ‹ä¸€ä¸ª Java çš„ä¾‹å­ï¼Œæ¯”å¦‚ä¸€ä¸ª User ç±»ï¼š

``` java
â˜•ï¸
public class User {
    int id; // ğŸ‘ˆ å¯ä¿®æ”¹
    String name; // ğŸ‘ˆ
    public User(int id, String name) {
        this.id = id;
        this.name = name;
    }
}
```

åœ¨ä½¿ç”¨çš„åœ°æ–¹å£°æ˜ä¸€ä¸ª `static final` çš„ Userï¼Œå®ƒæ˜¯ä¸èƒ½äºŒæ¬¡èµ‹å€¼çš„ï¼š

``` java
â˜•ï¸
static final User user = new User(123, "Zhangsan");
  ğŸ‘†    ğŸ‘†
```

ä½†æ˜¯å¯ä»¥é€šè¿‡è®¿é—®è¿™ä¸ªç±»çš„æˆå‘˜å˜é‡æ”¹å˜å®ƒçš„å€¼ï¼š

``` java
â˜•ï¸
user.name = "Lisi";
      ğŸ‘†
```

æ‰€ä»¥ç›¸æ¯” Java é‡Œå£°æ˜çš„å¸¸é‡ï¼ŒKotlin çš„å¸¸é‡é™åˆ¶æ›´ä¸¥æ ¼ï¼Œæ›´åŠ ç¬¦åˆå¸¸é‡çš„å®šä¹‰ã€‚

### æ•°ç»„å’Œé›†åˆ

å‰é¢è®²äº† Kotlin ä¸­çš„å¯¹è±¡å’Œå¸¸é‡ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦ä¸€ä¸ªç¼–ç¨‹ä¸­å¸¸è§çš„ä¸»é¢˜ï¼šæ•°ç»„å’Œé›†åˆã€‚

#### æ•°ç»„

å…ˆå£°æ˜ä¸€ä¸ª String æ•°ç»„ï¼š

- Java ä¸­çš„å†™æ³•ï¼š

    ``` java
    â˜•ï¸
    String[] strs = {"a", "b", "c"};
          ğŸ‘†        ğŸ‘†
    ```

- Kotlin ä¸­çš„å†™æ³•ï¼š

    ``` kotlin
    ğŸï¸
    val strs: Array<String> = arrayOf("a", "b", "c")
                ğŸ‘†              ğŸ‘†
    ```

å¯ä»¥çœ‹åˆ° Kotlin ä¸­çš„æ•°ç»„æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ³›å‹çš„ç±»ï¼Œåˆ›å»ºæ–¹æ³•ä¹Ÿæ˜¯æ³›å‹æ–¹æ³•ï¼Œå’Œé›†åˆæ•°æ®ç±»å‹ä¸€æ ·ã€‚

##### å–å€¼å’Œä¿®æ”¹

- Kotlin ä¸­è·å–æˆ–è€…è®¾ç½®æ•°ç»„å…ƒç´ å’Œ Java ä¸€æ ·å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·åŠ ä¸‹æ ‡çš„æ–¹å¼ç´¢å¼•ï¼š

    ``` kotlin
    ğŸï¸
    println(strs[0])
       ğŸ‘‡      ğŸ‘†
    strs[1] = "B"
    ```

- é™¤æ­¤ä¹‹å¤–ï¼ŒKotlin çš„ Array ç±»å‹è¿˜å¯ä»¥ä½¿ç”¨ `get()` å’Œ `set()` æ–¹æ³•å–å€¼å’Œèµ‹å€¼ï¼š

    ``` kotlin
    ğŸï¸
    println(strs.get(0))
         ğŸ‘‡      ğŸ‘†
    strs.set(1, "B")
    ```

ç¬¬äºŒç§æ–¹å¼æœ‰ç‚¹åƒé›†åˆç±»å‹ï¼Œè¿™æ­£æ˜¯ Kotlin ä¸­å°†æ•°ç»„æ³›å‹åŒ–çš„åŸå› ï¼šå¯¹æ•°ç»„çš„æ“ä½œåƒé›†åˆä¸€æ ·åŠŸèƒ½æ›´å¼ºå¤§ï¼Œç”±äºæ³›å‹åŒ– Kotlin å¯ä»¥é€šè¿‡æ‰©å±•æ–¹æ³•çš„æ–¹å¼ç»™æ•°ç»„å¢åŠ å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·æ–¹æ³•ï¼š

- `contains()`
- `first()`
- `find()`

è¿™æ ·æ•°ç»„çš„å®ç”¨æ€§å°±å¤§å¤§å¢åŠ äº†ã€‚

##### ä¸æ”¯æŒåå˜

Kotlin çš„æ•°ç»„ç¼–è¯‘æˆå­—èŠ‚ç ä½¿ç”¨çš„ä»ç„¶æ˜¯ Java çš„æ•°ç»„ï¼Œä½†åœ¨è¯­è¨€å±‚é¢æ˜¯æ³›å‹å®ç°ï¼Œè¿™æ ·ä¼šå¤±å»åå˜ (covariance) ç‰¹æ€§ï¼Œå°±æ˜¯å­ç±»æ•°ç»„å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™çˆ¶ç±»çš„æ•°ç»„å˜é‡ï¼š

 - Kotlin

    ``` kotlin
    ğŸï¸
    val strs: Array<String> = arrayOf("a", "b", "c")
                      ğŸ‘†
    val anys: Array<Any> = strs // compile-error: Type mismatch
                    ğŸ‘†
    ```

- è€Œè¿™åœ¨ Java ä¸­æ˜¯å¯ä»¥çš„ï¼š

    ``` java
    â˜•ï¸
    String[] strs = {"a", "b", "c"};
      ğŸ‘†
    Object[] objs = strs; // success
      ğŸ‘†
    ```

å…³äºåå˜çš„é—®é¢˜ï¼Œè¿™é‡Œå°±å…ˆä¸å±•å¼€ï¼Œåé¢è®²æ³›å‹çš„æ—¶å€™ä¼šæåˆ°ã€‚

#### é›†åˆ

å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½æœ‰é›†åˆè¿™ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ç»„æ•°ç›®å¯å˜ã€ç±»å‹ç›¸åŒçš„æ•°æ®ã€‚å¸¸è§çš„é›†åˆç±»å‹æœ‰ä¸‰ç§ï¼š`List`ã€`Set` å’Œ `Map`ï¼Œå®ƒä»¬çš„å«ä¹‰åˆ†åˆ«å¦‚ä¸‹ï¼š

- `List` ä»¥å›ºå®šé¡ºåºå­˜å‚¨ä¸€ç»„å…ƒç´ ï¼Œå…ƒç´ å¯ä»¥é‡å¤ã€‚
- `Set` å­˜å‚¨ä¸€ç»„äº’ä¸ç›¸ç­‰çš„å…ƒç´ ï¼Œé€šå¸¸æ²¡æœ‰å›ºå®šé¡ºåºã€‚
- `Map` å­˜å‚¨ é”®-å€¼ å¯¹çš„æ•°æ®é›†åˆï¼Œé”®äº’ä¸ç›¸ç­‰ï¼Œä½†ä¸åŒçš„é”®å¯ä»¥å¯¹åº”ç›¸åŒçš„å€¼ã€‚

##### List

- Java ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š

  ``` java
  â˜•ï¸
  List<String> strList = new ArrayList<>();
                          ğŸ‘†
  strList.add("a");
  strList.add("b");
  strList.add("c"); // ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç
  ```

- Kotlin ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š

  ``` kotlin
  ğŸï¸             // ğŸ‘‡ å› ä¸ºç±»å‹æ¨æ–­ï¼Œçœç•¥ç±»å‹å‚æ•° <String>
  val strList = listOf("a", "b", "c") // ğŸ‘ˆ ä¸€å¥ä»£ç åˆ›å»ºã€æ·»åŠ å…ƒç´ 
         // ğŸ‘† ç±»å‹æ¨æ–­ï¼Œçœç•¥ç±»å‹å£°æ˜ :List<String>
  ```

é¦–å…ˆèƒ½çœ‹åˆ°çš„æ˜¯ Kotlin ä¸­åˆ›å»ºä¸€ä¸ª `List` ç‰¹åˆ«çš„ç®€å•ï¼Œä¸€å¥ä»£ç æå®šï¼Œæœ‰ç‚¹åƒåˆ›å»ºæ•°ç»„çš„ä»£ç ã€‚è€Œä¸” Kotlin ä¸­çš„ `List` å¤šäº†ä¸€ä¸ªç‰¹æ€§ï¼šæ”¯æŒ covariant (åå˜)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥æŠŠå­ç±»çš„ `List` èµ‹å€¼ç»™çˆ¶ç±»çš„ `List`ï¼š

- Kotlinï¼š

  ``` kotlin
  ğŸï¸
  val strs: List<String> = listOf("a", "b", "c")
                  ğŸ‘†
  val anys: List<Any> = strs // success
                 ğŸ‘†
  ```

- è€Œè¿™åœ¨ Java ä¸­æ˜¯ä¼šæŠ¥é”™çš„ï¼š

  ``` java
  â˜•ï¸
  List<String> strList = new ArrayList<>();
         ğŸ‘†
  List<Object> objList = strList; // ğŸ‘ˆ compile error: incompatible types
        ğŸ‘†
  ```

å¯¹äºåå˜çš„æ”¯æŒä¸å¦ï¼Œ`List` å’Œæ•°ç»„åˆšå¥½åè¿‡æ¥äº†ã€‚

###### å’Œæ•°ç»„çš„åŒºåˆ«

Kotlin ä¸­æ•°ç»„å’Œ MutableList çš„ API æ˜¯éå¸¸åƒçš„ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸èƒ½å˜ã€‚é‚£åœ¨ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„å‘¢ï¼Ÿ

è¿™ä¸ªé—®é¢˜åœ¨ Java ä¸­å°±å­˜åœ¨äº†ï¼Ÿæ•°ç»„å’Œ `List` çš„åŠŸèƒ½ç±»ä¼¼ï¼Œ`List` çš„åŠŸèƒ½æ›´å¤šä¸€äº›ï¼Œç›´è§‰åº”è¯¥ç”¨ `List` ã€‚ä½†æ•°ç»„ä¹Ÿä¸æ˜¯æ²¡æœ‰ä¼˜åŠ¿ï¼ŒåŸºç¡€ç±»å‹ (`int[]`ã€`float[]`) çš„æ•°ç»„ä¸ç”¨è‡ªåŠ¨è£…ç®±ï¼Œæ€§èƒ½å¥½ä¸€ç‚¹ã€‚

åœ¨ Kotlin ä¸­ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåœ¨ä¸€äº›æ€§èƒ½éœ€æ±‚æ¯”è¾ƒè‹›åˆ»çš„åœºæ™¯ï¼Œå¹¶ä¸”å…ƒç´ ç±»å‹æ˜¯åŸºç¡€ç±»å‹æ—¶ï¼Œç”¨æ•°ç»„å¥½ä¸€ç‚¹ã€‚ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼ŒKotlin ä¸­è¦ç”¨ä¸“é—¨çš„åŸºç¡€ç±»å‹æ•°ç»„ç±» (`IntArray` `FloatArray` `LongArray`) æ‰å¯ä»¥å…äºè£…ç®±ã€‚

##### Set

- Java ä¸­åˆ›å»ºä¸€ä¸ª `Set`ï¼š

  ``` java
  â˜•ï¸
  Set<String> strSet = new HashSet<>();
                        ğŸ‘†
  strSet.add("a");
  strSet.add("b");
  strSet.add("c"); // ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç
  ```

- Kotlin ä¸­åˆ›å»ºç›¸åŒçš„ `Set`ï¼š

  ``` kotlin
  ğŸï¸            // ğŸ‘‡ çœç•¥ç±»å‹å‚æ•°
  val strSet = setOf("a", "b", "c") // ğŸ‘ˆ ä¸€å¥ä»£ç 
        // ğŸ‘† çœç•¥ç±»å‹å£°æ˜
  ```

å’Œ `List` ç±»ä¼¼ï¼Œä¸€å¥ä»£ç åˆ›å»ºä¸€ä¸ª `Set`ï¼ŒåŒæ ·å…·æœ‰ covariant (åå˜) ç‰¹æ€§ã€‚

##### Map

- Java ä¸­åˆ›å»ºä¸€ä¸ª `Map`ï¼š

  ``` java
  â˜•ï¸
  Map<String, Integer> map = new HashMap<>();
                             ğŸ‘†
  map.put("key1", 1);
  map.put("key2", 2);
  map.put("key3", 3);
  map.put("key4", 3); // ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç
  ```

- Kotlin ä¸­åˆ›å»ºä¸€ä¸ª `Map`ï¼š

  ``` kotlin
  ğŸï¸         // ğŸ‘‡ çœç•¥ç±»å‹å‚æ•°
  val map = mapOf("key1" to 1, "key2" to 2, "key3" to 3, "key4" to 3) // ğŸ‘ˆ ä¸€å¥ä»£ç 
     // ğŸ‘† çœç•¥ç±»å‹å£°æ˜
  ```

å’Œä¸Šé¢ä¸¤ç§é›†åˆç±»å‹ç›¸ä¼¼åˆ›å»ºä»£ç å¾ˆç®€å•ï¼Œä¸€è¡Œæå®šã€‚

###### å–å€¼å’Œä¿®æ”¹

- Kotlin ä¸­çš„ Map é™¤äº†å’Œ Java ä¸­çš„ä¸€æ ·å¯ä»¥ä½¿ç”¨ `get()` æ ¹æ®é”®è·å–å¯¹åº”çš„å€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·çš„æ–¹å¼è·å–ï¼š

    ``` kotlin
    ğŸï¸               ğŸ‘‡
    val value1 = map.get("key1")
                   ğŸ‘‡
    val value2 = map["key2"]
    ```

- ç±»ä¼¼çš„ï¼ŒKotlin ä¸­ä¹Ÿå¯ä»¥ç”¨æ–¹æ‹¬å·çš„æ–¹å¼æ”¹å˜ `Map` ä¸­é”®å¯¹åº”çš„å€¼ï¼š

    ``` kotlin
    ğŸï¸         // ğŸ‘‡ å’Œ mapOf() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸‹æ–‡ä¼šè®²åˆ°
    val map = mutableMapOf("key1" to 1, "key2" to 2)
        ğŸ‘‡
    map.put("key1", 2)
       ğŸ‘‡
    map["key1"] = 2
    ```

##### å¯å˜é›†åˆ/ä¸å¯å˜é›†åˆ

ä¸Šé¢ä¿®æ”¹ `Map` å€¼çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºå‡½æ•°ç”¨çš„æ˜¯ `mutableMapOf()` æ–¹æ³•è€Œä¸æ˜¯ `mapOf()`ï¼Œéš¾é“åªæœ‰ `mutableMapOf()` åˆ›å»ºçš„æ‰å¯ä»¥ä¿®æ”¹å—ï¼Ÿæ˜¯çš„ï¼ŒKotlin ä¸­é›†åˆåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šåªè¯»çš„å’Œå¯å˜çš„ã€‚åªè¯»çš„é›†åˆåœ¨åˆ›å»ºçš„æ—¶å€™å°±è¦ç¡®å®šå¥½å€¼ï¼Œåˆ›å»ºå¥½åé›†åˆçš„ size å’Œå…ƒç´ å€¼éƒ½ä¸èƒ½æ”¹å˜ã€‚

- `listOf()` åˆ›å»ºä¸å¯å˜çš„ `List`ï¼Œ`mutableListOf()` åˆ›å»ºå¯å˜çš„ `List`ã€‚
- `setOf()` åˆ›å»ºä¸å¯å˜çš„ `Set`ï¼Œ`mutableSetOf()` åˆ›å»ºå¯å˜çš„ `Set`ã€‚
- `mapOf()` åˆ›å»ºä¸å¯å˜çš„ `Map`ï¼Œ`mutableMapOf()` åˆ›å»ºå¯å˜çš„ `Map`ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ mutable å‰ç¼€çš„æ–¹æ³•åˆ›å»ºçš„å¯å˜çš„é›†åˆã€‚ä¸å¯å˜çš„é›†åˆå¯ä»¥é€šè¿‡ `toMutable*()` ç³»æ–¹æ³•è½¬æ¢æˆå¯å˜çš„é›†åˆï¼š

``` kotlin
ğŸï¸
val strList = listOf("a", "b", "c")
            ğŸ‘‡
strList.toMutableList()
val strSet = setOf("a", "b", "c")
            ğŸ‘‡
strSet.toMutableSet()
val map = mapOf("key1" to 1, "key2" to 2, "key3" to 3, "key4" to 3)
         ğŸ‘‡
map.toMutableMap()
```

ç„¶åå°±å¯ä»¥å¯¹é›†åˆè¿›è¡Œä¿®æ”¹äº†ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ä¸‹ï¼š`toMutable*()` è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å»ºçš„é›†åˆï¼ŒåŸæœ‰çš„é›†åˆè¿˜æ˜¯ä¸å¯å˜çš„ã€‚

#### `Sequence`

é™¤äº†é›†åˆ Kotlin è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å®¹å™¨ç±»å‹ `Sequence`ï¼Œå®ƒå’Œ `Iterable` ä¸€æ ·ç”¨æ¥éå†ä¸€ç»„æ•°æ®å¹¶å¯ä»¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œç‰¹å®šçš„å¤„ç†ï¼Œå…ˆæ¥çœ‹çœ‹å¦‚ä½•åˆ›å»ºä¸€ä¸ª `Sequence`ã€‚

##### åˆ›å»º

- ç±»ä¼¼ `listOf()` ï¼Œä½¿ç”¨ä¸€ç»„å…ƒç´ åˆ›å»ºï¼š

    ``` kotlin
    ğŸï¸
    sequenceOf("a", "b", "c")
    ```

- ä½¿ç”¨ `Iterable` åˆ›å»ºï¼š

    ``` kotlin
    ğŸï¸
    val list = listOf("a", "b", "c")
    list.asSequence()
    // ğŸ‘† List å®ç°äº† Iterable æ¥å£
    ```

- ä½¿ç”¨ lamda è¡¨è¾¾å¼åˆ›å»ºï¼š

    ``` kotlin
    ğŸï¸                          // ğŸ‘‡ ç¬¬ä¸€ä¸ªå…ƒç´ 
    val sequence = generateSequence(0) { it + 1 }
                                    // ğŸ‘† lamda è¡¨è¾¾å¼ï¼Œè´Ÿè´£ç”Ÿæˆç¬¬äºŒä¸ªåŠä»¥åçš„å…ƒç´ ï¼Œit è¡¨ç¤ºå‰ä¸€ä¸ªå…ƒç´ 
    println(sequence.take(3).toList())
                       // ğŸ‘† åªå– sequence ä¸­å‰ä¸‰ä¸ªå…ƒç´ 
    ```

    ä¸Šé¢è¿™æ®µä»£ç è¾“å‡ºï¼š

    ``` bash
    [0, 1, 2]
    ```

è¿™çœ‹èµ·æ¥å’Œ `Iterable` ä¸€æ ·å‘€ï¼Œä¸ºå•¥è¦å¤šæ­¤ä¸€ä¸¾ä½¿ç”¨ `Sequence` å‘¢ï¼Ÿå› ä¸º `Sequence` åœ¨ä¸¤ç‚¹ä¸Šå®ç°å’Œ `Iterable` ä¸ä¸€æ ·ï¼š

- è°ƒç”¨å¤„ç†å‡½æ•°å¤„ç†å…ƒç´ æ—¶ï¼Œ`Iterable` æ˜¯ç«‹å³æ‰§è¡Œï¼Œ `Sequence` æ˜¯æ‡’åŠ è½½ã€‚
- è°ƒç”¨å¤šä¸ªå¤„ç†å‡½æ•°æ—¶ï¼Œ`Iterable` æ˜¯ä¸€ä¸ªå‡½æ•°éå†å®Œæ‰€æœ‰å…ƒç´ åå†æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œ`Sequence` æ˜¯ä¸€ä¸ªå…ƒç´ æ‰§è¡Œå®Œæ‰€æœ‰å‡½æ•°åå†éå†ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚

emmm...å¥½åƒå¹¶ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€ã€‚æ²¡å…³ç³»ï¼Œæˆ‘ä»¬ç»“åˆä¾‹å­çœ‹çœ‹è¿™ä¸¤ç‚¹ä¸åŒã€‚

##### æ‡’åŠ è½½

æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼šå°†ä¸€ç»„å­—ç¬¦ä¸²è½¬å¤§å†™è¾“å‡ºã€‚

-  `Iterable` ï¼š

    ``` kotlin
    ğŸï¸
    val letterList = listOf("a", "d")
        .map {
            println("map: $it")
            it.toUpperCase()
        }
    println("Upper case letter:")
    println(letterList) // ğŸ‘ˆ letterList ä½¿ç”¨çš„åœ°æ–¹
    ```

    è¾“å‡ºï¼š

    ``` bash
    map: a
    map: d // ğŸ‘ˆ map æ“ä½œå…ˆæ‰§è¡Œ
    Upper case letter:
    [A, D]
    ```

-  `Sequence` ï¼š

    ``` kotlin
    ğŸï¸
    val letterSequence = sequenceOf("a", "d")
        .map {
            println("map: $it")
            it.toUpperCase()
        }
    println("Upper case letter:")
    println(letterSequence.toList()) // ğŸ‘ˆ letterSequence ä½¿ç”¨çš„åœ°æ–¹
    ```

    è¾“å‡ºï¼š

    ``` bash
    Upper case letter:
    map: a // ğŸ‘ˆ map æ“ä½œåæ‰§è¡Œ
    map: d
    [A, D]
    ```

é€šè¿‡è¾“å‡ºç»“æœå¯ä»¥çœ‹åˆ° `Sequence` åªæœ‰åœ¨ä½¿ç”¨æ—¶æ‰æ‰§è¡Œ `map` å‡½æ•°ï¼Œè€Œ `Iterable` åœ¨ä½¿ç”¨å‰ä¹Ÿå°±æ˜¯è°ƒç”¨ `map` å‡½æ•°æ—¶å°±ç«‹å³æ‰§è¡Œäº†ã€‚è¿™æ ·å®ç°æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ `Iterable` æ¯è°ƒç”¨ä¸€æ¬¡å‡½æ•°å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ `Iterable`ï¼Œä¸‹ä¸€ä¸ªå‡½æ•°å†åŸºäºæ–°çš„ `Iterable` æ‰§è¡Œï¼Œæ¯æ¬¡å‡½æ•°è°ƒç”¨äº§ç”Ÿçš„ä¸´æ—¶ `Iterable` ä¼šå¯¼è‡´é¢å¤–çš„å†…å­˜æ¶ˆè€—ï¼Œè€Œ `Sequence` é¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚

##### éå†å‡½æ•°æ‰§è¡Œé¡ºåº

å†çœ‹ä¸€ä¸ªä¾‹å­ï¼šå°†ä¸€ç»„å­—ç¬¦ä¸²å…ˆè½¬å¤§å†™ï¼Œç„¶ååˆ¤æ–­å…¶ä¸­æœ‰æ²¡æœ‰å­—æ¯ B å¼€å¤´çš„ã€‚

- `Iterable`ï¼š

    ``` kotlin
    ğŸï¸
    val result = listOf("a", "bc", "d", "e", "f")
        .map {
            println("map: $it")
            it.toUpperCase()
        }
        .any { it.startsWith("B") }
    println(result)
    ```

    è¾“å‡ºï¼š

    ``` bash
    map: a
    map: bc
    map: d
    map: e
    map: f // ğŸ‘ˆ 5 æ¬¡ map
    true
    ```

- `Sequence`ï¼š

    ``` kotlin
    ğŸï¸
    val result = sequenceOf("a", "bc", "d", "e", "f")
        .map {
            println("map: $it")
            it.toUpperCase()
        }
        .any { it.startsWith("B") }
    println(result)
    ```

    è¾“å‡ºï¼š

    ``` bash
    map: a
    map: bc // ğŸ‘ˆ 2 æ¬¡ map
    true
    ```

å¯ä»¥çœ‹åˆ°ï¼Œ`Sequence` æ‰§è¡Œçš„ `map` æ“ä½œç›¸æ¯” `Iterable` å°‘äº†ä¸‰æ¬¡ï¼Œé¿å…äº†ä¸å¿…è¦çš„è½¬æ¢æ“ä½œã€‚

##### å¯¹æ¯”

åœ¨æ•°æ®æ¯”è¾ƒå°‘æ—¶ï¼Œ`Sequence` ç›¸æ¯” `Iterable` çš„æ€§èƒ½æå‡ä¸æ€ä¹ˆæ˜æ˜¾ï¼Œè€Œä¸”ä¸ºäº†å®ç°æ‡’åŠ è½½åè€Œæœ‰ä¸€äº›é¢å¤–æ€§èƒ½æ¶ˆè€—ï¼Œå¸¦æ¥çš„æ”¶ç›Šä¸ä¸€å®šæ¯”æˆæœ¬å¤§ã€‚ä½¿ç”¨çš„æ—¶å€™è¯¥æ€ä¹ˆé€‰ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼š

- æ•°æ®é‡å¤§ã€éå†å‡½æ•°å¤šï¼Œä½¿ç”¨ `Sequence`ã€‚
- æ•°æ®é‡å°ã€éå†å‡½æ•°å°‘ï¼Œä½¿ç”¨ `Iterable`ã€‚

### å¯è§æ€§ä¿®é¥°ç¬¦

è®²å®Œäº†æ•°æ®é›†åˆï¼Œå†çœ‹çœ‹ Kotlin ä¸­çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼ŒKotlin ä¸­æœ‰å››ç§å¯è§æ€§ä¿®é¥°ç¬¦ï¼š`public` `private ` `protected` `internal`ï¼š

- `public `ï¼šå…¬å¼€ï¼Œå¯è§æ€§æœ€å¤§ï¼Œå“ªé‡Œéƒ½å¯ä»¥å¼•ç”¨ã€‚
- `private`ï¼šç§æœ‰ï¼Œå¯è§æ€§æœ€å°ï¼Œä»…å¯¹æ‰€åœ¨ç±»å’Œæ‰€åœ¨æ–‡ä»¶å¯è§ã€‚
- `protected`ï¼šä¿æŠ¤ï¼Œç›¸å½“äº `private` + å­ç±»å¯è§ã€‚
- `internal`ï¼šå†…éƒ¨ï¼Œä»…å¯¹ module å†…å¯è§ã€‚

ç›¸æ¯” Java å°‘äº†ä¸€ä¸ªåŒ…å†…å¯è§ä¿®é¥°ç¬¦ï¼Œå¤šäº†ä¸€ä¸ª `internal`ã€Œmodule å†…å¯è§ã€ã€‚è¿™ä¸€èŠ‚ç»“åˆä¾‹å­è®²è®² Kotlin è¿™å››ç§å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œä»¥åŠåœ¨ Kotlin å’Œ Java ä¸­çš„ä¸åŒã€‚å…ˆæ¥çœ‹çœ‹ `public`ï¼š

#### `public`

Java ä¸­æ²¡å†™å¯è§æ€§ä¿®é¥°ç¬¦æ—¶ï¼Œè¡¨ç¤ºåŒ…å†…å¯è§ï¼Œåªæœ‰åœ¨åŒä¸€ä¸ª `package` å†…å¯ä»¥å¼•ç”¨ï¼š

``` java
â˜•ï¸                         ğŸ‘‡
package org.kotlinmaster.library; 
// æ²¡æœ‰å¯è§æ€§ä¿®é¥°ç¬¦
class User {
}

```

``` java
â˜•ï¸                         ğŸ‘‡
package org.kotlinmaster.library;

public class Example {
    void method() {
        new User(); // success
    }
}
```

``` java
â˜•ï¸
package org.kotlinmaster;
                       ğŸ‘†
import org.kotlinmaster.library.User; // compile-error
                          ğŸ‘†
public class OtherPackageExample {
    void method() {
        new User(); // compile-error: 'org.kotlinmaster.library.User' is not public in 'org.kotlinmaster.library'. Cannot be accessed from outside package
    }
}
```

`package` å¤–å¦‚æœè¦å¼•ç”¨ï¼Œéœ€è¦åœ¨ `class` å‰åŠ ä¸Šå¯è§æ€§ä¿®é¥°ç¬¦ `public` è¡¨ç¤ºå…¬å¼€ã€‚

Kotlin ä¸­å¦‚æœä¸å†™å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œå°±è¡¨ç¤ºå…¬å¼€ï¼Œå’Œ Java ä¸­ `public` ä¿®é¥°ç¬¦å…·æœ‰ç›¸åŒæ•ˆæœã€‚åœ¨ Kotlin ä¸­ä¹Ÿå¯ä»¥åŠ ä¸Š `public` ä¿®é¥°ç¬¦ï¼Œä¸è¿‡ IDE ä¼šæç¤ºä½ åˆ æ‰ï¼Œå› ä¸ºé»˜è®¤å°±æ˜¯ `public`ã€‚

#### `@hide`

åœ¨ Android çš„å®˜æ–¹ sdk ä¸­ï¼Œæœ‰ä¸€äº›æ–¹æ³•åªæƒ³å¯¹ sdk å†…å¯è§ï¼Œä¸æƒ³å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•ä¸å¤ªç¨³å®šï¼Œåœ¨åç»­ç‰ˆæœ¬ä¸­å¾ˆæœ‰å¯èƒ½ä¼šä¿®æ”¹æˆ–åˆ æ‰ã€‚ä¸ºäº†å®ç°è¿™ä¸ªç‰¹æ€§ï¼Œä¼šåœ¨æ–¹æ³•çš„æ³¨é‡Šä¸­æ·»åŠ ä¸€ä¸ª Javadoc æ–¹æ³• `@hide`ï¼Œç”¨æ¥é™åˆ¶å®¢æˆ·ç«¯è®¿é—®ï¼š

``` java
â˜•ï¸
/**
* @hide ğŸ‘ˆ
*/
public void hideMethod() {
    ...
}
```

ä½†è¿™ç§é™åˆ¶ä¸å¤ªä¸¥æ ¼ï¼Œå¯ä»¥é€šè¿‡åå°„è®¿é—®åˆ°é™åˆ¶çš„æ–¹æ³•ã€‚é’ˆå¯¹è¿™ä¸ªéœ€æ±‚ï¼ŒKotlin å¼•è¿›äº†ä¸€ä¸ªæ›´ä¸ºä¸¥æ ¼çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼š`internal`ã€‚

#### `internal`

`internal` è¡¨ç¤ºä¿®é¥°çš„ç±»ã€æ–¹æ³•ä»…å¯¹ module å†…å¯è§ï¼Œè¿™é‡Œçš„ module å…·ä½“æŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒè¡¨ç¤ºä¸€ç»„å…±åŒç¼–è¯‘çš„ kotlin æ–‡ä»¶ï¼Œå¸¸è§çš„å½¢å¼æœ‰ï¼š

- Android Studio é‡Œçš„ module
- Maven project

`internal` åœ¨å†™ä¸€ä¸ª library module æ—¶éå¸¸æœ‰ç”¨ï¼Œå½“éœ€è¦åˆ›å»ºä¸€ä¸ªæ–¹æ³•ä»…å¼€æ”¾ç»™ module å†…éƒ¨ä½¿ç”¨ï¼Œä½†ä¸æƒ³å¼€æ”¾ç»™ä½¿ç”¨è€…ï¼Œå› ä¸ºåé¢å¯èƒ½ä¼šä¿®æ”¹ï¼Œè¿™æ—¶å°±åº”è¯¥ç”¨  `internal` å¯è§æ€§ä¿®é¥°ç¬¦ã€‚

#### Java çš„åŒ…å†…å¯è§ä¸ºä»€ä¹ˆæ²¡äº†ï¼Ÿ

Java çš„åŒ…å†…å¯è§åœ¨ Kotlin ä¸­è¢«å¼ƒç”¨æ‰äº†ï¼ŒKotlin ä¸­ä¸å®ƒæœ€æ¥è¿‘çš„å¯è§æ€§ä¿®é¥°ç¬¦æ˜¯ `internal`ã€Œmodule  å†…å¯è§ã€ã€‚ä¸ºä»€ä¹ˆä¼šå¼ƒç”¨æ‰åŒ…å†…å¯è§ï¼Ÿæˆ‘è§‰å¾—æœ‰è¿™å‡ ä¸ªåŸå› ï¼š

- Kotlin é¼“åŠ±åˆ›å»º top-level æ–¹æ³•å’Œå±æ€§ï¼Œä¸€ä¸ªæºç æ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼Œä½¿å¾— Kotlin çš„æºç ç»“æ„æ›´åŠ æ‰å¹³åŒ–ï¼ŒåŒ…ç»“æ„ä¸å†åƒ Java ä¸­é‚£ä¹ˆé‡è¦ã€‚
- ä¸ºäº†ä»£ç çš„è§£è€¦å’Œå¯ç»´æŠ¤æ€§ï¼Œmodule è¶Šæ¥è¶Šå¤šã€è¶Šæ¥è¶Šå°ï¼Œä½¿å¾— `internal` ã€Œmodule å†…å¯è§ã€å·²ç»å¯ä»¥æ»¡è¶³å¯¹äºä»£ç å°è£…çš„éœ€æ±‚ã€‚

#### `protected`

- Java ä¸­ `protected` è¡¨ç¤ºåŒ…å†…å¯è§ + å­ç±»å¯è§ã€‚
- Kotlin ä¸­ `protected` è¡¨ç¤º `private` + å­ç±»å¯è§ã€‚

å¯è§ Kotlin ç›¸æ¯” Java `protected` çš„å¯è§èŒƒå›´æ”¶çª„äº†ï¼ŒåŸå› æ˜¯ Kotlin ä¸­ä¸å†æœ‰åŒ…å†…å¯è§çš„æ¦‚å¿µäº†ï¼Œç›¸æ¯” Java çš„å¯è§æ€§ç€çœ¼äº `package`ï¼ŒKotlin æ›´å…³å¿ƒçš„æ˜¯ moduleã€‚

#### `private`

- Java ä¸­çš„ `private` è¡¨ç¤ºç±»ä¸­å¯è§ï¼Œå¤–éƒ¨åŒ…å«ç±»å¯è§ã€‚
- Kotlin ä¸­çš„ `private` è¡¨ç¤ºç±»ä¸­æˆ–æ‰€åœ¨æ–‡ä»¶å†…å¯è§ï¼Œå¤–éƒ¨åŒ…å«ç±»ä¸å¯è§ã€‚

`private` åœ¨ Java å’Œ Kotlin ä¸­çš„åŒºåˆ«ï¼š

- åœ¨ Java ä¸­å¯ä»¥è®¿é—®å†…éƒ¨ç±»çš„ `private` å˜é‡ï¼š

  ``` java
  â˜•ï¸
  public class Outter {
  
      public static void method() {
          Inner inner = new Inner();
                              ğŸ‘‡
          int result = inner.number * 2; // success
      }
                      ğŸ‘‡
      private static class Inner {
            ğŸ‘‡
          private int number = 0;
      }
  }
  ```

- åœ¨ Kotlin ä¸­æ˜¯ä¸å…è®¸çš„ï¼š

  ``` kotlin
  ğŸï¸
  class Outter {
      
      fun method() {
          val inner = Inner()
                              ğŸ‘‡
          val result = inner.number * 2 // compile-error: Cannot access 'number': it is private in 'Inner'
      }
       ğŸ‘‡
      class Inner {
            ğŸ‘‡
          private val number = 1
      }
  }
  ```

##### å¯ä»¥ä¿®é¥°ç±»å’Œæ¥å£

- Java ä¸­ä¸€ä¸ªæ–‡ä»¶åªå…è®¸ä¸€ä¸ªå¤–éƒ¨ç±»ï¼Œæ‰€ä»¥ `class`  å’Œ `interface` ä¸å…è®¸è®¾ç½®ä¸º `private`ï¼Œå› ä¸ºå£°æ˜ `private`  åæ— æ³•è¢«ä½¿ç”¨ï¼Œè¿™æ ·å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚

- Kotlin å…è®¸åŒä¸€ä¸ªæ–‡ä»¶å£°æ˜å¤šä¸ª `class` å’Œ top-level çš„æ–¹æ³•å’Œå±æ€§ï¼Œæ‰€ä»¥ Kotlin ä¸­å…è®¸ç±»å’Œæ¥å£å£°æ˜ä¸º `private`ï¼Œå› ä¸ºåŒä¸ªæ–‡ä»¶ä¸­çš„åˆ«çš„æˆå‘˜å¯ä»¥è®¿é—®ï¼š

  ``` kotlin
  ğŸï¸                   ğŸ‘‡
  private interface Interface {
    ğŸ‘†
      fun method()
  }
  
    ğŸ‘‡          ğŸ‘‡       ğŸ‘‡
  private class Impl : Interface {
      val number = 1
      override fun method() {
          println("Impl method()")
      }
  }
                   // ğŸ‘‡ åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®
  private val impl = Impl()
  
  private val result = impl.number * 2
  ```

---

### æ€è€ƒé¢˜

1. æ¬¡æ„é€ å™¨å†™åœ¨åˆå§‹åŒ–ä»£ç å—ä¹‹å‰ï¼Œè°å…ˆæ‰§è¡Œï¼Ÿ

2. `phoneCount` å’Œ `phoneCount1` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

   ``` kotlin
   ğŸï¸
   class User {
       val phones = mutableListOf<String>()
       val phoneCount = phones.size
       val phoneCount1 get() = phones.size
   }
   ```

3. ä¸‹é¢è¿™æ®µä»£ç æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

   ``` kotlin
   ğŸï¸
   val list = listOf("a", "b", "c")
   list.toMutableList()
   list.add("d")
   ```

5. åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªç±»çš„ `private` å±æ€§å¯ä»¥è¢«å¦ä¸€ä¸ªç±»è®¿é—®å—ï¼Ÿ
