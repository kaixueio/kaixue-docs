## Kotlin é‡Œé‚£äº›ã€Œä¸æ˜¯é‚£ä¹ˆå†™çš„ã€

ä¸ŠæœŸæˆ‘ä»¬è®²äº† Kotlin ä¸Šæ‰‹æœ€åŸºç¡€çš„ä¸‰ä¸ªç‚¹ï¼šå˜é‡ã€å‡½æ•°å’Œç±»å‹ã€‚å¤§å®¶éƒ½å¬è¯´è¿‡ï¼ŒKotlin å®Œå…¨å…¼å®¹ Javaï¼Œè¿™ä¸ªæ„æ€æ˜¯ç”¨ Java å†™å‡ºæ¥çš„ class å’Œ Kotlin å¯ä»¥å®Œç¾äº¤äº’ï¼Œè€Œä¸æ˜¯è¯´ä½ ç”¨ Java çš„å†™æ³•å»å†™ Kotlin ä¹Ÿå®Œå…¨æ²¡é—®é¢˜ï¼Œè¿™ä¸ªæ˜¯ä¸è¡Œçš„ã€‚è¿™æœŸå†…å®¹æˆ‘ä»¬å°±è®²ä¸€ä¸‹ï¼ŒKotlin é‡Œé‚£äº›ã€Œä¸ Javaã€çš„å†™æ³•ã€‚

### Constructor

ä¸Šä¸€ç¯‡ä¸­ç®€å•ä»‹ç»äº† Kotlin çš„æ„é€ å™¨ï¼Œè¿™ä¸€èŠ‚å…·ä½“çœ‹çœ‹ Kotlin çš„æ„é€ å™¨å’Œ Java æœ‰ä»€ä¹ˆä¸ä¸€æ ·ã€‚é¦–å…ˆçœ‹ä¸¤æ®µåˆ†åˆ«ç”¨ Java å’Œ Kotlin å†™çš„ `User` ç±»ï¼š

- Java

    ``` java
    â˜•ï¸
    public class User {
        int id;
        String name;
          ğŸ‘‡    ğŸ‘‡
        public User(int id, String name) {
            this.id = id;
            this.name = name;
        }
    }
    ```

- Kotlin

    ``` kotlin
    ğŸï¸
    class User {
    // ğŸ‘† æ²¡æœ‰ public
        val id: Int
        val name: String
             ğŸ‘‡
        constructor(id: Int, name: String) {
     //ğŸ‘† æ²¡æœ‰ public
            this.id = id
            this.name = name
        }
    }
    ```

å¯ä»¥å‘ç°æœ‰ä¸¤ç‚¹ä¸åŒï¼š

- Java ä¸­æ„é€ å™¨å’Œç±»åŒåï¼ŒKotlin ä¸­ä½¿ç”¨ `constructor` è¡¨ç¤ºã€‚
- Kotlin æ„é€ å™¨æ²¡æœ‰ public ä¿®é¥°ï¼Œå› ä¸ºé»˜è®¤å¯è§æ€§å°±æ˜¯å…¬å¼€çš„ï¼Œå…³äºå¯è§æ€§ä¿®é¥°ç¬¦è¿™é‡Œå…ˆä¸å±•å¼€ï¼Œåé¢ä¼šè®²åˆ°ã€‚

#### init

è¿˜æœ‰ï¼ŒJava é‡Œå¸¸å¸¸é…åˆæ„é€ æ–¹æ³•ä¸€èµ·ä½¿ç”¨çš„ init ä»£ç å—ï¼Œåœ¨ Kotlin é‡Œçš„å†™æ³•ä¹Ÿæœ‰äº†ä¸€ç‚¹ç‚¹æ”¹å˜ï¼šä½ éœ€è¦ç»™å®ƒåŠ ä¸€ä¸ª init å‰ç¼€ã€‚

- Java

    ``` java
    â˜•ï¸
    public class User {
       ğŸ‘‡
        {
            // Java init blockï¼Œç¬¬ä¸€æ­¥
        }
        public User() {
            // æ„é€ å™¨ï¼Œç¬¬äºŒæ­¥
        }
    }
    ```

- Kotlin

    ``` kotlin
    ğŸï¸
    class User {
        ğŸ‘‡
        init {
            // Kotlin init blockï¼Œç¬¬ä¸€æ­¥
        }
        constructor() {
            // æ„é€ å™¨ï¼Œç¬¬äºŒæ­¥
        }
    }
    ```

Kotlin çš„ init ä»£ç å—å’Œ Java ä¸€æ ·ï¼Œéƒ½åœ¨å®ä¾‹åŒ–æ—¶æ‰§è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œé¡ºåºéƒ½åœ¨æ„é€ å™¨ä¹‹å‰ã€‚

### `final`

ä¸Šä¸€ç¯‡åœ¨ã€Œ `var` å’Œ `val`ã€ è¿™ä¸€èŠ‚ä¸­è®²åˆ° Kotlin ä¸­çš„ `val` å’Œ Java ä¸­çš„ `final` ç±»ä¼¼ï¼Œè¡¨ç¤ºåªè¯»å˜é‡ï¼Œä¸èƒ½ä¿®æ”¹ã€‚è¿™é‡Œå…·ä½“å¯¹æ¯”ä¸‹ Java å’Œ Kotlin ä¸­çš„åªè¯»å˜é‡ï¼š

- Java

  ``` java
  â˜•ï¸
   ğŸ‘‡
  final int final1 = 1;
               ğŸ‘‡  
  void method(final String final2) {
       ğŸ‘‡
      final String final3 = "The parameter is " + final2;
  }
  ```
  
- Kotlin

  ``` kotlin
  ğŸï¸
  ğŸ‘‡
  val fina1 = 1
         // ğŸ‘‡ æ²¡æœ‰ val
  fun method(final2: String) {
      ğŸ‘‡
      val final3 = "The parameter is " + final2
  }
  ```

å¯ä»¥çœ‹åˆ°ä¸åŒç‚¹ä¸»è¦æœ‰ï¼š

- final å˜æˆ valã€‚
- ç”±äºç±»å‹æ¨æ–­ç±»å‹å¯ä»¥çœç•¥ä¸å†™ï¼Œå†™æ³•ä¸Šç®€çŸ­äº†ä¸€äº›ã€‚
- Kotlin æ–¹æ³•å‚æ•°é»˜è®¤æ˜¯ val ç±»å‹ï¼Œæ‰€ä»¥å‚æ•°å‰ä¸éœ€è¦å†™ val å…³é”®å­—ã€‚

ä¸Šä¸€æœŸè¯´è¿‡ï¼Œ`var` æ˜¯ variable çš„ç¼©å†™ï¼Œ `val` æ˜¯ value çš„ç¼©å†™ã€‚

å…¶å®æˆ‘ä»¬å†™ Java ä»£ç çš„æ—¶å€™ï¼Œå¾ˆå°‘ä¼šæœ‰äººç”¨ `final` çš„å¯¹å§ï¼Ÿä½†æ˜¯æˆ‘ä» `final` å¼€å§‹è¯´èµ·ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åˆ‡å…¥ç‚¹ï¼Œæ¥è®©æˆ‘ä»¬å»çœ‹ä¸€çœ‹ Kotlin é‡Œé‚£äº›ã€Œä¸ Javaã€çš„å†™æ³•ã€‚æ‰€ä»¥ç¨åå‡ åˆ†é’Ÿçš„å†…å®¹ï¼Œä¹Ÿéƒ½æ˜¯ä» `final` æ¥å±•å¼€çš„ã€‚

æˆ‘ä»¬ç»§ç»­è¯´ã€‚`final` ç”¨æ¥ä¿®é¥°å˜é‡å…¶å®æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä½†å¤§å®¶éƒ½ä¸ç”¨ï¼›å¯ä½ å¦‚æœå»çœ‹çœ‹å›½å†…å›½å¤–çš„äººå†™çš„ Kotlin ä»£ç ï¼Œä½ ä¼šå‘ç°å¾ˆå¤šäººçš„ä»£ç é‡Œéƒ½ä¼šæœ‰ä¸€å †çš„ `val`ã€‚è€Œä¸”è¿™äº›å†™ `val` çš„äººï¼Œå°±æ˜¯å½“åˆé‚£äº›ä¸å†™ `final` çš„äººã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º `final`å†™èµ·æ¥æ¯” `val` éº»çƒ¦ä¸€ç‚¹ï¼šæˆ‘éœ€è¦å¤šå†™ä¸€ä¸ªå•è¯ã€‚è™½ç„¶åªéº»çƒ¦è¿™ä¸€ç‚¹ç‚¹ï¼Œä½†å°±å¯¼è‡´å¾ˆå¤šäººä¸å†™ã€‚

è¿™å°±æ˜¯ä¸€ä»¶å¾ˆæœ‰æ„æ€çš„äº‹ï¼šä» `final` åˆ° `val`ï¼Œåªæ˜¯æ–¹ä¾¿äº†ä¸€ç‚¹ç‚¹ï¼Œä½†å´è®©å®ƒä»¬çš„ä½¿ç”¨é¢‘ç‡æœ‰äº†å·¨å¤§çš„æ”¹å˜ã€‚è¿™ç§æ”¹å˜æ˜¯ä¼šå½±å“åˆ°ä»£ç è´¨é‡çš„ï¼šåœ¨è¯¥åŠ é™åˆ¶çš„åœ°æ–¹åŠ ä¸Šé™åˆ¶ï¼Œå°±å¯ä»¥å‡å°‘ä»£ç å‡ºé”™çš„æ¦‚ç‡ã€‚

#### `val`è‡ªå®šä¹‰ getter

ä¸è¿‡ `val` å’Œ `final` è¿˜æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«çš„ï¼Œè™½ç„¶ `val` ä¿®é¥°çš„å˜é‡ä¸èƒ½äºŒæ¬¡èµ‹å€¼ï¼Œä½†å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å˜é‡çš„ getter æ–¹æ³•æ¥è®©å˜é‡æ¯æ¬¡è¢«è®¿é—®æ—¶è¿”å›åŠ¨æ€è®¡ç®—çš„å€¼ï¼š

``` kotlin
ğŸï¸
ğŸ‘‡
val size: Int
    get() { // ğŸ‘ˆ
        return items.size
    }
```

ä¸è¿‡è¿™ä¸ªå±äºç‰¹æ®Šç”¨æ³•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ `val` è¿˜æ˜¯å¯¹åº”äº Java ä¸­çš„ `final` ä½¿ç”¨çš„ã€‚

### `static` property / function

åˆšæ‰è¯´åˆ°å¤§å®¶éƒ½ä¸å–œæ¬¢å†™ `final` å¯¹å§ï¼Ÿä½†æœ‰ä¸€ç§åœºæ™¯ï¼Œå¤§å®¶æ˜¯æœ€å–œæ¬¢ç”¨ `final` çš„ï¼šå¸¸é‡ã€‚

``` java
â˜•ï¸
public static final String CONST_STRING = "A String"
```

åœ¨ Java é‡Œé¢å†™å¸¸é‡ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯ `static` + `final`ã€‚è€Œåœ¨ Kotlin é‡Œé¢ï¼Œé™¤äº† `final` çš„å†™æ³•ä¸ä¸€æ ·ï¼Œ`static` çš„å†™æ³•äº›ä¹Ÿä¸ä¸€æ ·ï¼Œè€Œä¸”æ˜¯æ›´ä¸ä¸€æ ·ã€‚ç¡®åˆ‡åœ°è¯´ï¼šåœ¨ `Kotlin` é‡Œï¼Œé™æ€å˜é‡å’Œé™æ€æ–¹æ³•è¿™ä¸¤ä¸ªæ¦‚å¿µè¢«å»é™¤äº†ã€‚

é‚£å¦‚æœæƒ³åœ¨ Kotlin ä¸­åƒ Java ä¸€æ ·é€šè¿‡ç±»ç›´æ¥å¼•ç”¨è¯¥æ€ä¹ˆåŠå‘¢ï¼ŸKotlin çš„ç­”æ¡ˆæ˜¯ `companion object`ï¼š

``` kotlin
ğŸï¸
class Sample {
    ...
       ğŸ‘‡
    companion object {
        val anotherString = "Another String"
    }
}
```

å“ˆï¼Ÿä¸ºå•¥ Kotlin è¶Šæ”¹è¶Šå¤æ‚äº†ï¼Ÿä¸ç€æ€¥ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ `object` æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚

#### `object`

Kotlin é‡Œçš„ `object` â€”â€”é¦–å­—æ¯å°å†™çš„ï¼Œä¸æ˜¯å¤§å†™ï¼ŒJava é‡Œçš„ `Object` åœ¨ Kotlin é‡Œä¸ç”¨äº†ã€‚

> Java ä¸­çš„ `Object`  åœ¨ Kotlin ä¸­æ¢æˆäº† `Any`ï¼Œå’Œ `Object` ä½œç”¨ä¸€æ ·ï¼šä½œä¸ºæ‰€æœ‰ç±»çš„åŸºç±»ã€‚

è€Œ `object` ä¸æ˜¯ç±»ï¼Œåƒ `class` ä¸€æ ·åœ¨ Kotlin ä¸­å±äºå…³é”®å­—ï¼š

``` kotlin
ğŸï¸
object Sample {
    ...
}
```

å®ƒçš„æ„æ€å¾ˆç›´æ¥ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªè¿™ä¸ªç±»çš„å¯¹è±¡ã€‚è¿™ä¸ªå°±æ˜¯ `object` çš„æ„æ€ï¼šå¯¹è±¡ã€‚

åœ¨ä»£ç ä¸­å¦‚æœè¦ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œç›´æ¥é€šè¿‡å®ƒçš„ç±»åå°±å¯ä»¥è®¿é—®ï¼š

``` kotlin
ğŸï¸
Sample.name
```

è¿™ä¸å°±æ˜¯å•ä¾‹ä¹ˆï¼Œæ‰€ä»¥åœ¨ Kotlin ä¸­åˆ›å»ºå•ä¾‹ä¸ç”¨åƒ Java ä¸­é‚£ä¹ˆå¤æ‚ï¼Œåªéœ€è¦æŠŠ `class` æ¢æˆ `object` å°±å¯ä»¥äº†ã€‚

##### å•ä¾‹ç±»

æˆ‘ä»¬çœ‹ä¸€ä¸ªå•ä¾‹çš„ä¾‹å­ï¼Œåˆ†åˆ«ç”¨ Java å’Œ Kotlin å®ç°çš„ä»£ç ï¼š

- Java ä¸­çš„å•ä¾‹ç±»ï¼š

    ``` java
    â˜•ï¸
    public class A {
        private static A sInstance;
        
        public static A getInstance() {
            if (sInstance == null) {
                sInstance = new A();
            }
            return sInstance;
        }
    
        private A() {
        }
    
        public int number = 1;
    
        public void method() {
            System.out.println("A.method()");
        }
    }
    ```
    
å¯ä»¥çœ‹åˆ° Java ä¸­ä¸ºäº†å®ç°å•ä¾‹ç±»å†™äº†å¤§é‡çš„æ¨¡ç‰ˆä»£ç ï¼Œç¨æ˜¾ç¹çã€‚ 
    
- Kotlin ä¸­å®ç°å•ä¾‹ç±»ï¼š

    ``` kotlin
    ğŸï¸
    
    // ğŸ‘‡ class æ›¿æ¢æˆäº† object
    object A {
     // ğŸ‘‡ å’Œæ™®é€šç±»ä¸­å£°æ˜ç±»ä¼¼
        val number: Int = 1
        fun method() {
            println("A.method()")
        }
    }
    ```

    å’Œç±»çš„å®šä¹‰ç±»ä¼¼ï¼Œä¸è¿‡ `class` å…³é”®å­—æ›¿æ¢æˆ `object`ï¼Œç›¸æ¯” Java çš„å®ç°ç®€å•å¤šäº†ã€‚


##### åŒ¿åç±»

é™¤äº†å•ä¾‹ç±»ï¼ŒKotlin è¿˜å¯ä»¥åˆ›å»º Java ä¸­çš„åŒ¿åç±»ï¼Œåªæ˜¯å†™æ³•ä¸Šæœ‰ç‚¹ä¸åŒï¼š

- Javaï¼š

    ``` java
    â˜•ï¸                                              ğŸ‘‡ 
    ViewPager.SimpleOnPageChangeListener listener = new ViewPager.SimpleOnPageChangeListener() {
    	@Override // ğŸ‘ˆ
    	public void onPageSelected(int position) {
    		// override
    	}
    };
    ```

- Kotlinï¼š

    ``` kotlin
    ğŸï¸              // ğŸ‘‡ æ²¡æœ‰ object åå­—
    val listener = object: ViewPager.SimpleOnPageChangeListener() {
    		   // ğŸ‘† ã€Œ= å’Œ object: ã€å…±åŒç»„æˆå¯¹è±¡è¡¨è¾¾å¼
        override fun onPageSelected(position: Int) {
            // override
        }
    }
    ```

    å’Œ Java åˆ›å»ºåŒ¿åç±»çš„æ–¹å¼å¾ˆç›¸ä¼¼ï¼ŒKotlin ä¸­è¿™ç§å†™æ³•ç§°ä¹‹ä¸ºã€Œå¯¹è±¡è¡¨è¾¾å¼ã€ï¼Œå¯¹è±¡å°±æ˜¯æŒ‡ `object` åŠåé¢ä¿®é¥°çš„éƒ¨åˆ†ï¼Œè¡¨è¾¾å¼å°±æŒ‡çš„æ˜¯ `=`ã€‚æ‰€ä»¥ `object` åŠåé¢çš„éƒ¨åˆ†ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå¦‚æœæ²¡æœ‰ `=` ä»¥åŠå‰é¢çš„å˜é‡ï¼Œè¿™æ®µä»£ç å°±ä¸èƒ½è¢«è®¤ä¸ºæ˜¯å¯¹è±¡è¡¨è¾¾å¼ï¼Œå°±ä¼šæŠ¥é”™ï¼š

    ``` kotlin
    ğŸï¸
      // ğŸ‘‡ compile error: Name expected
    object: ViewPager.SimpleOnPageChangeListener() {
        override fun onPageSelected(position: Int) {
            // override
        }
    }
    ```

    ç¼–è¯‘å™¨æç¤º `object` åéœ€è¦ä¸€ä¸ªå¯¹è±¡çš„åå­—ï¼Œå› ä¸ºç¼–è¯‘å™¨ä»¥ä¸ºä½ æƒ³åˆ›å»ºä¸€ä¸ªç»§æ‰¿ `ViewPager.SimpleOnPageChangeListener` çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡è¡¨è¾¾å¼ã€‚

##### `companion object`

å‰é¢è¯´åˆ°è®¿é—® `object` ä¸­çš„å˜é‡æˆ–è€…æ–¹æ³•æ—¶ç›´æ¥é€šè¿‡ç±»åå¼•ç”¨ï¼Œå°±åƒ Java çš„é™æ€å˜é‡å’Œæ–¹æ³•ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯ä¸éœ€è¦åœ¨æ¯ä¸ªå˜é‡å’Œæ–¹æ³•å‰é¢ç”¨ `static` ä¿®é¥°ï¼Œå› ä¸º `object` åˆ›å»ºçš„å¯¹è±¡å†…æ‰€æœ‰å˜é‡å’Œæ–¹æ³•é»˜è®¤éƒ½æ˜¯é™æ€çš„ï¼Œæ²¡å¾—é€‰ã€‚å¦‚æœåªæƒ³è®©ç±»ä¸­çš„ä¸€éƒ¨åˆ†æ–¹æ³•å’Œå˜é‡æ˜¯é™æ€çš„è¯¥æ€ä¹ˆåšå‘¢ï¼š

``` kotlin
ğŸï¸
class A {
          ğŸ‘‡
    object B {
        var c: Int = 0
    }
}
```

å¦‚ä¸Šï¼Œå¯ä»¥åœ¨ç±»ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠéœ€è¦é™æ€çš„å˜é‡æˆ–æ–¹æ³•æ”¾åœ¨å†…éƒ¨å¯¹è±¡ B ä¸­ï¼Œå¤–éƒ¨å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è°ƒç”¨è¯¥é™æ€å˜é‡ï¼š

``` kotlin
ğŸï¸
A.B.c
 ğŸ‘†
```

ç±»ä¸­åµŒå¥—çš„å¯¹è±¡å¯ä»¥ç”¨ `companion` ä¿®é¥°ï¼š

``` kotlin
ğŸï¸
class A {
       ğŸ‘‡
    companion object B {
        var c: Int = 0
    }
}
```

`companion` å¯ä»¥ç†è§£ä¸ºä¼´éšã€ä¼´ç”Ÿï¼Œè¡¨ç¤ºä¿®é¥°çš„å¯¹è±¡å’Œå¤–éƒ¨ç±»ç»‘å®šï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯è°ƒç”¨çš„æ—¶å€™å¯ä»¥çœæ‰å¯¹è±¡åï¼š

``` kotlin
ğŸï¸
A.c // ğŸ‘ˆ B æ²¡äº†
```

å½“æœ‰ `companion` ä¿®é¥°æ—¶ï¼Œå¯¹è±¡çš„åå­—ä¹Ÿå¯ä»¥çœç•¥æ‰ï¼š

``` kotlin
ğŸï¸
class A {
                // ğŸ‘‡ B æ²¡äº†
    companion object {
        var c: Int = 0
    }
}
```

è¿™å°±æ˜¯è¿™èŠ‚æœ€å¼€å§‹è®²åˆ°çš„ï¼Œå’Œ Java é™æ€å˜é‡æˆ–æ–¹æ³•çš„ç­‰ä»·å†™æ³•ï¼š`companion object`ã€‚

å‰é¢è®²åˆ° Kotlin æœ‰ç±»çš„åˆå§‹åŒ–ä»£ç ï¼Œé‚£æœ‰æ²¡æœ‰ Java ä¸­çš„é™æ€åˆå§‹åŒ–ä»£ç å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œåªæ˜¯ä¸èƒ½åƒ Java é‚£æ ·æ”¾åœ¨ç±»ä¸­ï¼Œè€Œæ˜¯è¦åƒé™æ€å±æ€§å’Œæ–¹æ³•ä¸€æ ·æ”¾åœ¨ `companion object` ä¸­ï¼š

``` kotlin
ğŸï¸
class Sample {
       ğŸ‘‡
    companion object {
         ğŸ‘‡
        init {
            ...
        }
    }
}
```

##### ç»§æ‰¿ç±»å’Œå®ç°æ¥å£

ç±»å¯ä»¥ç»§æ‰¿åˆ«çš„ç±»ï¼Œå¯ä»¥å®ç°æ¥å£ï¼Œé‚£ `object` å¯ä»¥å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼š

``` kotlin
ğŸï¸
open class A {
    open fun method() {
        ...
    }
}

interface B {
    fun interfaceMethod()
}
  ğŸ‘‡      ğŸ‘‡   ğŸ‘‡
object C : A(), B {

    override fun method() {
        ...
    }

    override fun interfaceMethod() {
        ...
    }
}

class D {          // ğŸ‘‡
    companion object : B {
        override fun interfaceMethod() {
            ...
        }
    }
}
```

#### top-level property / function å£°æ˜

é™¤äº†é™æ€æ–¹æ³•è¿™ç§ç®€ä¾¿çš„è°ƒç”¨æ–¹å¼ï¼ŒKotlin è¿˜æœ‰æ›´æ–¹ä¾¿çš„ä¸œè¥¿ï¼šã€Œ`top-level declaration` é¡¶å±‚å£°æ˜ã€ã€‚å…¶å®å°±æ˜¯æŠŠå±æ€§å’Œå‡½æ•°çš„å£°æ˜ä¸å†™åœ¨ `class` é‡Œé¢ï¼Œè¿™ä¸ªåœ¨ Kotlin é‡Œæ˜¯å…è®¸çš„ï¼š

``` kotlin
ğŸï¸
package com.hencoder.plus // ğŸ‘ˆ å±äº package

// ä¸åœ¨ class/object å†…
fun topLevelFuncion() {
}
```

è¿™æ ·å†™çš„å±æ€§å’Œå‡½æ•°ï¼Œä¸å±äºä»»ä½• `class`ï¼Œè€Œæ˜¯ç›´æ¥å±äº `package`ï¼Œå®ƒå’Œé™æ€å˜é‡ã€é™æ€æ–¹æ³•ä¸€æ ·æ˜¯å…¨å±€çš„ï¼Œä½†ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼šä½ åœ¨å…¶å®ƒåœ°æ–¹ç”¨çš„æ—¶å€™ï¼Œå°±è¿ç±»åéƒ½ä¸ç”¨å†™ï¼š

``` kotlin
ğŸï¸
import com.hencoder.plus.topLevelFunction // ğŸ‘ˆ ç›´æ¥ import æ–¹æ³•

topLevelFunction()
```

å†™åœ¨é¡¶çº§çš„æ–¹æ³•æˆ–è€…å˜é‡æœ‰ä¸ªå¥½å¤„ï¼Œåœ¨ Android Studio ä¸­å†™ä»£ç æ—¶ï¼ŒIDE å¾ˆå®¹æ˜“æ ¹æ®ä½ å†™çš„æ–¹æ³•å‰å‡ ä¸ªå­—æ¯è‡ªåŠ¨è”æƒ³å‡ºç›¸åº”çš„æ–¹æ³•ï¼Œæé«˜äº†å†™ä»£ç çš„æ•ˆç‡ï¼Œè€Œä¸”å¯ä»¥å‡å°‘é¡¹ç›®ä¸­çš„é‡å¤ä»£ç ã€‚

##### å‘½åç›¸åŒçš„é¡¶çº§å‡½æ•°

é¡¶çº§å‡½æ•°ä¸å†™åœ¨ç±»ä¸­å¯èƒ½æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœåœ¨ä¸åŒæ–‡ä»¶ä¸­å£°æ˜å‘½åç›¸åŒçš„å‡½æ•°ï¼Œä½¿ç”¨çš„æ—¶å€™ä¼šä¸ä¼šæ··æ·†ï¼Ÿæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

* åœ¨ `org.kotlinmaster.library` åŒ…ä¸‹æœ‰ä¸€ä¸ªæ–¹æ³• methodï¼š

  ``` kotlin
  ğŸï¸
  package org.kotlinmaster.library1
                             ğŸ‘†
  fun method() {
      println("library1 method()")
  }
  ```

* åœ¨ `org.kotlinmaster.library2` åŒ…ä¸‹ä¹Ÿæœ‰ä¸€ä¸ªåŒåæ–¹æ³•ï¼š

  ``` kotlin
  ğŸï¸
  package org.kotlinmaster.library2
                             ğŸ‘†
  fun method() {
      println("library2 method()")
  }
  ```

åœ¨ä½¿ç”¨çš„æ—¶å€™å¦‚æœåŒæ—¶è°ƒç”¨è¿™ä¸¤ä¸ªåŒåæ–¹æ³•ä¼šæ€ä¹ˆæ ·ï¼š

```kotlin
ğŸï¸
import org.kotlinmaster.library1.method
                           ğŸ‘†
fun test() {
    method()
                       ğŸ‘‡
    org.kotlinmaster.library2.method()
}
```

å¯ä»¥çœ‹åˆ°å½“å‡ºç°ä¸¤ä¸ªåŒåé¡¶çº§å‡½æ•°æ—¶ï¼ŒIDE ä¼šè‡ªåŠ¨åŠ ä¸ŠåŒ…å‰ç¼€æ¥åŒºåˆ†ï¼Œè¿™ä¹Ÿå°è¯äº†é¡¶çº§å‡½æ•°æ˜¯å±äºåŒ…çš„ç‰¹æ€§ã€‚

#### å¯¹æ¯”

é‚£åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œåœ¨ `object`ã€`companion object` å’Œ top-level ä¸­è¯¥é€‰æ‹©å“ªä¸€ä¸ªå‘¢ï¼Ÿç®€å•æ¥è¯´æŒ‰ç…§ä¸‹é¢è¿™ä¸¤ä¸ªæ¡ä»¶åˆ¤æ–­ï¼š

- å¦‚æœæƒ³å†™å·¥å…·ç±»çš„åŠŸèƒ½ï¼Œç›´æ¥åˆ›å»º top-level çš„å‡½æ•°ï¼Œæ”¾åœ¨æ–‡ä»¶ä¸­ã€‚
- å¦‚æœéœ€è¦ç»§æ‰¿åˆ«çš„ç±»æˆ–è€…å®ç°æ¥å£ï¼Œå°±ç”¨ `object` å’Œ `companion object`ã€‚

### å¸¸é‡

é™¤äº†ä¸Šé¢è®²åˆ°çš„é™æ€å˜é‡å’Œæ–¹æ³•ä¼šç”¨åˆ° `static`ï¼ŒJava ä¸­å£°æ˜å¸¸é‡æ—¶ä¹Ÿä¼šç”¨åˆ°ï¼š

- Java ä¸­å£°æ˜å¸¸é‡ï¼š

    ``` java
    â˜•ï¸
    public class Sample {
                ğŸ‘‡     ğŸ‘‡
        public static final int CONST_NUMBER = 1;
    }
    ```

- Kotlin ä¸­å£°æ˜å¸¸é‡ï¼š

    ``` kotlin
    ğŸï¸
    class Sample {
        // ğŸ‘‡ åœ¨ companion object å†…
        companion object {
             ğŸ‘‡                  // ğŸ‘‡ åŸºç¡€ç±»å‹
            const val CONST_NUMBER = 1
        }
    }
    ```

å‘ç°ä¸åŒç‚¹æœ‰ï¼š

- Kotlin çš„å¸¸é‡å¿…é¡»å£°æ˜åœ¨ç±»çš„ä¼´éšå¯¹è±¡å†…ï¼Œå› ä¸ºå¸¸é‡æ˜¯é™æ€çš„ã€‚
- Kotlin æ–°å¢äº†ä¿®é¥°å¸¸é‡çš„ `const` å…³é”®å­—ã€‚

é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«ï¼š

- Kotlin ä¸­åªæœ‰åŸºæœ¬ç±»å‹å’Œ String ç±»å‹å¯ä»¥å£°æ˜æˆå¸¸é‡ã€‚

åŸå› æ˜¯ Kotlin ä¸­çš„å¸¸é‡æŒ‡çš„æ˜¯ ã€Œcompile-time constant ç¼–è¯‘æ—¶å¸¸é‡ã€ï¼Œå®ƒçš„æ„æ€æ˜¯ã€Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±çŸ¥é“è¿™ä¸ªä¸œè¥¿åœ¨æ¯ä¸ªè°ƒç”¨å¤„çš„å®é™…å€¼ã€ï¼Œå› æ­¤å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç›´æ¥æŠŠè¿™ä¸ªå€¼ç¡¬ç¼–ç åˆ°ä»£ç é‡Œä½¿ç”¨çš„åœ°æ–¹ã€‚

è€ŒéåŸºç¡€å’Œ String ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•æ”¹å˜å¯¹è±¡å†…éƒ¨çš„å€¼ï¼Œè¿™æ ·è¿™ä¸ªå˜é‡å°±ä¸æ˜¯å¸¸é‡äº†ï¼Œæ¥çœ‹ä¸€ä¸ª Java çš„ä¾‹å­ï¼Œæ¯”å¦‚ä¸€ä¸ª User ç±»ï¼š

``` java
â˜•ï¸
public class User {
    int id; // ğŸ‘ˆ å¯ä¿®æ”¹
    String name; // ğŸ‘ˆ å¯ä¿®æ”¹
    public User(int id, String name) {
        this.id = id;
        this.name = name;
    }
}
```

åœ¨ä½¿ç”¨çš„åœ°æ–¹å£°æ˜ä¸€ä¸ª `static final` çš„ Userï¼Œå®ƒæ˜¯ä¸èƒ½äºŒæ¬¡èµ‹å€¼çš„ï¼š

``` java
â˜•ï¸
static final User user = new User(123, "Zhangsan");
  ğŸ‘†    ğŸ‘†
```

ä½†æ˜¯å¯ä»¥é€šè¿‡è®¿é—®è¿™ä¸ªç±»çš„æˆå‘˜å˜é‡æ”¹å˜å®ƒçš„å€¼ï¼š

``` java
â˜•ï¸
user.name = "Lisi";
      ğŸ‘†
```

æ‰€ä»¥ç›¸æ¯” Java é‡Œå£°æ˜çš„å¸¸é‡ï¼ŒKotlin çš„å¸¸é‡é™åˆ¶æ›´ä¸¥æ ¼ï¼Œæ›´åŠ ç¬¦åˆå¸¸é‡çš„å®šä¹‰ã€‚

### æ•°ç»„å’Œé›†åˆ

å‰é¢è®²äº† Kotlin ä¸­çš„å¯¹è±¡å’Œå¸¸é‡ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦ä¸€ä¸ªç¼–ç¨‹ä¸­å¸¸è§çš„ä¸»é¢˜ï¼šæ•°ç»„å’Œé›†åˆã€‚

#### æ•°ç»„

å…ˆå£°æ˜ä¸€ä¸ª String æ•°ç»„ï¼š

- Java ä¸­çš„å†™æ³•ï¼š

    ``` java
    â˜•ï¸
    String[] strs = {"a", "b", "c"};
          ğŸ‘†        ğŸ‘†
    ```

- Kotlin ä¸­çš„å†™æ³•ï¼š

    ``` kotlin
    ğŸï¸
    val strs: Array<String> = arrayOf("a", "b", "c")
                ğŸ‘†              ğŸ‘†
    ```

å¯ä»¥çœ‹åˆ° Kotlin ä¸­çš„æ•°ç»„æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ³›å‹çš„ç±»ï¼Œåˆ›å»ºæ–¹æ³•ä¹Ÿæ˜¯æ³›å‹æ–¹æ³•ï¼Œå’Œé›†åˆæ•°æ®ç±»å‹ä¸€æ ·ã€‚

##### å–å€¼å’Œä¿®æ”¹

- Kotlin ä¸­è·å–æˆ–è€…è®¾ç½®æ•°ç»„å…ƒç´ å’Œ Java ä¸€æ ·å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·åŠ ä¸‹æ ‡çš„æ–¹å¼ç´¢å¼•ï¼š

    ``` kotlin
    ğŸï¸
    println(strs[0])
       ğŸ‘‡      ğŸ‘†
    strs[1] = "B"
    ```

- é™¤æ­¤ä¹‹å¤–ï¼ŒKotlin çš„ Array ç±»å‹è¿˜å¯ä»¥ä½¿ç”¨ `get()` å’Œ `set()` æ–¹æ³•å–å€¼å’Œèµ‹å€¼ï¼š

    ``` kotlin
    ğŸï¸
    println(strs.get(0))
         ğŸ‘‡      ğŸ‘†
    strs.set(1, "B")
    ```

ç¬¬äºŒç§æ–¹å¼æœ‰ç‚¹åƒé›†åˆç±»å‹ï¼Œè¿™æ­£æ˜¯ Kotlin ä¸­å°†æ•°ç»„æ³›å‹åŒ–çš„åŸå› ï¼šå¯¹æ•°ç»„çš„æ“ä½œåƒé›†åˆä¸€æ ·åŠŸèƒ½æ›´å¼ºå¤§ï¼Œç”±äºæ³›å‹åŒ– Kotlin å¯ä»¥é€šè¿‡æ‰©å±•æ–¹æ³•çš„æ–¹å¼ç»™æ•°ç»„å¢åŠ å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·æ–¹æ³•ï¼š

- `contains()`
- `first()`
- `find()`

è¿™æ ·æ•°ç»„çš„å®ç”¨æ€§å°±å¤§å¤§å¢åŠ äº†ã€‚

##### ä¸æ”¯æŒåå˜

Kotlin çš„æ•°ç»„ç¼–è¯‘æˆå­—èŠ‚ç ä½¿ç”¨çš„ä»ç„¶æ˜¯ Java çš„æ•°ç»„ï¼Œä½†åœ¨è¯­è¨€å±‚é¢æ˜¯æ³›å‹å®ç°ï¼Œè¿™æ ·ä¼šå¤±å»åå˜ (covariance) ç‰¹æ€§ï¼Œå°±æ˜¯å­ç±»æ•°ç»„å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™çˆ¶ç±»çš„æ•°ç»„å˜é‡ï¼š

 - Kotlin

    ``` kotlin
    ğŸï¸
    val strs: Array<String> = arrayOf("a", "b", "c")
                      ğŸ‘†
    val anys: Array<Any> = strs // compile-error: Type mismatch
                    ğŸ‘†
    ```

- è€Œè¿™åœ¨ Java ä¸­æ˜¯å¯ä»¥çš„ï¼š

    ``` java
    â˜•ï¸
    String[] strs = {"a", "b", "c"};
      ğŸ‘†
    Object[] objs = strs; // success
      ğŸ‘†
    ```

å…³äºåå˜çš„é—®é¢˜ï¼Œè¿™é‡Œå°±å…ˆä¸å±•å¼€ï¼Œåé¢è®²æ³›å‹çš„æ—¶å€™ä¼šæåˆ°ã€‚

#### é›†åˆ

Kotlin å’Œ Java ä¸€æ ·æœ‰ä¸‰ç§é›†åˆç±»å‹ï¼šListã€Set å’Œ Mapï¼Œå®ƒä»¬çš„å«ä¹‰åˆ†åˆ«å¦‚ä¸‹ï¼š

- `List` ä»¥å›ºå®šé¡ºåºå­˜å‚¨ä¸€ç»„å…ƒç´ ï¼Œå…ƒç´ å¯ä»¥é‡å¤ã€‚
- `Set` å­˜å‚¨ä¸€ç»„äº’ä¸ç›¸ç­‰çš„å…ƒç´ ï¼Œé€šå¸¸æ²¡æœ‰å›ºå®šé¡ºåºã€‚
- `Map` å­˜å‚¨ é”®-å€¼ å¯¹çš„æ•°æ®é›†åˆï¼Œé”®äº’ä¸ç›¸ç­‰ï¼Œä½†ä¸åŒçš„é”®å¯ä»¥å¯¹åº”ç›¸åŒçš„å€¼ã€‚

ä» Java åˆ° Kotlinï¼Œè¿™ä¸‰ç§é›†åˆç±»å‹çš„ä½¿ç”¨æœ‰å“ªäº›å˜åŒ–å‘¢ï¼Ÿæˆ‘ä»¬ä¾æ¬¡çœ‹çœ‹ã€‚

##### List

- Java ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š

  ``` java
  â˜•ï¸
  List<String> strList = new ArrayList<>();
                          ğŸ‘†
  strList.add("a");
  strList.add("b");
  strList.add("c"); // ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç
  ```

- Kotlin ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š

  ``` kotlin
  ğŸï¸             // ğŸ‘‡ å› ä¸ºç±»å‹æ¨æ–­ï¼Œçœç•¥ç±»å‹å‚æ•° <String>
  val strList = listOf("a", "b", "c") // ğŸ‘ˆ ä¸€å¥ä»£ç åˆ›å»ºã€æ·»åŠ å…ƒç´ 
         // ğŸ‘† ç±»å‹æ¨æ–­ï¼Œçœç•¥ç±»å‹å£°æ˜ :List<String>
  ```

é¦–å…ˆèƒ½çœ‹åˆ°çš„æ˜¯ Kotlin ä¸­åˆ›å»ºä¸€ä¸ª `List` ç‰¹åˆ«çš„ç®€å•ï¼Œä¸€å¥ä»£ç æå®šï¼Œæœ‰ç‚¹åƒåˆ›å»ºæ•°ç»„çš„ä»£ç ã€‚è€Œä¸” Kotlin ä¸­çš„ `List` å¤šäº†ä¸€ä¸ªç‰¹æ€§ï¼šæ”¯æŒ covariant (åå˜)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥æŠŠå­ç±»çš„ `List` èµ‹å€¼ç»™çˆ¶ç±»çš„ `List`ï¼š

- Kotlinï¼š

  ``` kotlin
  ğŸï¸
  val strs: List<String> = listOf("a", "b", "c")
                  ğŸ‘†
  val anys: List<Any> = strs // success
                 ğŸ‘†
  ```

- è€Œè¿™åœ¨ Java ä¸­æ˜¯ä¼šæŠ¥é”™çš„ï¼š

  ``` java
  â˜•ï¸
  List<String> strList = new ArrayList<>();
         ğŸ‘†
  List<Object> objList = strList; // ğŸ‘ˆ compile error: incompatible types
        ğŸ‘†
  ```

å¯¹äºåå˜çš„æ”¯æŒä¸å¦ï¼Œ`List` å’Œæ•°ç»„åˆšå¥½åè¿‡æ¥äº†ã€‚

###### å’Œæ•°ç»„çš„åŒºåˆ«

Kotlin ä¸­æ•°ç»„å’Œ MutableList çš„ API æ˜¯éå¸¸åƒçš„ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸èƒ½å˜ã€‚é‚£åœ¨ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„å‘¢ï¼Ÿ

è¿™ä¸ªé—®é¢˜åœ¨ Java ä¸­å°±å­˜åœ¨äº†ï¼Ÿæ•°ç»„å’Œ `List` çš„åŠŸèƒ½ç±»ä¼¼ï¼Œ`List` çš„åŠŸèƒ½æ›´å¤šä¸€äº›ï¼Œç›´è§‰åº”è¯¥ç”¨ `List` ã€‚ä½†æ•°ç»„ä¹Ÿä¸æ˜¯æ²¡æœ‰ä¼˜åŠ¿ï¼ŒåŸºç¡€ç±»å‹ (`int[]`ã€`float[]`) çš„æ•°ç»„ä¸ç”¨è‡ªåŠ¨è£…ç®±ï¼Œæ€§èƒ½å¥½ä¸€ç‚¹ã€‚

åœ¨ Kotlin ä¸­ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåœ¨ä¸€äº›æ€§èƒ½éœ€æ±‚æ¯”è¾ƒè‹›åˆ»çš„åœºæ™¯ï¼Œå¹¶ä¸”å…ƒç´ ç±»å‹æ˜¯åŸºç¡€ç±»å‹æ—¶ï¼Œç”¨æ•°ç»„å¥½ä¸€ç‚¹ã€‚ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼ŒKotlin ä¸­è¦ç”¨ä¸“é—¨çš„åŸºç¡€ç±»å‹æ•°ç»„ç±» (`IntArray` `FloatArray` `LongArray`) æ‰å¯ä»¥å…äºè£…ç®±ã€‚

##### Set

- Java ä¸­åˆ›å»ºä¸€ä¸ª `Set`ï¼š

  ``` java
  â˜•ï¸
  Set<String> strSet = new HashSet<>();
                        ğŸ‘†
  strSet.add("a");
  strSet.add("b");
  strSet.add("c"); // ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç
  ```

- Kotlin ä¸­åˆ›å»ºç›¸åŒçš„ `Set`ï¼š

  ``` kotlin
  ğŸï¸            // ğŸ‘‡ çœç•¥ç±»å‹å‚æ•°
  val strSet = setOf("a", "b", "c") // ğŸ‘ˆ ä¸€å¥ä»£ç 
        // ğŸ‘† çœç•¥ç±»å‹å£°æ˜
  ```

å’Œ `List` ç±»ä¼¼ï¼Œä¸€å¥ä»£ç åˆ›å»ºä¸€ä¸ª `Set`ï¼ŒåŒæ ·å…·æœ‰ covariant (åå˜) ç‰¹æ€§ã€‚

##### Map

- Java ä¸­åˆ›å»ºä¸€ä¸ª `Map`ï¼š

  ``` java
  â˜•ï¸
  Map<String, Integer> map = new HashMap<>();
                             ğŸ‘†
  map.put("key1", 1);
  map.put("key2", 2);
  map.put("key3", 3);
  map.put("key4", 3); // ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç
  ```

- Kotlin ä¸­åˆ›å»ºä¸€ä¸ª `Map`ï¼š

  ``` kotlin
  ğŸï¸         // ğŸ‘‡ çœç•¥ç±»å‹å‚æ•°
  val map = mapOf("key1" to 1, "key2" to 2, "key3" to 3, "key4" to 3) // ğŸ‘ˆ ä¸€å¥ä»£ç 
     // ğŸ‘† çœç•¥ç±»å‹å£°æ˜
  ```

å’Œä¸Šé¢ä¸¤ç§é›†åˆç±»å‹ç›¸ä¼¼åˆ›å»ºä»£ç å¾ˆç®€å•ï¼Œä¸€è¡Œæå®šã€‚

###### å–å€¼å’Œä¿®æ”¹

- Kotlin ä¸­çš„ Map é™¤äº†å’Œ Java ä¸­çš„ä¸€æ ·å¯ä»¥ä½¿ç”¨ `get()` æ ¹æ®é”®è·å–å¯¹åº”çš„å€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·çš„æ–¹å¼è·å–ï¼š

    ``` kotlin
    ğŸï¸               ğŸ‘‡
    val value1 = map.get("key1")
                   ğŸ‘‡
    val value2 = map["key2"]
    ```

- ç±»ä¼¼çš„ï¼ŒKotlin ä¸­ä¹Ÿå¯ä»¥ç”¨æ–¹æ‹¬å·çš„æ–¹å¼æ”¹å˜ `Map` ä¸­é”®å¯¹åº”çš„å€¼ï¼š

    ``` kotlin
    ğŸï¸         // ğŸ‘‡ å’Œ mapOf() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸‹æ–‡ä¼šè®²åˆ°
    val map = mutableMapOf("key1" to 1, "key2" to 2)
        ğŸ‘‡
    map.put("key1", 2)
       ğŸ‘‡
    map["key1"] = 2
    ```

##### å¯å˜é›†åˆ/ä¸å¯å˜é›†åˆ

ä¸Šé¢ä¿®æ”¹ `Map` å€¼çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºå‡½æ•°ç”¨çš„æ˜¯ `mutableMapOf()` æ–¹æ³•è€Œä¸æ˜¯ `mapOf()`ï¼Œéš¾é“åªæœ‰ `mutableMapOf()` åˆ›å»ºçš„æ‰å¯ä»¥ä¿®æ”¹å—ï¼Ÿæ˜¯çš„ï¼ŒKotlin ä¸­é›†åˆåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šåªè¯»çš„å’Œå¯å˜çš„ã€‚åªè¯»çš„é›†åˆåœ¨åˆ›å»ºçš„æ—¶å€™å°±è¦ç¡®å®šå¥½å€¼ï¼Œåˆ›å»ºå¥½åé›†åˆçš„ size å’Œå…ƒç´ å€¼éƒ½ä¸èƒ½æ”¹å˜ã€‚

- `listOf()` åˆ›å»ºä¸å¯å˜çš„ `List`ï¼Œ`mutableListOf()` åˆ›å»ºå¯å˜çš„ `List`ã€‚
- `setOf()` åˆ›å»ºä¸å¯å˜çš„ `Set`ï¼Œ`mutableSetOf()` åˆ›å»ºå¯å˜çš„ `Set`ã€‚
- `mapOf()` åˆ›å»ºä¸å¯å˜çš„ `Map`ï¼Œ`mutableMapOf()` åˆ›å»ºå¯å˜çš„ `Map`ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ mutable å‰ç¼€çš„æ–¹æ³•åˆ›å»ºçš„å¯å˜çš„é›†åˆã€‚ä¸å¯å˜çš„é›†åˆå¯ä»¥é€šè¿‡ `toMutable*()` ç³»æ–¹æ³•è½¬æ¢æˆå¯å˜çš„é›†åˆï¼š

``` kotlin
ğŸï¸
val strList = listOf("a", "b", "c")
            ğŸ‘‡
strList.toMutableList()
val strSet = setOf("a", "b", "c")
            ğŸ‘‡
strSet.toMutableSet()
val map = mapOf("key1" to 1, "key2" to 2, "key3" to 3, "key4" to 3)
         ğŸ‘‡
map.toMutableMap()
```

ç„¶åå°±å¯ä»¥å¯¹é›†åˆè¿›è¡Œä¿®æ”¹äº†ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ä¸‹ï¼š`toMutable*()` è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å»ºçš„é›†åˆï¼ŒåŸæœ‰çš„é›†åˆè¿˜æ˜¯ä¸å¯å˜çš„ã€‚

### å¯è§æ€§ä¿®é¥°ç¬¦

è®²å®Œäº†æ•°æ®é›†åˆï¼Œå†çœ‹çœ‹ Kotlin ä¸­çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼ŒKotlin ä¸­æœ‰å››ç§å¯è§æ€§ä¿®é¥°ç¬¦ï¼š`public` `private ` `protected` `internal`ï¼š

- `public `ï¼šå…¬å¼€ï¼Œå¯è§æ€§æœ€å¤§ï¼Œå“ªé‡Œéƒ½å¯ä»¥å¼•ç”¨ã€‚
- `private`ï¼šç§æœ‰ï¼Œå¯è§æ€§æœ€å°ï¼Œä»…å¯¹æ‰€åœ¨ç±»å’Œæ‰€åœ¨æ–‡ä»¶å¯è§ã€‚
- `protected`ï¼šä¿æŠ¤ï¼Œç›¸å½“äº `private` + å­ç±»å¯è§ã€‚
- `internal`ï¼šå†…éƒ¨ï¼Œä»…å¯¹ module å†…å¯è§ã€‚

ç›¸æ¯” Java å°‘äº†ä¸€ä¸ªåŒ…å†…å¯è§ä¿®é¥°ç¬¦ï¼Œå¤šäº†ä¸€ä¸ª `internal`ã€Œmodule å†…å¯è§ã€ã€‚è¿™ä¸€èŠ‚ç»“åˆä¾‹å­è®²è®² Kotlin è¿™å››ç§å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œä»¥åŠåœ¨ Kotlin å’Œ Java ä¸­çš„ä¸åŒã€‚å…ˆæ¥çœ‹çœ‹ `public`ï¼š

#### `public`

Java ä¸­æ²¡å†™å¯è§æ€§ä¿®é¥°ç¬¦æ—¶ï¼Œè¡¨ç¤ºåŒ…å†…å¯è§ï¼Œåªæœ‰åœ¨åŒä¸€ä¸ª `package` å†…å¯ä»¥å¼•ç”¨ï¼š

``` java
â˜•ï¸                         ğŸ‘‡
package org.kotlinmaster.library; 
// æ²¡æœ‰å¯è§æ€§ä¿®é¥°ç¬¦
class User {
}

```

``` java
â˜•ï¸                         ğŸ‘‡
package org.kotlinmaster.library;

public class Example {
    void method() {
        new User(); // success
    }
}
```

``` java
â˜•ï¸
package org.kotlinmaster;
                       ğŸ‘†
import org.kotlinmaster.library.User; // compile-error
                          ğŸ‘†
public class OtherPackageExample {
    void method() {
        new User(); // compile-error: 'org.kotlinmaster.library.User' is not public in 'org.kotlinmaster.library'. Cannot be accessed from outside package
    }
}
```

`package` å¤–å¦‚æœè¦å¼•ç”¨ï¼Œéœ€è¦åœ¨ `class` å‰åŠ ä¸Šå¯è§æ€§ä¿®é¥°ç¬¦ `public` è¡¨ç¤ºå…¬å¼€ã€‚

Kotlin ä¸­å¦‚æœä¸å†™å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œå°±è¡¨ç¤ºå…¬å¼€ï¼Œå’Œ Java ä¸­ `public` ä¿®é¥°ç¬¦å…·æœ‰ç›¸åŒæ•ˆæœã€‚åœ¨ Kotlin ä¸­ä¹Ÿå¯ä»¥åŠ ä¸Š `public` ä¿®é¥°ç¬¦ï¼Œä¸è¿‡ IDE ä¼šæç¤ºä½ åˆ æ‰ï¼Œå› ä¸ºé»˜è®¤å°±æ˜¯ `public`ã€‚

#### `@hide`

åœ¨ Android çš„å®˜æ–¹ sdk ä¸­ï¼Œæœ‰ä¸€äº›æ–¹æ³•åªæƒ³å¯¹ sdk å†…å¯è§ï¼Œä¸æƒ³å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•ä¸å¤ªç¨³å®šï¼Œåœ¨åç»­ç‰ˆæœ¬ä¸­å¾ˆæœ‰å¯èƒ½ä¼šä¿®æ”¹æˆ–åˆ æ‰ã€‚ä¸ºäº†å®ç°è¿™ä¸ªç‰¹æ€§ï¼Œä¼šåœ¨æ–¹æ³•çš„æ³¨é‡Šä¸­æ·»åŠ ä¸€ä¸ª Javadoc æ–¹æ³• `@hide`ï¼Œç”¨æ¥é™åˆ¶å®¢æˆ·ç«¯è®¿é—®ï¼š

``` java
â˜•ï¸
/**
* @hide ğŸ‘ˆ
*/
public void hideMethod() {
    ...
}
```

ä½†è¿™ç§é™åˆ¶ä¸å¤ªä¸¥æ ¼ï¼Œå¯ä»¥é€šè¿‡åå°„è®¿é—®åˆ°é™åˆ¶çš„æ–¹æ³•ã€‚é’ˆå¯¹è¿™ä¸ªéœ€æ±‚ï¼ŒKotlin å¼•è¿›äº†ä¸€ä¸ªæ›´ä¸ºä¸¥æ ¼çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼š`internal`ã€‚

#### `internal`

`internal` è¡¨ç¤ºä¿®é¥°çš„ç±»ã€æ–¹æ³•ä»…å¯¹ module å†…å¯è§ï¼Œè¿™é‡Œçš„ module å…·ä½“æŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒè¡¨ç¤ºä¸€ç»„å…±åŒç¼–è¯‘çš„ kotlin æ–‡ä»¶ï¼Œå¸¸è§çš„å½¢å¼æœ‰ï¼š

- Android Studio é‡Œçš„ module
- Maven project

`internal` åœ¨å†™ä¸€ä¸ª library module æ—¶éå¸¸æœ‰ç”¨ï¼Œå½“éœ€è¦åˆ›å»ºä¸€ä¸ªæ–¹æ³•ä»…å¼€æ”¾ç»™ module å†…éƒ¨ä½¿ç”¨ï¼Œä½†ä¸æƒ³å¼€æ”¾ç»™ä½¿ç”¨è€…ï¼Œå› ä¸ºåé¢å¯èƒ½ä¼šä¿®æ”¹ï¼Œè¿™æ—¶å°±åº”è¯¥ç”¨  `internal` å¯è§æ€§ä¿®é¥°ç¬¦ã€‚

#### Java çš„åŒ…å†…å¯è§ä¸ºä»€ä¹ˆæ²¡äº†ï¼Ÿ

Java çš„åŒ…å†…å¯è§åœ¨ Kotlin ä¸­è¢«å¼ƒç”¨æ‰äº†ï¼ŒKotlin ä¸­ä¸å®ƒæœ€æ¥è¿‘çš„å¯è§æ€§ä¿®é¥°ç¬¦æ˜¯ `internal`ã€Œmodule  å†…å¯è§ã€ã€‚ä¸ºä»€ä¹ˆä¼šå¼ƒç”¨æ‰åŒ…å†…å¯è§ï¼Ÿæˆ‘è§‰å¾—æœ‰è¿™å‡ ä¸ªåŸå› ï¼š

- Kotlin é¼“åŠ±åˆ›å»º top-level æ–¹æ³•å’Œå±æ€§ï¼Œä¸€ä¸ªæºç æ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼Œä½¿å¾— Kotlin çš„æºç ç»“æ„æ›´åŠ æ‰å¹³åŒ–ï¼ŒåŒ…ç»“æ„ä¸å†åƒ Java ä¸­é‚£ä¹ˆé‡è¦ã€‚
- ä¸ºäº†ä»£ç çš„è§£è€¦å’Œå¯ç»´æŠ¤æ€§ï¼Œmodule è¶Šæ¥è¶Šå¤šã€è¶Šæ¥è¶Šå°ï¼Œä½¿å¾— `internal` ã€Œmodule å†…å¯è§ã€å·²ç»å¯ä»¥æ»¡è¶³å¯¹äºä»£ç å°è£…çš„éœ€æ±‚ã€‚

#### `protected`

- Java ä¸­ `protected` è¡¨ç¤ºåŒ…å†…å¯è§ + å­ç±»å¯è§ã€‚
- Kotlin ä¸­ `protected` è¡¨ç¤º `private` + å­ç±»å¯è§ã€‚

å¯è§ Kotlin ç›¸æ¯” Java `protected` çš„å¯è§èŒƒå›´æ”¶çª„äº†ï¼ŒåŸå› æ˜¯ Kotlin ä¸­ä¸å†æœ‰åŒ…å†…å¯è§çš„æ¦‚å¿µäº†ï¼Œç›¸æ¯” Java çš„å¯è§æ€§ç€çœ¼äº `package`ï¼ŒKotlin æ›´å…³å¿ƒçš„æ˜¯ moduleã€‚

#### `private`

- Java ä¸­çš„ `private` è¡¨ç¤ºç±»ä¸­å¯è§ï¼Œå¤–éƒ¨åŒ…å«ç±»å¯è§ã€‚
- Kotlin ä¸­çš„ `private` è¡¨ç¤ºç±»ä¸­æˆ–æ‰€åœ¨æ–‡ä»¶å†…å¯è§ï¼Œå¤–éƒ¨åŒ…å«ç±»ä¸å¯è§ã€‚

`private` åœ¨ Java å’Œ Kotlin ä¸­çš„åŒºåˆ«ï¼š

- åœ¨ Java ä¸­å¯ä»¥è®¿é—®å†…éƒ¨ç±»çš„ `private` å˜é‡ï¼š

  ``` java
  â˜•ï¸
  public class Outter {
  
      public static void method() {
          Inner inner = new Inner();
                              ğŸ‘‡
          int result = inner.number * 2; // success
      }
                      ğŸ‘‡
      private static class Inner {
            ğŸ‘‡
          private int number = 0;
      }
  }
  ```

- åœ¨ Kotlin ä¸­æ˜¯ä¸å…è®¸çš„ï¼š

  ``` kotlin
  ğŸï¸
  class Outter {
      
      fun method() {
          val inner = Inner()
                              ğŸ‘‡
          val result = inner.number * 2 // compile-error: Cannot access 'number': it is private in 'Inner'
      }
       ğŸ‘‡
      class Inner {
            ğŸ‘‡
          private val number = 1
      }
  }
  ```

##### å¯ä»¥ä¿®é¥°ç±»å’Œæ¥å£

- Java ä¸­ä¸€ä¸ªæ–‡ä»¶åªå…è®¸ä¸€ä¸ªå¤–éƒ¨ç±»ï¼Œæ‰€ä»¥ `class`  å’Œ `interface` ä¸å…è®¸è®¾ç½®ä¸º `private`ï¼Œå› ä¸ºå£°æ˜ `private`  åæ— æ³•è¢«ä½¿ç”¨ï¼Œè¿™æ ·å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚

- Kotlin å…è®¸åŒä¸€ä¸ªæ–‡ä»¶å£°æ˜å¤šä¸ª `class` å’Œ top-level çš„æ–¹æ³•å’Œå±æ€§ï¼Œæ‰€ä»¥ Kotlin ä¸­å…è®¸ç±»å’Œæ¥å£å£°æ˜ä¸º `private`ï¼Œå› ä¸ºåŒä¸ªæ–‡ä»¶ä¸­çš„åˆ«çš„æˆå‘˜å¯ä»¥è®¿é—®ï¼š

  ``` kotlin
  ğŸï¸                   ğŸ‘‡
  private interface Interface {
    ğŸ‘†
      fun method()
  }
  
    ğŸ‘‡          ğŸ‘‡       ğŸ‘‡
  private class Impl : Interface {
      val number = 1
      override fun method() {
          println("Impl method()")
      }
  }
                   // ğŸ‘‡ åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®
  private val impl = Impl()
  
  private val result = impl.number * 2
  ```

---

### æ€è€ƒé¢˜

2. `phoneCount` å’Œ `phoneCount1` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

   ``` kotlin
   ğŸï¸
   class User {
       val phones = mutableListOf<String>()
       val phoneCount = phones.size
       val phoneCount1 get() = phones.size
   }
   ```

5. åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªç±»çš„ `private` å±æ€§å¯ä»¥è¢«å¦ä¸€ä¸ªç±»è®¿é—®å—ï¼Ÿ
